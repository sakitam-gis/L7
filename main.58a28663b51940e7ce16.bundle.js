(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1e3:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ReglAttribute=function(){function ReglAttribute(gl,options){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,ReglAttribute),this.attribute=void 0,this.buffer=void 0;var buffer=options.buffer,offset=options.offset,stride=options.stride,normalized=options.normalized,size=options.size,divisor=options.divisor;this.buffer=buffer,this.attribute={buffer:buffer.get(),offset:offset||0,stride:stride||0,normalized:normalized||!1,divisor:divisor||0},size&&(this.attribute.size=size)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ReglAttribute,[{key:"get",value:function get(){return this.attribute}},{key:"updateBuffer",value:function updateBuffer(options){this.buffer.subData(options)}},{key:"destroy",value:function destroy(){this.buffer.destroy()}}]),ReglAttribute}();exports.default=ReglAttribute},1001:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _core=__webpack_require__(25),_constants=__webpack_require__(210),ReglBuffer=function(){function ReglBuffer(reGl,options){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,ReglBuffer),this.buffer=void 0;var data=options.data,usage=options.usage,type=options.type;this.buffer=reGl.buffer({data:data,usage:_constants.usageMap[usage||_core.gl.STATIC_DRAW],type:_constants.dataTypeMap[type||_core.gl.UNSIGNED_BYTE]})}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ReglBuffer,[{key:"get",value:function get(){return this.buffer}},{key:"destroy",value:function destroy(){this.buffer.destroy()}},{key:"subData",value:function subData(_ref){var data=_ref.data,offset=_ref.offset;this.buffer.subdata(data,offset)}}]),ReglBuffer}();exports.default=ReglBuffer},1002:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _core=__webpack_require__(25),_constants=__webpack_require__(210),ReglElements=function(){function ReglElements(reGl,options){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,ReglElements),this.elements=void 0;var data=options.data,usage=options.usage,type=options.type,count=options.count;this.elements=reGl.elements({data:data,usage:_constants.usageMap[usage||_core.gl.STATIC_DRAW],type:_constants.dataTypeMap[type||_core.gl.UNSIGNED_BYTE],count:count})}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ReglElements,[{key:"get",value:function get(){return this.elements}},{key:"subData",value:function subData(_ref){var data=_ref.data;this.elements.subdata(data)}},{key:"destroy",value:function destroy(){this.elements.destroy()}}]),ReglElements}();exports.default=ReglElements},1003:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(23),__webpack_require__(27),__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var ReglFramebuffer=function(){function ReglFramebuffer(reGl,options){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,ReglFramebuffer),this.framebuffer=void 0;var width=options.width,height=options.height,color=options.color,colors=options.colors,framebufferOptions=(options.depth,options.stencil,{width:width,height:height});Array.isArray(colors)&&(framebufferOptions.colors=colors.map((function(c){return c.get()}))),color&&"boolean"!=typeof color&&(framebufferOptions.color=color.get()),this.framebuffer=reGl.framebuffer(framebufferOptions)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ReglFramebuffer,[{key:"get",value:function get(){return this.framebuffer}},{key:"destroy",value:function destroy(){this.framebuffer.destroy()}},{key:"resize",value:function resize(_ref){var width=_ref.width,height=_ref.height;this.framebuffer.resize(width,height)}}]),ReglFramebuffer}();exports.default=ReglFramebuffer},1004:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(26),__webpack_require__(9),__webpack_require__(23),__webpack_require__(4),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(11),__webpack_require__(2),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _core=__webpack_require__(25),_constants=__webpack_require__(210),ReglModel=function(){function ReglModel(reGl,options){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,ReglModel),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=reGl;var vs=options.vs,fs=options.fs,attributes=options.attributes,uniforms=options.uniforms,primitive=options.primitive,count=options.count,elements=options.elements,depth=options.depth,blend=options.blend,stencil=options.stencil,cull=options.cull,instances=options.instances,reglUniforms={};uniforms&&(this.uniforms=uniforms,Object.keys(uniforms).forEach((function(uniformName){reglUniforms[uniformName]=reGl.prop(uniformName)})));var reglAttributes={};Object.keys(attributes).forEach((function(name){reglAttributes[name]=attributes[name].get()}));var drawParams={attributes:reglAttributes,frag:fs,uniforms:reglUniforms,vert:vs,primitive:_constants.primitiveMap[void 0===primitive?_core.gl.TRIANGLES:primitive]};instances&&(drawParams.instances=instances),count&&(drawParams.count=count),elements&&(drawParams.elements=elements.get()),this.initDepthDrawParams({depth:depth},drawParams),this.initBlendDrawParams({blend:blend},drawParams),this.initStencilDrawParams({stencil:stencil},drawParams),this.initCullDrawParams({cull:cull},drawParams),this.drawCommand=reGl(drawParams)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ReglModel,[{key:"addUniforms",value:function addUniforms(uniforms){this.uniforms=_objectSpread({},this.uniforms,{},uniforms)}},{key:"draw",value:function draw(options){var uniforms=_objectSpread({},this.uniforms,{},options.uniforms),reglDrawProps={};Object.keys(uniforms).forEach((function(uniformName){var type=_typeof(uniforms[uniformName]);reglDrawProps[uniformName]="boolean"===type||"number"===type||Array.isArray(uniforms[uniformName])||uniforms[uniformName].BYTES_PER_ELEMENT?uniforms[uniformName]:uniforms[uniformName].get()})),this.drawCommand(reglDrawProps)}},{key:"destroy",value:function destroy(){}},{key:"initDepthDrawParams",value:function initDepthDrawParams(_ref,drawParams){var depth=_ref.depth;depth&&(drawParams.depth={enable:void 0===depth.enable||!!depth.enable,mask:void 0===depth.mask||!!depth.mask,func:_constants.depthFuncMap[depth.func||_core.gl.LESS],range:depth.range||[0,1]})}},{key:"initBlendDrawParams",value:function initBlendDrawParams(_ref2,drawParams){var blend=_ref2.blend;if(blend){var enable=blend.enable,func=blend.func,equation=blend.equation,_blend$color=blend.color,color=void 0===_blend$color?[0,0,0,0]:_blend$color;drawParams.blend={enable:void 0!==enable&&!!enable,func:{srcRGB:_constants.blendFuncMap[func&&func.srcRGB||_core.gl.SRC_ALPHA],srcAlpha:_constants.blendFuncMap[func&&func.srcAlpha||_core.gl.SRC_ALPHA],dstRGB:_constants.blendFuncMap[func&&func.dstRGB||_core.gl.ONE_MINUS_SRC_ALPHA],dstAlpha:_constants.blendFuncMap[func&&func.dstAlpha||_core.gl.ONE_MINUS_SRC_ALPHA]},equation:{rgb:_constants.blendEquationMap[equation&&equation.rgb||_core.gl.FUNC_ADD],alpha:_constants.blendEquationMap[equation&&equation.alpha||_core.gl.FUNC_ADD]},color:color}}}},{key:"initStencilDrawParams",value:function initStencilDrawParams(_ref3,drawParams){var stencil=_ref3.stencil;if(stencil){var enable=stencil.enable,_stencil$mask=stencil.mask,mask=void 0===_stencil$mask?-1:_stencil$mask,_stencil$func=stencil.func,func=void 0===_stencil$func?{cmp:_core.gl.ALWAYS,ref:0,mask:-1}:_stencil$func,_stencil$opFront=stencil.opFront,opFront=void 0===_stencil$opFront?{fail:_core.gl.KEEP,zfail:_core.gl.KEEP,zpass:_core.gl.KEEP}:_stencil$opFront,_stencil$opBack=stencil.opBack,opBack=void 0===_stencil$opBack?{fail:_core.gl.KEEP,zfail:_core.gl.KEEP,zpass:_core.gl.KEEP}:_stencil$opBack;drawParams.stencil={enable:void 0!==enable&&!!enable,mask:mask,func:_objectSpread({},func,{cmp:_constants.stencilFuncMap[func.cmp]}),opFront:{fail:_constants.stencilOpMap[opFront.fail],zfail:_constants.stencilOpMap[opFront.zfail],zpass:_constants.stencilOpMap[opFront.zpass]},opBack:{fail:_constants.stencilOpMap[opBack.fail],zfail:_constants.stencilOpMap[opBack.zfail],zpass:_constants.stencilOpMap[opBack.zpass]}}}}},{key:"initCullDrawParams",value:function initCullDrawParams(_ref4,drawParams){var cull=_ref4.cull;if(cull){var enable=cull.enable,_cull$face=cull.face,face=void 0===_cull$face?_core.gl.BACK:_cull$face;drawParams.cull={enable:void 0!==enable&&!!enable,face:_constants.cullFaceMap[face]}}}}]),ReglModel}();exports.default=ReglModel},1005:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _core=__webpack_require__(25),_constants=__webpack_require__(210),ReglTexture2D=function(){function ReglTexture2D(reGl,options){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,ReglTexture2D),this.texture=void 0;var data=options.data,_options$type=options.type,type=void 0===_options$type?_core.gl.UNSIGNED_BYTE:_options$type,width=options.width,height=options.height,_options$format=options.format,format=void 0===_options$format?_core.gl.RGBA:_options$format,_options$mipmap=options.mipmap,mipmap=void 0!==_options$mipmap&&_options$mipmap,_options$wrapS=options.wrapS,wrapS=void 0===_options$wrapS?_core.gl.CLAMP_TO_EDGE:_options$wrapS,_options$wrapT=options.wrapT,wrapT=void 0===_options$wrapT?_core.gl.CLAMP_TO_EDGE:_options$wrapT,_options$aniso=options.aniso,aniso=void 0===_options$aniso?0:_options$aniso,_options$alignment=options.alignment,alignment=void 0===_options$alignment?1:_options$alignment,_options$premultiplyA=options.premultiplyAlpha,_options$mag=options.mag,mag=void 0===_options$mag?_core.gl.NEAREST:_options$mag,_options$min=options.min,min=void 0===_options$min?_core.gl.NEAREST:_options$min,_options$colorSpace=options.colorSpace,colorSpace=void 0===_options$colorSpace?_core.gl.NONE:_options$colorSpace,textureOptions={width:width,height:height,type:_constants.dataTypeMap[type],format:_constants.formatMap[format],wrapS:_constants.wrapModeMap[wrapS],wrapT:_constants.wrapModeMap[wrapT],mag:_constants.filterMap[mag],min:_constants.filterMap[min],alignment:alignment,colorSpace:_constants.colorSpaceMap[colorSpace],premultiplyAlpha:void 0!==_options$premultiplyA&&_options$premultiplyA,aniso:aniso};data&&(textureOptions.data=data),"string"==typeof mipmap?textureOptions.mipmap=_constants.mipmapMap[mipmap]:"boolean"==typeof mipmap&&(textureOptions.mipmap=mipmap),this.texture=reGl.texture(textureOptions)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ReglTexture2D,[{key:"get",value:function get(){return this.texture}},{key:"resize",value:function resize(_ref){var width=_ref.width,height=_ref.height;this.texture.resize(width,height)}},{key:"destroy",value:function destroy(){this.texture.destroy()}}]),ReglTexture2D}();exports.default=ReglTexture2D},1008:function(module,exports,__webpack_require__){"use strict";(function(module){var _react=__webpack_require__(137),React=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(17)),_heatMapgrid=_interopRequireDefault(__webpack_require__(1009)),_Line=_interopRequireDefault(__webpack_require__(1010)),_Point=_interopRequireDefault(__webpack_require__(1011)),_Point3D=_interopRequireDefault(__webpack_require__(1012)),_pointImage=_interopRequireDefault(__webpack_require__(1013)),_polygon3D=_interopRequireDefault(__webpack_require__(1014)),_rasterImage=_interopRequireDefault(__webpack_require__(1015));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}var withSourceLoader=__webpack_require__(176).withSource,__STORY__="import { storiesOf } from '@storybook/react';\nimport * as React from 'react';\nimport GridHeatMap from './components/heatMapgrid';\nimport LineLayer from './components/Line';\nimport PointDemo from './components/Point';\nimport Point3D from './components/Point3D';\nimport PointImage from './components/pointImage';\nimport Polygon3D from './components/polygon3D';\nimport ImageLayerDemo from './components/rasterImage';\n\n// @ts-ignore\nstoriesOf('图层', module)\n  .add('点图层', () => <PointDemo />)\n  .add('3D点', () => <Point3D />)\n  .add('图片标注', () => <PointImage />)\n  .add('面3d图层', () => <Polygon3D />)\n  .add('线图层', () => <LineLayer />)\n  .add('网格热力图', () => <GridHeatMap />)\n  .add('图片', () => <ImageLayerDemo />);\n",__ADDS_MAP__={"图层--图片":{startLoc:{col:7,line:19},endLoc:{col:37,line:19},startBody:{col:13,line:19},endBody:{col:37,line:19}},"图层--网格热力图":{startLoc:{col:7,line:18},endLoc:{col:37,line:18},startBody:{col:16,line:18},endBody:{col:37,line:18}},"图层--线图层":{startLoc:{col:7,line:17},endLoc:{col:33,line:17},startBody:{col:14,line:17},endBody:{col:33,line:17}},"图层--面3d图层":{startLoc:{col:7,line:16},endLoc:{col:35,line:16},startBody:{col:16,line:16},endBody:{col:35,line:16}},"图层--图片标注":{startLoc:{col:7,line:15},endLoc:{col:35,line:15},startBody:{col:15,line:15},endBody:{col:35,line:15}},"图层--3d点":{startLoc:{col:7,line:14},endLoc:{col:31,line:14},startBody:{col:14,line:14},endBody:{col:31,line:14}},"图层--点图层":{startLoc:{col:7,line:13},endLoc:{col:33,line:13},startBody:{col:14,line:13},endBody:{col:33,line:13}}};(0,_react.storiesOf)("图层",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/Layers.stories.tsx",[],{},"/Users/dongdong.feng/Documents/own-fork/L7/stories/Layers",{})).add("点图层",(function(){return React.createElement(_Point.default,null)})).add("3D点",(function(){return React.createElement(_Point3D.default,null)})).add("图片标注",(function(){return React.createElement(_pointImage.default,null)})).add("面3d图层",(function(){return React.createElement(_polygon3D.default,null)})).add("线图层",(function(){return React.createElement(_Line.default,null)})).add("网格热力图",(function(){return React.createElement(_heatMapgrid.default,null)})).add("图片",(function(){return React.createElement(_rasterImage.default,null)}))}).call(this,__webpack_require__(68)(module))},1009:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _layers=__webpack_require__(43),_scene=__webpack_require__(44),React=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(17));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}var extendStatics,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},_default=function(_super){function GridHeatMap(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(GridHeatMap,_super),GridHeatMap.prototype.componentWillUnmount=function(){this.scene.destroy()},GridHeatMap.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,(function(){var response,scene,layer,_a,_b;return __generator(this,(function(_c){switch(_c.label){case 0:return[4,fetch("https://gw.alipayobjects.com/os/basement_prod/c3f8bda2-081b-449d-aa9f-9413b779205b.json")];case 1:return response=_c.sent(),scene=new _scene.Scene({center:[116.49434030056,39.86807342116762],id:"map",pitch:0,type:"amap",style:"mapbox://styles/mapbox/streets-v9",zoom:16}),layer=new _layers.HeatMapGridLayer({}),_b=(_a=layer).source,[4,response.json()];case 2:return _b.apply(_a,[_c.sent(),{parser:{type:"json",x:"lng",y:"lat"},transforms:[{type:"grid",size:50,field:"count",method:"sum"}]}]).size("sum",(function(value){return value})).shape("circle").style({coverage:.8,angle:0}).color("count",["#002466","#105CB3","#2894E0","#CFF6FF","#FFF5B8","#FFAB5C","#F27049","#730D1C"]),scene.addLayer(layer),scene.render(),[2]}}))}))},GridHeatMap.prototype.render=function(){return React.createElement("div",{id:"map",style:{position:"absolute",top:0,left:0,right:0,bottom:0}})},GridHeatMap}(React.Component);exports.default=_default},1010:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _layers=__webpack_require__(43),_scene=__webpack_require__(44),React=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(17));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}var extendStatics,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},_default=function(_super){function Point3D(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Point3D,_super),Point3D.prototype.componentWillUnmount=function(){this.scene.destroy()},Point3D.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,(function(){var response,scene,lineLayer,_a,_b;return __generator(this,(function(_c){switch(_c.label){case 0:return[4,fetch("https://gw.alipayobjects.com/os/rmsportal/ZVfOvhVCzwBkISNsuKCc.json")];case 1:return response=_c.sent(),{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"LineString",coordinates:[[91.58203125,34.95799531086792],[96.767578125,34.379712580462204],[99.228515625,33.7243396617476]]}}]},scene=new _scene.Scene({center:[102.602992,23.107329],id:"map",pitch:0,type:"mapbox",style:"mapbox://styles/mapbox/dark-v9",zoom:13}),_b=(_a=new _layers.LineLayer({})).source,[4,response.json()];case 2:return lineLayer=_b.apply(_a,[_c.sent()]).size(1).shape("line").color("ELEV",["#E8FCFF","#CFF6FF","#A1E9ff","#65CEF7","#3CB1F0","#2894E0","#1772c2","#105CB3","#0D408C","#002466"].reverse()).render(),scene.addLayer(lineLayer),scene.render(),this.scene=scene,[2]}}))}))},Point3D.prototype.render=function(){return React.createElement("div",{id:"map",style:{position:"absolute",top:0,left:0,right:0,bottom:0}})},Point3D}(React.Component);exports.default=_default},1011:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _layers=__webpack_require__(43),_scene=__webpack_require__(44),React=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(17)),_data=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(299));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}var extendStatics,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),_default=function(_super){function Point3D(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Point3D,_super),Point3D.prototype.componentWillUnmount=function(){this.scene.destroy()},Point3D.prototype.componentDidMount=function(){var scene=new _scene.Scene({center:[120.19382669582967,30.258134],id:"map",pitch:0,type:"mapbox",style:"mapbox://styles/mapbox/streets-v9",zoom:1}),pointLayer=new _layers.PointLayer({});pointLayer.source(_data.default).color("name",["#FFF5B8","#FFDC7D","#FFAB5C","#F27049","#D42F31","#730D1C"]).shape("subregion",["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"]).size("scalerank",[2,4,6,8,10]),scene.addLayer(pointLayer),console.log(pointLayer),scene.render()},Point3D.prototype.render=function(){return React.createElement("div",{id:"map",style:{position:"absolute",top:0,left:0,right:0,bottom:0}})},Point3D}(React.Component);exports.default=_default},1012:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _layers=__webpack_require__(43),_scene=__webpack_require__(44),React=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(17)),_data=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(299));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}var extendStatics,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),_default=function(_super){function Point3D(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Point3D,_super),Point3D.prototype.componentWillUnmount=function(){this.scene.destroy()},Point3D.prototype.componentDidMount=function(){var scene=new _scene.Scene({center:[120.19382669582967,30.258134],id:"map",pitch:0,type:"mapbox",style:"mapbox://styles/mapbox/streets-v9",zoom:1}),pointLayer=new _layers.Point3dLayer({});pointLayer.source(_data.default).color("red").shape("cylinder").size([15,10]),scene.addLayer(pointLayer),scene.render()},Point3D.prototype.render=function(){return React.createElement("div",{id:"map",style:{position:"absolute",top:0,left:0,right:0,bottom:0}})},Point3D}(React.Component);exports.default=_default},1013:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _layers=__webpack_require__(43),_scene=__webpack_require__(44),React=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(17)),_data=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(299));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}var extendStatics,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),_default=function(_super){function PointImage(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(PointImage,_super),PointImage.prototype.componentWillUnmount=function(){this.scene.destroy()},PointImage.prototype.componentDidMount=function(){var scene=new _scene.Scene({center:[120.19382669582967,30.258134],id:"map",pitch:0,type:"mapbox",style:"mapbox://styles/mapbox/streets-v9",zoom:1}),pointLayer=new _layers.PointImageLayer({});scene.addImage("00","https://gw.alipayobjects.com/mdn/antv_site/afts/img/A*kzTMQqS2QdUAAAAAAAAAAABkARQnAQ"),pointLayer.source(_data.default).shape("00").size(30),scene.addLayer(pointLayer),scene.render()},PointImage.prototype.render=function(){return React.createElement("div",{id:"map",style:{position:"absolute",top:0,left:0,right:0,bottom:0}})},PointImage}(React.Component);exports.default=_default},1014:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _layers=__webpack_require__(43),_scene=__webpack_require__(44),React=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(17));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}var extendStatics,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};var _default=function(_super){function Polygon3D(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Polygon3D,_super),Polygon3D.prototype.componentWillUnmount=function(){this.gui&&this.gui.destroy(),this.$stats&&document.body.removeChild(this.$stats),this.scene.destroy()},Polygon3D.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,(function(){var response,scene,layer,_a,_b;return __generator(this,(function(_c){switch(_c.label){case 0:return[4,fetch("https://gw.alipayobjects.com/os/basement_prod/d2e0e930-fd44-4fca-8872-c1037b0fee7b.json")];case 1:return response=_c.sent(),scene=new _scene.Scene({id:"map",type:"mapbox",style:"mapbox://styles/mapbox/streets-v9",center:[110.19382669582967,50.258134],pitch:0,zoom:3}),this.scene=scene,layer=new _layers.Polygon3DLayer({}),_b=(_a=layer).source,[4,response.json()];case 2:return _b.apply(_a,[_c.sent()]).size("name",[0,1e4,5e4,3e4,1e5]).color("name",["#2E8AE6","#69D1AB","#DAF291","#FFD591","#FF7A45","#CF1D49"]).shape("fill").style({opacity:1}),scene.addLayer(layer),scene.render(),[2]}}))}))},Polygon3D.prototype.render=function(){return React.createElement("div",{id:"map",style:{position:"absolute",top:0,left:0,right:0,bottom:0}})},Polygon3D}(React.Component);exports.default=_default},1015:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _layers=__webpack_require__(43),_scene=__webpack_require__(44),React=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(17));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}var extendStatics,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),_default=function(_super){function ImageLayerDemo(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(ImageLayerDemo,_super),ImageLayerDemo.prototype.componentWillUnmount=function(){this.scene.destroy()},ImageLayerDemo.prototype.componentDidMount=function(){var scene=new _scene.Scene({center:[121.268,30.3628],id:"map",pitch:0,type:"mapbox",style:"mapbox://styles/mapbox/streets-v9",zoom:10}),layer=new _layers.ImageLayer({});layer.source("https://gw.alipayobjects.com/zos/rmsportal/FnHFeFklTzKDdUESRNDv.jpg",{parser:{type:"image",extent:[121.168,30.2828,121.384,30.4219]}}),scene.addLayer(layer),console.log(layer),scene.render()},ImageLayerDemo.prototype.render=function(){return React.createElement("div",{id:"map",style:{position:"absolute",top:0,left:0,right:0,bottom:0}})},ImageLayerDemo}(React.Component);exports.default=_default},1016:function(module,exports,__webpack_require__){"use strict";(function(module){var _react=__webpack_require__(137),React=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(17)),_AMap=_interopRequireDefault(__webpack_require__(1017)),_Mapbox=_interopRequireDefault(__webpack_require__(1018)),_Maptalks=_interopRequireDefault(__webpack_require__(1026)),_Map=_interopRequireDefault(__webpack_require__(1027));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}var withSourceLoader=__webpack_require__(176).withSource,__STORY__="import { storiesOf } from '@storybook/react';\nimport * as React from 'react';\nimport AMap from './components/AMap';\nimport Mapbox from './components/Mapbox';\nimport Maptalks from './components/Maptalks';\n// import MaptalksBuilding from './components/MaptalksBuilding';\n// import Polygon from './components/Polygon';\n// import Point3D from './components/Point3D';\n// import Line from './components/Line';\n// import ImageLayer from './components/Image';\n// import GridHeatMap from './components/GridHeatmap';\n// import PointImage from './components/pointImage';\n// @ts-ignore\nimport notes from './Map.md';\n// @ts-ignore\nstoriesOf('地图底图', module)\n  .add('高德地图', () => <AMap />, {\n    notes: { markdown: notes },\n  })\n  .add('Mapbox', () => <Mapbox />, {\n    notes: { markdown: notes },\n  })\n  .add('Maptalks', () => <Maptalks />, {\n    notes: { markdown: notes },\n  });\n  // .add('MaptalksBuilding', () => <MaptalksBuilding />, {\n  //   notes: { markdown: notes },\n  // });\n// .add('Polygon', () => <Polygon />);\n// .add('Point3D', () => <Point3D />)\n// .add('Line', () => <Line />)\n// .add('GridHeatMap', () => <GridHeatMap />)\n// .add('Image', () => <ImageLayer />)\n// .add('pointImage', () => <PointImage />);\n",__ADDS_MAP__={"地图底图--maptalks":{startLoc:{col:7,line:23},endLoc:{col:3,line:25},startBody:{col:19,line:23},endBody:{col:37,line:23}},"地图底图--mapbox":{startLoc:{col:7,line:20},endLoc:{col:3,line:22},startBody:{col:17,line:20},endBody:{col:33,line:20}},"地图底图--高德地图":{startLoc:{col:7,line:17},endLoc:{col:3,line:19},startBody:{col:15,line:17},endBody:{col:29,line:17}}};(0,_react.storiesOf)("地图底图",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/Map.stories.tsx",[],{},"/Users/dongdong.feng/Documents/own-fork/L7/stories/MapAdaptor",{})).add("高德地图",(function(){return React.createElement(_AMap.default,null)}),{notes:{markdown:_Map.default}}).add("Mapbox",(function(){return React.createElement(_Mapbox.default,null)}),{notes:{markdown:_Map.default}}).add("Maptalks",(function(){return React.createElement(_Maptalks.default,null)}),{notes:{markdown:_Map.default}})}).call(this,__webpack_require__(68)(module))},1017:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _layers=__webpack_require__(43),_scene=__webpack_require__(44),React=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(17));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}var extendStatics,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},_default=function(_super){function AMap(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(AMap,_super),AMap.prototype.componentWillUnmount=function(){this.scene.destroy()},AMap.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,(function(){var response,scene,layer,_a,_b;return __generator(this,(function(_c){switch(_c.label){case 0:return[4,fetch("https://gw.alipayobjects.com/os/basement_prod/d2e0e930-fd44-4fca-8872-c1037b0fee7b.json")];case 1:return response=_c.sent(),scene=new _scene.Scene({center:[110.19382669582967,50.258134],id:"map",pitch:0,style:"dark",type:"amap",zoom:3}),layer=new _layers.PolygonLayer({}),_b=(_a=layer).source,[4,response.json()];case 2:return _b.apply(_a,[_c.sent()]).size("name",[0,1e4,5e4,3e4,1e5]).color("name",["#2E8AE6","#69D1AB","#DAF291","#FFD591","#FF7A45","#CF1D49"]).shape("fill").style({opacity:.8}),scene.addLayer(layer),scene.render(),this.scene=scene,[2]}}))}))},AMap.prototype.render=function(){return React.createElement("div",{id:"map",style:{position:"absolute",top:0,left:0,right:0,bottom:0}})},AMap}(React.Component);exports.default=_default},1018:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,__webpack_require__(423);var _component=__webpack_require__(424),_layers=__webpack_require__(43),_scene=__webpack_require__(44),React=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(17));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}var extendStatics,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},_default=function(_super){function Mapbox(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Mapbox,_super),Mapbox.prototype.componentWillUnmount=function(){this.scene.destroy()},Mapbox.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,(function(){var response,scene,layer,_a,_b;return __generator(this,(function(_c){switch(_c.label){case 0:return[4,fetch("https://gw.alipayobjects.com/os/basement_prod/d2e0e930-fd44-4fca-8872-c1037b0fee7b.json")];case 1:return response=_c.sent(),scene=new _scene.Scene({id:"map",type:"mapbox",style:"mapbox://styles/mapbox/streets-v9",center:[110.19382669582967,30.258134],pitch:0,zoom:3}),this.scene=scene,layer=new _layers.PolygonLayer({}),_b=(_a=layer).source,[4,response.json()];case 2:return _b.apply(_a,[_c.sent()]).size("name",[0,1e4,5e4,3e4,1e5]).color("name",(function(){return"yellow"})).shape("fill").style({opacity:.8}),scene.addLayer(layer),scene.render(),scene.on("loaded",(function(){var zoomControl=new _component.Zoom({position:"bottomright"}),scaleControl=new _component.Scale;new _component.Popup({offsets:[0,20]}).setLnglat({lng:120.19382669582967,lat:30.258134}).setText("hello").addTo(scene);(new _component.Marker).setLnglat({lng:120.19382669582967,lat:30.258134}).addTo(scene),scene.addControl(zoomControl),scene.addControl(scaleControl),console.log(layer)})),[2]}}))}))},Mapbox.prototype.render=function(){return React.createElement("div",{id:"map",style:{position:"absolute",top:0,left:0,right:0,bottom:0}})},Mapbox}(React.Component);exports.default=_default},1019:function(module,exports,__webpack_require__){exports=module.exports=__webpack_require__(387)(!1);var ___CSS_LOADER_URL___0___=__webpack_require__(1020)(__webpack_require__(1021));exports.push([module.i,'.l7-marker {\n\tposition: absolute !important;\n\ttop: 0;\n\tleft: 0;\n\tz-index: 5;\n}\n.l7-popup-anchor-top,\n.l7-popup-anchor-top-left,\n.l7-popup-anchor-top-right {\n    -webkit-flex-direction: column;\n    flex-direction: column;\n}\n\n.l7-popup-anchor-bottom,\n.l7-popup-anchor-bottom-left,\n.l7-popup-anchor-bottom-right {\n    -webkit-flex-direction: column-reverse;\n    flex-direction: column-reverse;\n}\n\n.l7-popup-anchor-left {\n    -webkit-flex-direction: row;\n    flex-direction: row;\n}\n\n.l7-popup-anchor-right {\n    -webkit-flex-direction: row-reverse;\n    flex-direction: row-reverse;\n}\n.l7-popup {\n  position: absolute;\n  top: 0;\n  left: 0;\n  display: -webkit-flex;\n  display: flex;\n  will-change: transform;\n  pointer-events: none;\n  z-index: 5;\n}\n.l7-popup-tip {\n  width: 0;\n  height: 0;\n  border: 10px solid transparent;\n  z-index: 1;\n}\n.l7-popup-anchor-top .l7-popup-tip {\n\t-webkit-align-self: center;\n\talign-self: center;\n\tborder-top: none;\n\tborder-bottom-color: #fff;\n}\n\n.l7-popup-anchor-top-left .l7-popup-tip {\n\t-webkit-align-self: flex-start;\n\talign-self: flex-start;\n\tborder-top: none;\n\tborder-left: none;\n\tborder-bottom-color: #fff;\n}\n\n.l7-popup-anchor-top-right .l7-popup-tip {\n\t-webkit-align-self: flex-end;\n\talign-self: flex-end;\n\tborder-top: none;\n\tborder-right: none;\n\tborder-bottom-color: #fff;\n}\n\n.l7-popup-anchor-bottom .l7-popup-tip {\n\t-webkit-align-self: center;\n\talign-self: center;\n\tborder-bottom: none;\n\tborder-top-color: #fff;\n}\n\n.l7-popup-anchor-bottom-left .l7-popup-tip {\n\t-webkit-align-self: flex-start;\n\talign-self: flex-start;\n\tborder-bottom: none;\n\tborder-left: none;\n\tborder-top-color: #fff;\n}\n\n.l7-popup-anchor-bottom-right .l7-popup-tip {\n\t-webkit-align-self: flex-end;\n\talign-self: flex-end;\n\tborder-bottom: none;\n\tborder-right: none;\n\tborder-top-color: #fff;\n}\n\n.l7-popup-anchor-left .l7-popup-tip {\n\t-webkit-align-self: center;\n\talign-self: center;\n\tborder-left: none;\n\tborder-right-color: #fff;\n}\n\n.l7-popup-anchor-right .l7-popup-tip {\n\t-webkit-align-self: center;\n\talign-self: center;\n\tborder-right: none;\n\tborder-left-color: #fff;\n}\n\n.l7-popup-close-button {\n\tposition: absolute;\n\tright: 0;\n\ttop: 0;\n\tborder: 0;\n\tpadding: 0;\n\tfont-size: 25px;\n\tline-height: 20px;\n\tborder-radius: 0 3px 0 0;\n\tcursor: pointer;\n\tbackground-color: transparent;\n}\n\n.l7-popup-close-button:hover {\n\tbackground-color: rgba(0, 0, 0, 0.05);\n}\n\n.l7-popup-content {\n\tposition: relative;\n\tbackground: #fff;\n\tborder-radius: 3px;\n\tbox-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n\tpadding: 10px 10px 15px;\n\tpointer-events: auto;\n}\n\n.l7-popup-anchor-top-left .l7-popup-content {\n\tborder-top-left-radius: 0;\n}\n\n.l7-popup-anchor-top-right .l7-popup-content {\n\tborder-top-right-radius: 0;\n}\n\n.l7-popup-anchor-bottom-left .l7-popup-content {\n\tborder-bottom-left-radius: 0;\n}\n\n.l7-popup-anchor-bottom-right .l7-popup-content {\n\tborder-bottom-right-radius: 0;\n}\n\n.l7-popup-track-pointer {\n\tdisplay: none;\n}\n\n.l7-popup-track-pointer * {\n\tpointer-events: none;\n\tuser-select: none;\n}\n\n.l7-map:hover .l7-popup-track-pointer {\n\tdisplay: flex;\n}\n\n.l7-map:active .l7-popup-track-pointer {\n\tdisplay: none;\n}\n\n.l7-popup-close-button {\n  position: absolute;\n  right: 0;\n  top: 0;\n  border: 0;\n  border-radius: 0 3px 0 0;\n  cursor: pointer;\n  background-color: transparent;\n}\n\n.l7-popup-close-button:hover {\n  background-color: rgba(0, 0, 0, 0.05);\n}\n\n.l7-popup-content {\n  position: relative;\n  background: #fff;\n  border-radius: 3px;\n  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);\n  padding: 10px 10px 15px;\n  pointer-events: auto;\n}\n\n/* general toolbar styles */\n\n.l7-bar {\n\tbox-shadow: 0 1px 5px rgba(0,0,0,0.65);\n\tborder-radius: 4px;\n\t}\n.l7-bar a,\n.l7-bar a:hover {\n\tbackground-color: #fff;\n\twidth: 36px;\n\theight: 36px;\n  line-height: 30px;\n  font-size: 30px;\n\tdisplay: block;\n\ttext-align: center;\n\ttext-decoration: none;\n\tcolor: #8E9DAB;\n\t}\n.l7-bar a,\n.l7-control-layers-toggle {\n\tbackground-position: 50% 50%;\n\tbackground-repeat: no-repeat;\n\tdisplay: block;\n\t}\n.l7-bar a:hover {\n\tbackground-color: #f4f4f4;\n\t}\n.l7-bar a:first-child {\n\tborder-top-left-radius: 4px;\n\tborder-top-right-radius: 4px;\n\t}\n.l7-bar a:last-child {\n\tborder-bottom-left-radius: 4px;\n\tborder-bottom-right-radius: 4px;\n\tborder-bottom: none;\n\t}\n.l7-bar a.l7-disabled {\n\tcursor: default;\n\tbackground-color: #f4f4f4;\n\tcolor: #bbb;\n\t}\n\n\n/* control positioning */\n\n.l7-control-container {\n\tfont: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;\n}\n.l7-control-hide {\n\tdisplay: none;\n}\n.l7-control {\n\tposition: relative;\n\tz-index: 800;\n\tpointer-events: visiblePainted; /* IE 9-10 doesn\'t have auto */\n\tpointer-events: auto;\n\t}\n.l7-top,\n.l7-bottom {\n\tposition: absolute;\n\tz-index: 1000;\n\tpointer-events: none;\n\t}\n.l7-top {\n\ttop: 0;\n\t}\n.l7-right {\n\tright: 0;\n\t}\n.l7-bottom {\n\tbottom: 0;\n\t}\n.l7-left {\n\tleft: 0;\n\t}\n.l7-control {\n\tfloat: left;\n\tclear: both;\n\t}\n.l7-right .l7-control {\n\tfloat: right;\n\t}\n.l7-top .l7-control {\n\tmargin-top: 10px;\n\t}\n.l7-bottom .l7-control {\n\tmargin-bottom: 10px;\n\t}\n.l7-left .l7-control {\n\tmargin-left: 10px;\n\t}\n.l7-right .l7-control {\n\tmargin-right: 10px;\n  }\n\n  /* attribution and scale controls */\n\n.l7-control-container .l7-control-attribution {\n\tbackground: #fff;\n\tbackground: rgba(255, 255, 255, 0.7);\n\tmargin: 0;\n\t}\n.l7-control-attribution,\n.l7-control-scale-line {\n\tpadding: 0 5px;\n  color: #333;\n\t}\n.l7-control-attribution a {\n\ttext-decoration: none;\n\t}\n.l7-control-attribution a:hover {\n\ttext-decoration: underline;\n\t}\n.l7-container .l7-control-attribution,\n.l7-container .l7-control-scale {\n  font-size: 11px;\n  padding: 5px 5px 2px 5px;\n  background: rgba(255, 255, 255, 0.7);\n\t}\n.l7-left .l7-control-scale {\n\tmargin-left: 5px;\n\t}\n.l7-bottom .l7-control-scale {\n\tmargin-bottom: 5px;\n\t}\n.l7-control-scale-line {\n\tborder: 2px solid #8E9DAB;\n  border-top: none;\n  color: #8e9dab;\n\tline-height: 1.1;\n\tpadding: 2px 5px 1px;\n\tfont-size: 11px;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\t-moz-box-sizing: border-box;\n\t     box-sizing: border-box;\n\n\tbackground: #fff;\n\tbackground: rgba(255, 255, 255, 0.8);\n\t}\n.l7-control-scale-line:not(:first-child) {\n\tborder-top: 2px solid #777;\n\tborder-bottom: none;\n\tmargin-top: -2px;\n\t}\n.l7-control-scale-line:not(:first-child):not(:last-child) {\n\tborder-bottom: 2px solid #777;\n\t}\n\n.l7-touch .l7-control-attribution,\n.l7-touch .l7-control-layers,\n.l7-touch .l7-bar {\n\tbox-shadow: none;\n\t}\n.l7-touch .l7-control-layers,\n.l7-touch .l7-bar {\n\tborder: 2px solid rgba(0,0,0,0.2);\n\tbackground-clip: padding-box;\n\t}\n\n\n\t/* layers control */\n\n.l7-control-layers {\n\tbox-shadow: 0 1px 5px rgba(0,0,0,0.4);\n\tbackground: #fff;\n\tborder-radius: 5px;\n\t}\n.l7-control-layers-toggle {\n\tbackground-image: url('+___CSS_LOADER_URL___0___+");\n\twidth: 36px;\n\theight: 36px;\n\t}\n.l7-retina .l7-control-layers-toggle {\n\tbackground-image: url("+___CSS_LOADER_URL___0___+");\n\tbackground-size: 26px 26px;\n\t}\n.l7-touch .l7-control-layers-toggle {\n\twidth: 44px;\n\theight: 44px;\n\t}\n.l7-control-layers .l7-control-layers-list,\n.l7-control-layers-expanded .l7-control-layers-toggle {\n\tdisplay: none;\n\t}\n.l7-control-layers-expanded .l7-control-layers-list {\n\tdisplay: block;\n\tposition: relative;\n\t}\n.l7-control-layers-expanded {\n\tpadding: 6px 10px 6px 6px;\n\tcolor: #333;\n\tbackground: #fff;\n\t}\n.l7-control-layers-scrollbar {\n\toverflow-y: scroll;\n\toverflow-x: hidden;\n\tpadding-right: 5px;\n\t}\n.l7-control-layers-selector {\n\tmargin-top: 2px;\n\tposition: relative;\n\ttop: 1px;\n\t}\n.l7-control-layers label {\n\tdisplay: block;\n\t}\n.l7-control-layers-separator {\n\theight: 0;\n\tborder-top: 1px solid #ddd;\n\tmargin: 5px -10px 5px -6px;\n  }\n\n",""])},1021:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/layers.2d493379.svg"},1022:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(4),__webpack_require__(15),__webpack_require__(0),__webpack_require__(24),__webpack_require__(14),__webpack_require__(12),__webpack_require__(2),__webpack_require__(5),__webpack_require__(80),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _utils=__webpack_require__(60),_BaseControl=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}(__webpack_require__(300));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}var Scale=function(_BaseControl$default){function Scale(cfg){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Scale),(_this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,_getPrototypeOf(Scale).call(this,cfg))).mScale=void 0,_this.iScale=void 0,(0,_utils.bindAll)(["update"],_assertThisInitialized(_this)),_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Scale,_BaseControl$default),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Scale,[{key:"getDefault",value:function getDefault(){return{position:_BaseControl.PositionType.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1}}},{key:"onAdd",value:function onAdd(){var container=_utils.DOM.create("div","l7-control-scale");this.addScales("l7-control-scale-line",container);var updateWhenIdle=this.controlOption.updateWhenIdle;return this.mapsService.on(updateWhenIdle?"moveend":"mapmove",this.update),this.update(),container}},{key:"onRemove",value:function onRemove(){var updateWhenIdle=this.controlOption.updateWhenIdle;this.mapsService.off(updateWhenIdle?"moveend":"mapmove",this.update)}},{key:"update",value:function update(){var mapsService=this.mapsService,maxWidth=this.controlOption.maxWidth,y=mapsService.getSize()[1]/2,p1=mapsService.containerToLngLat([0,y]),p2=mapsService.containerToLngLat([maxWidth,y]),maxMeters=(0,_utils.lnglatDistance)([p1.lng,p1.lat],[p2.lng,p2.lat]);this.updateScales(maxMeters)}},{key:"updateScales",value:function updateScales(maxMeters){var _this$controlOption=this.controlOption,metric=_this$controlOption.metric,imperial=_this$controlOption.imperial;metric&&maxMeters&&this.updateMetric(maxMeters),imperial&&maxMeters&&this.updateImperial(maxMeters)}},{key:"updateMetric",value:function updateMetric(maxMeters){var meters=this.getRoundNum(maxMeters),label=1e3>meters?meters+" m":meters/1e3+" km";this.updateScale(this.mScale,label,meters/maxMeters)}},{key:"updateImperial",value:function updateImperial(maxMeters){var maxMiles,miles,feet,maxFeet=3.2808399*maxMeters;5280<maxFeet?(maxMiles=maxFeet/5280,miles=this.getRoundNum(maxMiles),this.updateScale(this.iScale,miles+" mi",miles/maxMiles)):(feet=this.getRoundNum(maxFeet),this.updateScale(this.iScale,feet+" ft",feet/maxFeet))}},{key:"updateScale",value:function updateScale(scale,text,ratio){var maxWidth=this.controlOption.maxWidth;scale.style.width=Math.round(maxWidth*ratio)+"px",scale.innerHTML=text}},{key:"getRoundNum",value:function getRoundNum(num){var pow10=Math.pow(10,(Math.floor(num)+"").length-1),d=num/pow10;return pow10*(d=10<=d?10:5<=d?5:3<=d?3:2<=d?2:1)}},{key:"addScales",value:function addScales(className,container){var _this$controlOption2=this.controlOption,metric=_this$controlOption2.metric,imperial=_this$controlOption2.imperial;metric&&(this.mScale=_utils.DOM.create("div",className,container)),imperial&&(this.iScale=_utils.DOM.create("div",className,container))}}]),Scale}(_BaseControl.default);exports.default=Scale},1023:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(4),__webpack_require__(15),__webpack_require__(0),__webpack_require__(24),__webpack_require__(14),__webpack_require__(12),__webpack_require__(2),__webpack_require__(5),__webpack_require__(80),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _utils=__webpack_require__(60),_BaseControl=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}(__webpack_require__(300));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}var Zoom=function(_BaseControl$default){function Zoom(cfg){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Zoom),(_this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,_getPrototypeOf(Zoom).call(this,cfg))).disabled=void 0,_this.zoomInButton=void 0,_this.zoomOutButton=void 0,(0,_utils.bindAll)(["updateDisabled","zoomIn","zoomOut"],_assertThisInitialized(_this)),_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Zoom,_BaseControl$default),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Zoom,[{key:"getDefault",value:function getDefault(){return{position:_BaseControl.PositionType.TOPLEFT,zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"}}},{key:"onAdd",value:function onAdd(){var container=_utils.DOM.create("div","l7-control-zoom l7-bar");return this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,"l7-control-zoom-in",container,this.zoomIn),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,"l7-control-zoom-out",container,this.zoomOut),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),this.updateDisabled(),container}},{key:"onRemove",value:function onRemove(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function disable(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function enable(){return this.disabled=!1,this.updateDisabled(),this}},{key:"zoomIn",value:function zoomIn(){!this.disabled&&this.mapsService.getZoom()<this.mapsService.getMaxZoom()&&this.mapsService.zoomIn()}},{key:"zoomOut",value:function zoomOut(){!this.disabled&&this.mapsService.getZoom()>this.mapsService.getMinZoom()&&this.mapsService.zoomOut()}},{key:"createButton",value:function createButton(html,tile,className,container,fn){var link=_utils.DOM.create("a",className,container);return link.innerHTML=html,link.href="#",link.addEventListener("click",fn),link}},{key:"updateDisabled",value:function updateDisabled(){var mapsService=this.mapsService;_utils.DOM.removeClass(this.zoomInButton,"l7-disabled"),_utils.DOM.removeClass(this.zoomOutButton,"l7-disabled"),(this.disabled||mapsService.getZoom()<=mapsService.getMinZoom())&&_utils.DOM.addClass(this.zoomOutButton,"l7-disabled"),(this.disabled||mapsService.getZoom()>=mapsService.getMaxZoom())&&_utils.DOM.addClass(this.zoomInButton,"l7-disabled")}}]),Zoom}(_BaseControl.default);exports.default=Zoom},1024:function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(3),__webpack_require__(26),__webpack_require__(9),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(11),__webpack_require__(425),__webpack_require__(10),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _utils=__webpack_require__(60),_anchor=__webpack_require__(426),Marker=function(){function Marker(option){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,Marker),this.markerOption=void 0,this.defaultMarker=void 0,this.popup=void 0,this.mapservice=void 0,this.lngLat=void 0,this.scene=void 0,this.markerOption=function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}({},this.getDefault(),{},option),(0,_utils.bindAll)(["update","onMove","onUp","addDragHandler","onMapClick"],this),this.init()}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Marker,[{key:"getDefault",value:function getDefault(){return{element:void 0,anchor:_anchor.anchorType.BOTTOM,offset:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function addTo(scene){this.scene=scene;var mapService=scene.getMapService(),_this$markerOption=this.markerOption,element=_this$markerOption.element;_this$markerOption.draggable;return this.remove(),this.mapservice=mapService,mapService.getMarkerContainer().appendChild(element),mapService.on("camerachange",this.update),this.update(),this}},{key:"remove",value:function remove(){this.mapservice&&(this.mapservice.off("click",this.onMapClick),this.mapservice.off("move",this.update),this.mapservice.off("moveend",this.update),this.mapservice.off("mousedown",this.addDragHandler),this.mapservice.off("touchstart",this.addDragHandler),this.mapservice.off("mouseup",this.onUp),this.mapservice.off("touchend",this.onUp),delete this.mapservice);var element=this.markerOption.element;return element&&_utils.DOM.remove(element),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function setLnglat(lngLat){return this.lngLat=lngLat,this.popup&&this.popup.setLnglat(this.lngLat),this}},{key:"getLnglat",value:function getLnglat(){return this.lngLat}},{key:"getElement",value:function getElement(){return this.markerOption.element}},{key:"togglePopup",value:function togglePopup(){var popup=this.popup;return popup?(popup.isOpen()?popup.remove():popup.addTo(this.scene),this):this}},{key:"getPopup",value:function getPopup(){return this.popup}},{key:"getOffset",value:function getOffset(){return this.markerOption.offset}},{key:"setDraggable",value:function setDraggable(){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function isDraggable(){return this.markerOption.draggable}},{key:"update",value:function update(){if(this.mapservice){var _this$markerOption2=this.markerOption,element=_this$markerOption2.element,anchor=_this$markerOption2.anchor;this.updatePosition(),_utils.DOM.setTransform(element,"".concat(_anchor.anchorTranslate[anchor]))}}},{key:"onMapClick",value:function onMapClick(){var element=this.markerOption.element;this.popup&&element&&this.togglePopup()}},{key:"updatePosition",value:function updatePosition(){if(this.mapservice){var element=this.markerOption.element,_this$lngLat=this.lngLat,lng=_this$lngLat.lng,lat=_this$lngLat.lat,pos=this.mapservice.lngLatToContainer([lng,lat]);element&&(element.style.left=pos.x+"px",element.style.top=pos.y+"px")}}},{key:"init",value:function init(){var _this=this,element=this.markerOption.element,_this$markerOption3=this.markerOption,color=_this$markerOption3.color,anchor=_this$markerOption3.anchor;if(!element){this.defaultMarker=!0,element=_utils.DOM.create("div"),this.markerOption.element=element;var svg=document.createElementNS("http://www.w3.org/2000/svg","svg");svg.setAttributeNS(null,"display","block"),svg.setAttributeNS(null,"height","48px"),svg.setAttributeNS(null,"width","48px"),svg.setAttributeNS(null,"viewBox","0 0 1024 1024");var path=document.createElementNS("http://www.w3.org/2000/svg","path");path.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),path.setAttributeNS(null,"fill",color),svg.appendChild(path),element.appendChild(svg)}_utils.DOM.addClass(element,"l7-marker"),element.addEventListener("click",(function(e){_this.onMapClick(e)})),(0,_anchor.applyAnchorClass)(element,anchor,"marker")}},{key:"addDragHandler",value:function addDragHandler(){throw new Error("Method not implemented.")}},{key:"onUp",value:function onUp(){throw new Error("Method not implemented.")}}]),Marker}();exports.default=Marker},1025:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(26),__webpack_require__(9),__webpack_require__(4),__webpack_require__(15),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(14),__webpack_require__(11),__webpack_require__(12),__webpack_require__(2),__webpack_require__(70),__webpack_require__(5),__webpack_require__(122),__webpack_require__(425),__webpack_require__(10),__webpack_require__(6),__webpack_require__(202),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _utils=__webpack_require__(60),_eventemitter=__webpack_require__(126),_anchor=__webpack_require__(426),Popup=function(_eventemitter$EventEm){function Popup(cfg){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Popup),(_this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,_getPrototypeOf(Popup).call(this))).popupOption=void 0,_this.mapservice=void 0,_this.lngLat=void 0,_this.content=void 0,_this.closeButton=void 0,_this.timeoutInstance=void 0,_this.container=void 0,_this.tip=void 0,_this.popupOption=function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}({},_this.getdefault(),{},cfg),(0,_utils.bindAll)(["update","onClickClose","remove"],_assertThisInitialized(_this)),_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Popup,_eventemitter$EventEm),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Popup,[{key:"addTo",value:function addTo(scene){var _this2=this,mapService=scene.getMapService();return this.mapservice=mapService,this.mapservice.on("camerachange",this.update),this.update(),this.popupOption.closeOnClick&&(this.timeoutInstance=setTimeout((function(){_this2.mapservice.on("click",_this2.onClickClose)}),30)),this}},{key:"setHTML",value:function setHTML(html){var child,frag=window.document.createDocumentFragment(),temp=window.document.createElement("body");for(temp.innerHTML=html;child=temp.firstChild;)frag.appendChild(child);return this.setDOMContent(frag)}},{key:"setLnglat",value:function setLnglat(lngLat){return this.lngLat=lngLat,this.mapservice&&this.mapservice.on("camerachange",this.update),this.update(),this}},{key:"getLnglat",value:function getLnglat(){return this.lngLat}},{key:"setText",value:function setText(text){return this.setDOMContent(window.document.createTextNode(text))}},{key:"setMaxWidth",value:function setMaxWidth(maxWidth){return this.popupOption.maxWidth=maxWidth,this.update(),this}},{key:"setDOMContent",value:function setDOMContent(htmlNode){return this.createContent(),this.content.appendChild(htmlNode),this.update(),this}},{key:"remove",value:function remove(){return this.content&&this.removeDom(this.content),this.container&&(this.removeDom(this.container),delete this.container),this.mapservice&&(this.mapservice.off("camerachange",this.update),this.mapservice.off("click",this.onClickClose),delete this.mapservice),clearTimeout(this.timeoutInstance),this.emit("close"),this}},{key:"isOpen",value:function isOpen(){return!!this.mapservice}},{key:"createContent",value:function createContent(){this.content&&_utils.DOM.remove(this.content),this.content=_utils.DOM.create("div","l7-popup-content",this.container),this.popupOption.closeButton&&(this.closeButton=_utils.DOM.create("button","l7-popup-close-button",this.content),this.closeButton.setAttribute("aria-label","Close popup"),this.closeButton.innerHTML="&#215;",this.closeButton.addEventListener("click",this.onClickClose))}},{key:"creatDom",value:function creatDom(tagName,className,container){var el=window.document.createElement(tagName);return void 0!==className&&(el.className=className),container&&container.appendChild(el),el}},{key:"removeDom",value:function removeDom(node){node.parentNode&&node.parentNode.removeChild(node)}},{key:"getdefault",value:function getdefault(){return{closeButton:!0,closeOnClick:!0,maxWidth:"240px",offsets:[0,0],anchor:_anchor.anchorType.BOTTOM,className:""}}},{key:"onClickClose",value:function onClickClose(){this.remove()}},{key:"update",value:function update(){var _this3=this,hasPosition=this.lngLat,_this$popupOption=this.popupOption,className=_this$popupOption.className,maxWidth=_this$popupOption.maxWidth,anchor=_this$popupOption.anchor;if(this.mapservice&&hasPosition&&this.content){var markerContainer=this.mapservice.getMarkerContainer();!this.container&&markerContainer&&(this.container=this.creatDom("div","l7-popup",markerContainer.parentNode),this.tip=this.creatDom("div","l7-popup-tip",this.container),this.container.appendChild(this.content),className&&className.split(" ").forEach((function(name){return _this3.container.classList.add(name)})),this.container.addEventListener("mousedown",(function(e){e.stopPropagation()}))),maxWidth&&this.container.style.maxWidth!==maxWidth&&(this.container.style.maxWidth=maxWidth),this.updatePosition(),_utils.DOM.setTransform(this.container,"".concat(_anchor.anchorTranslate[anchor])),(0,_anchor.applyAnchorClass)(this.container,anchor,"popup")}}},{key:"updatePosition",value:function updatePosition(){if(this.mapservice){var _this$lngLat=this.lngLat,lng=_this$lngLat.lng,lat=_this$lngLat.lat,offsets=this.popupOption.offsets,pos=this.mapservice.lngLatToContainer([lng,lat]);this.container.style.left=pos.x+offsets[0]+"px",this.container.style.top=pos.y-offsets[1]+"px"}}}]),Popup}(_eventemitter.EventEmitter);exports.default=Popup},1026:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,__webpack_require__(423);var maptalks=_interopRequireWildcard(__webpack_require__(422)),_component=__webpack_require__(424),_layers=__webpack_require__(43),_scene=__webpack_require__(44),React=_interopRequireWildcard(__webpack_require__(17));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var extendStatics,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},_default=function(_super){function Maptalks(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Maptalks,_super),Maptalks.prototype.componentWillUnmount=function(){this.scene.destroy()},Maptalks.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,(function(){var response,scene,layer,_a,_b;return __generator(this,(function(_c){switch(_c.label){case 0:return[4,fetch("https://gw.alipayobjects.com/os/basement_prod/d2e0e930-fd44-4fca-8872-c1037b0fee7b.json")];case 1:return response=_c.sent(),scene=new _scene.Scene({id:"map",type:"maptalks",center:[110.19382669582967,30.258134],pitch:0,zoom:3,baseLayer:new maptalks.TileLayer("base",{urlTemplate:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png",subdomains:["a","b","c","d"],attribution:'&copy; <a href="http://osm.org">OpenStreetMap</a> contributors, &copy; <a href="https://carto.com/">CARTO</a>'})}),this.scene=scene,layer=new _layers.PolygonLayer({}),_b=(_a=layer).source,[4,response.json()];case 2:return _b.apply(_a,[_c.sent()]).size("name",[0,1e4,5e4,3e4,1e5]).color("name",(function(){return"yellow"})).shape("fill").style({opacity:.8}),scene.addLayer(layer),scene.render(),scene.on("loaded",(function(){var zoomControl=new _component.Zoom({position:"bottomright"}),scaleControl=new _component.Scale;new _component.Popup({offsets:[0,20]}).setLnglat({lng:120.19382669582967,lat:30.258134}).setText("hello").addTo(scene);(new _component.Marker).setLnglat({lng:120.19382669582967,lat:30.258134}).addTo(scene),scene.addControl(zoomControl),scene.addControl(scaleControl),console.log(layer)})),[2]}}))}))},Maptalks.prototype.render=function(){return React.createElement("div",{id:"map",style:{position:"absolute",top:0,left:0,right:0,bottom:0}})},Maptalks}(React.Component);exports.default=_default},1027:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_exports__.default=""},1028:function(module,exports,__webpack_require__){"use strict";(function(module){var _react=__webpack_require__(137),React=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(17)),_Blur=_interopRequireDefault(__webpack_require__(1029)),_ColorHalftone=_interopRequireDefault(__webpack_require__(1030)),_HexagonalPixelate=_interopRequireDefault(__webpack_require__(1031)),_Ink=_interopRequireDefault(__webpack_require__(1032)),_Noise=_interopRequireDefault(__webpack_require__(1033)),_Sepia=_interopRequireDefault(__webpack_require__(1034)),_TAA=_interopRequireDefault(__webpack_require__(1035));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}var withSourceLoader=__webpack_require__(176).withSource,__STORY__="import { storiesOf } from '@storybook/react';\nimport * as React from 'react';\nimport Blur from './components/Blur';\nimport ColorHalftone from './components/ColorHalftone';\nimport HexagonalPixelate from './components/HexagonalPixelate';\nimport Ink from './components/Ink';\nimport Noise from './components/Noise';\nimport Sepia from './components/Sepia';\nimport TAA from './components/TAA';\n// @ts-ignore\nstoriesOf('MultiPassRenderer', module)\n  .add('ColorHalftone', () => <ColorHalftone />)\n  .add('HexagonalPixelate', () => <HexagonalPixelate />)\n  .add('Ink', () => <Ink />)\n  .add('Blur', () => <Blur />)\n  .add('Noise', () => <Noise />)\n  .add('Sepia', () => <Sepia />)\n  .add('TAA(Temporal Anti-Aliasing)', () => <TAA />);\n",__ADDS_MAP__={"multipassrenderer--taa-temporal-anti-aliasing":{startLoc:{col:7,line:18},endLoc:{col:51,line:18},startBody:{col:38,line:18},endBody:{col:51,line:18}},"multipassrenderer--sepia":{startLoc:{col:7,line:17},endLoc:{col:31,line:17},startBody:{col:16,line:17},endBody:{col:31,line:17}},"multipassrenderer--noise":{startLoc:{col:7,line:16},endLoc:{col:31,line:16},startBody:{col:16,line:16},endBody:{col:31,line:16}},"multipassrenderer--blur":{startLoc:{col:7,line:15},endLoc:{col:29,line:15},startBody:{col:15,line:15},endBody:{col:29,line:15}},"multipassrenderer--ink":{startLoc:{col:7,line:14},endLoc:{col:27,line:14},startBody:{col:14,line:14},endBody:{col:27,line:14}},"multipassrenderer--hexagonalpixelate":{startLoc:{col:7,line:13},endLoc:{col:55,line:13},startBody:{col:28,line:13},endBody:{col:55,line:13}},"multipassrenderer--colorhalftone":{startLoc:{col:7,line:12},endLoc:{col:47,line:12},startBody:{col:24,line:12},endBody:{col:47,line:12}}};(0,_react.storiesOf)("MultiPassRenderer",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/MultiPassRenderer.stories.tsx",[],{},"/Users/dongdong.feng/Documents/own-fork/L7/stories/MultiPassRenderer",{})).add("ColorHalftone",(function(){return React.createElement(_ColorHalftone.default,null)})).add("HexagonalPixelate",(function(){return React.createElement(_HexagonalPixelate.default,null)})).add("Ink",(function(){return React.createElement(_Ink.default,null)})).add("Blur",(function(){return React.createElement(_Blur.default,null)})).add("Noise",(function(){return React.createElement(_Noise.default,null)})).add("Sepia",(function(){return React.createElement(_Sepia.default,null)})).add("TAA(Temporal Anti-Aliasing)",(function(){return React.createElement(_TAA.default,null)}))}).call(this,__webpack_require__(68)(module))},1029:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _layers=__webpack_require__(43),_scene=__webpack_require__(44),dat=_interopRequireWildcard(__webpack_require__(94)),React=_interopRequireWildcard(__webpack_require__(17));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var extendStatics,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},_default=function(_super){function Mapbox(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Mapbox,_super),Mapbox.prototype.componentWillUnmount=function(){this.gui&&this.gui.destroy(),this.$stats&&document.body.removeChild(this.$stats),this.scene.destroy()},Mapbox.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,(function(){var data,scene,layer,gui,styleOptions,pointFolder;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,fetch("https://gw.alipayobjects.com/os/basement_prod/d2e0e930-fd44-4fca-8872-c1037b0fee7b.json")];case 1:return[4,_a.sent().json()];case 2:return data=_a.sent(),scene=new _scene.Scene({id:"map",type:"mapbox",style:"mapbox://styles/mapbox/streets-v9",center:[110.19382669582967,50.258134],pitch:0,zoom:3}),(layer=new _layers.PolygonLayer({enablePicking:!0,enableHighlight:!0,passes:[["blurH",{blurRadius:8}],["blurV",{blurRadius:8}]]})).source(data).size("name",[0,1e4,5e4,3e4,1e5]).color("name",["#2E8AE6","#69D1AB","#DAF291","#FFD591","#FF7A45","#CF1D49"]).shape("fill").style({opacity:.8}),scene.addLayer(layer),scene.render(),this.scene=scene,gui=new dat.GUI,this.gui=gui,styleOptions={blurVRadius:8,blurHRadius:8},(pointFolder=gui.addFolder("Blur 配置")).add(styleOptions,"blurVRadius",0,100).onChange((function(blurRadius){layer.style({passes:[["blurV",{blurRadius:blurRadius}]]}),scene.render()})),pointFolder.add(styleOptions,"blurHRadius",0,100).onChange((function(blurRadius){layer.style({passes:[["blurH",{blurRadius:blurRadius}]]}),scene.render()})),pointFolder.open(),[2]}}))}))},Mapbox.prototype.render=function(){return React.createElement("div",{id:"map",style:{position:"absolute",top:0,left:0,right:0,bottom:0}})},Mapbox}(React.Component);exports.default=_default},1030:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _layers=__webpack_require__(43),_scene=__webpack_require__(44),dat=_interopRequireWildcard(__webpack_require__(94)),React=_interopRequireWildcard(__webpack_require__(17));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var extendStatics,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},_default=function(_super){function ColorHalftone(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(ColorHalftone,_super),ColorHalftone.prototype.componentWillUnmount=function(){this.gui&&this.gui.destroy(),this.$stats&&document.body.removeChild(this.$stats),this.scene.destroy()},ColorHalftone.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,(function(){var data,scene,layer,gui,styleOptions,pointFolder;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,fetch("https://gw.alipayobjects.com/os/basement_prod/d2e0e930-fd44-4fca-8872-c1037b0fee7b.json")];case 1:return[4,_a.sent().json()];case 2:return data=_a.sent(),scene=new _scene.Scene({id:"map",type:"mapbox",style:"mapbox://styles/mapbox/streets-v9",center:[110.19382669582967,50.258134],pitch:0,zoom:3}),(layer=new _layers.PolygonLayer({enablePicking:!0,enableHighlight:!0,passes:[["colorHalftone",{size:8}]]})).source(data).size("name",[0,1e4,5e4,3e4,1e5]).color("name",["#2E8AE6","#69D1AB","#DAF291","#FFD591","#FF7A45","#CF1D49"]).shape("fill").style({opacity:.8}),scene.addLayer(layer),scene.render(),this.scene=scene,gui=new dat.GUI,this.gui=gui,styleOptions={angle:0,size:8,centerX:.5,centerY:.5},(pointFolder=gui.addFolder("ColorHalftone 配置")).add(styleOptions,"centerX",0,1).onChange((function(centerX){layer.style({passes:[["colorHalftone",{center:[centerX,styleOptions.centerY]}]]}),scene.render()})),pointFolder.add(styleOptions,"centerY",0,1).onChange((function(centerY){layer.style({passes:[["colorHalftone",{center:[styleOptions.centerX,centerY]}]]}),scene.render()})),pointFolder.add(styleOptions,"angle",0,10).onChange((function(angle){layer.style({passes:[["colorHalftone",{angle:angle}]]}),scene.render()})),pointFolder.add(styleOptions,"size",0,20).onChange((function(size){layer.style({passes:[["colorHalftone",{size:size}]]}),scene.render()})),pointFolder.open(),[2]}}))}))},ColorHalftone.prototype.render=function(){return React.createElement("div",{id:"map",style:{position:"absolute",top:0,left:0,right:0,bottom:0}})},ColorHalftone}(React.Component);exports.default=_default},1031:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _layers=__webpack_require__(43),_scene=__webpack_require__(44),dat=_interopRequireWildcard(__webpack_require__(94)),React=_interopRequireWildcard(__webpack_require__(17));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var extendStatics,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},_default=function(_super){function HexagonalPixelate(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(HexagonalPixelate,_super),HexagonalPixelate.prototype.componentWillUnmount=function(){this.gui&&this.gui.destroy(),this.$stats&&document.body.removeChild(this.$stats),this.scene.destroy()},HexagonalPixelate.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,(function(){var data,scene,layer,gui,styleOptions,pointFolder;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,fetch("https://gw.alipayobjects.com/os/basement_prod/d2e0e930-fd44-4fca-8872-c1037b0fee7b.json")];case 1:return[4,_a.sent().json()];case 2:return data=_a.sent(),scene=new _scene.Scene({id:"map",type:"mapbox",style:"mapbox://styles/mapbox/streets-v9",center:[110.19382669582967,50.258134],pitch:0,zoom:3}),(layer=new _layers.PolygonLayer({enablePicking:!0,enableHighlight:!0,passes:[["hexagonalPixelate",{scale:10}]]})).source(data).size("name",[0,1e4,5e4,3e4,1e5]).color("name",["#2E8AE6","#69D1AB","#DAF291","#FFD591","#FF7A45","#CF1D49"]).shape("fill").style({opacity:.8}),scene.addLayer(layer),scene.render(),this.scene=scene,gui=new dat.GUI,this.gui=gui,styleOptions={scale:10,centerX:.5,centerY:.5},(pointFolder=gui.addFolder("HexagonalPixelate 配置")).add(styleOptions,"centerX",0,1).onChange((function(centerX){layer.style({passes:[["hexagonalPixelate",{center:[centerX,styleOptions.centerY]}]]}),scene.render()})),pointFolder.add(styleOptions,"centerY",0,1).onChange((function(centerY){layer.style({passes:[["hexagonalPixelate",{center:[styleOptions.centerX,centerY]}]]}),scene.render()})),pointFolder.add(styleOptions,"scale",0,50).onChange((function(scale){layer.style({passes:[["hexagonalPixelate",{scale:scale}]]}),scene.render()})),pointFolder.open(),[2]}}))}))},HexagonalPixelate.prototype.render=function(){return React.createElement("div",{id:"map",style:{position:"absolute",top:0,left:0,right:0,bottom:0}})},HexagonalPixelate}(React.Component);exports.default=_default},1032:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _layers=__webpack_require__(43),_scene=__webpack_require__(44),dat=_interopRequireWildcard(__webpack_require__(94)),React=_interopRequireWildcard(__webpack_require__(17));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var extendStatics,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},_default=function(_super){function Ink(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Ink,_super),Ink.prototype.componentWillUnmount=function(){this.gui&&this.gui.destroy(),this.$stats&&document.body.removeChild(this.$stats),this.scene.destroy()},Ink.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,(function(){var data,scene,layer,gui,styleOptions,pointFolder;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,fetch("https://gw.alipayobjects.com/os/basement_prod/d2e0e930-fd44-4fca-8872-c1037b0fee7b.json")];case 1:return[4,_a.sent().json()];case 2:return data=_a.sent(),scene=new _scene.Scene({id:"map",type:"mapbox",style:"mapbox://styles/mapbox/streets-v9",center:[110.19382669582967,50.258134],pitch:0,zoom:3}),(layer=new _layers.PolygonLayer({enablePicking:!0,enableHighlight:!0,passes:[["ink",{strength:.6}]]})).source(data).size("name",[0,1e4,5e4,3e4,1e5]).color("name",["#2E8AE6","#69D1AB","#DAF291","#FFD591","#FF7A45","#CF1D49"]).shape("fill").style({opacity:.8}),scene.addLayer(layer),scene.render(),this.scene=scene,gui=new dat.GUI,this.gui=gui,styleOptions={strength:.6},(pointFolder=gui.addFolder("Ink 配置")).add(styleOptions,"strength",0,1).onChange((function(strength){layer.style({passes:[["ink",{strength:strength}]]}),scene.render()})),pointFolder.open(),[2]}}))}))},Ink.prototype.render=function(){return React.createElement("div",{id:"map",style:{position:"absolute",top:0,left:0,right:0,bottom:0}})},Ink}(React.Component);exports.default=_default},1033:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _layers=__webpack_require__(43),_scene=__webpack_require__(44),dat=_interopRequireWildcard(__webpack_require__(94)),React=_interopRequireWildcard(__webpack_require__(17));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var extendStatics,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},_default=function(_super){function Noise(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Noise,_super),Noise.prototype.componentWillUnmount=function(){this.gui&&this.gui.destroy(),this.$stats&&document.body.removeChild(this.$stats),this.scene.destroy()},Noise.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,(function(){var data,scene,layer,gui,styleOptions,pointFolder;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,fetch("https://gw.alipayobjects.com/os/basement_prod/d2e0e930-fd44-4fca-8872-c1037b0fee7b.json")];case 1:return[4,_a.sent().json()];case 2:return data=_a.sent(),scene=new _scene.Scene({id:"map",type:"mapbox",style:"mapbox://styles/mapbox/streets-v9",center:[110.19382669582967,50.258134],pitch:0,zoom:3}),(layer=new _layers.PolygonLayer({enablePicking:!0,enableHighlight:!0,passes:["noise"]})).source(data).size("name",[0,1e4,5e4,3e4,1e5]).color("name",["#2E8AE6","#69D1AB","#DAF291","#FFD591","#FF7A45","#CF1D49"]).shape("fill").style({opacity:.8}),scene.addLayer(layer),scene.render(),this.scene=scene,gui=new dat.GUI,this.gui=gui,styleOptions={amount:1},(pointFolder=gui.addFolder("Noise 配置")).add(styleOptions,"amount",0,1).onChange((function(amount){layer.style({passes:[["noise",{amount:amount}]]}),scene.render()})),pointFolder.open(),[2]}}))}))},Noise.prototype.render=function(){return React.createElement("div",{id:"map",style:{position:"absolute",top:0,left:0,right:0,bottom:0}})},Noise}(React.Component);exports.default=_default},1034:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _layers=__webpack_require__(43),_scene=__webpack_require__(44),dat=_interopRequireWildcard(__webpack_require__(94)),React=_interopRequireWildcard(__webpack_require__(17));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var extendStatics,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},_default=function(_super){function Sepia(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Sepia,_super),Sepia.prototype.componentWillUnmount=function(){this.gui&&this.gui.destroy(),this.$stats&&document.body.removeChild(this.$stats),this.scene.destroy()},Sepia.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,(function(){var data,scene,layer,gui,styleOptions,pointFolder;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,fetch("https://gw.alipayobjects.com/os/basement_prod/d2e0e930-fd44-4fca-8872-c1037b0fee7b.json")];case 1:return[4,_a.sent().json()];case 2:return data=_a.sent(),scene=new _scene.Scene({id:"map",type:"mapbox",style:"mapbox://styles/mapbox/streets-v9",center:[110.19382669582967,50.258134],pitch:0,zoom:3}),(layer=new _layers.PolygonLayer({enablePicking:!0,enableHighlight:!0,passes:["sepia"]})).source(data).size("name",[0,1e4,5e4,3e4,1e5]).color("name",["#2E8AE6","#69D1AB","#DAF291","#FFD591","#FF7A45","#CF1D49"]).shape("fill").style({opacity:.8}),scene.addLayer(layer),scene.render(),this.scene=scene,gui=new dat.GUI,this.gui=gui,styleOptions={amount:.5},(pointFolder=gui.addFolder("Sepia 配置")).add(styleOptions,"amount",0,1).onChange((function(amount){layer.style({passes:[["sepia",{amount:amount}]]}),scene.render()})),pointFolder.open(),[2]}}))}))},Sepia.prototype.render=function(){return React.createElement("div",{id:"map",style:{position:"absolute",top:0,left:0,right:0,bottom:0}})},Sepia}(React.Component);exports.default=_default},1035:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _layers=__webpack_require__(43),_scene=__webpack_require__(44),dat=_interopRequireWildcard(__webpack_require__(94)),React=_interopRequireWildcard(__webpack_require__(17));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var extendStatics,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},_default=function(_super){function TAA(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(TAA,_super),TAA.prototype.componentWillUnmount=function(){this.gui&&this.gui.destroy(),this.$stats&&document.body.removeChild(this.$stats),this.scene.destroy()},TAA.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,(function(){var data,scene,layer,gui,styleOptions,pointFolder;return __generator(this,(function(_a){switch(_a.label){case 0:return[4,fetch("https://gw.alipayobjects.com/os/basement_prod/d2e0e930-fd44-4fca-8872-c1037b0fee7b.json")];case 1:return[4,_a.sent().json()];case 2:return data=_a.sent(),scene=new _scene.Scene({id:"map",type:"mapbox",style:"mapbox://styles/mapbox/streets-v9",center:[110.19382669582967,50.258134],pitch:0,zoom:3}),(layer=new _layers.PolygonLayer({enablePicking:!0,enableHighlight:!0,enableTAA:!0,jitterScale:1})).source(data).size("name",[0,1e4,5e4,3e4,1e5]).color("name",["#2E8AE6","#69D1AB","#DAF291","#FFD591","#FF7A45","#CF1D49"]).shape("fill").style({opacity:.8}),scene.addLayer(layer),scene.render(),this.scene=scene,gui=new dat.GUI,this.gui=gui,styleOptions={jitterScale:1},(pointFolder=gui.addFolder("TAA 配置")).add(styleOptions,"jitterScale",0,100).onChange((function(jitterScale){layer.style({jitterScale:jitterScale}),scene.render()})),pointFolder.open(),[2]}}))}))},TAA.prototype.render=function(){return React.createElement("div",{id:"map",style:{position:"absolute",top:0,left:0,right:0,bottom:0}})},TAA}(React.Component);exports.default=_default},1036:function(module,exports,__webpack_require__){"use strict";(function(module){var _react=__webpack_require__(137),React=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(17)),_AdvancedAPI=_interopRequireDefault(__webpack_require__(1037)),_Highlight=_interopRequireDefault(__webpack_require__(1038)),_Tooltip=_interopRequireDefault(__webpack_require__(1039));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}var withSourceLoader=__webpack_require__(176).withSource,__STORY__="import { storiesOf } from '@storybook/react';\nimport * as React from 'react';\nimport AdvancedAPI from './components/AdvancedAPI';\nimport Highlight from './components/Highlight';\nimport Tooltip from './components/Tooltip';\n// @ts-ignore\nstoriesOf('交互', module)\n  .add('拾取 & 高亮', () => <Highlight />)\n  .add('拾取 & Tooltip', () => <Tooltip />)\n  .add('高级拾取 API', () => <AdvancedAPI />);\n",__ADDS_MAP__={"交互--高级拾取-api":{startLoc:{col:7,line:10},endLoc:{col:40,line:10},startBody:{col:19,line:10},endBody:{col:40,line:10}},"交互--拾取-tooltip":{startLoc:{col:7,line:9},endLoc:{col:40,line:9},startBody:{col:23,line:9},endBody:{col:40,line:9}},"交互--拾取-高亮":{startLoc:{col:7,line:8},endLoc:{col:37,line:8},startBody:{col:18,line:8},endBody:{col:37,line:8}}};(0,_react.storiesOf)("交互",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/Picking.stories.tsx",[],{},"/Users/dongdong.feng/Documents/own-fork/L7/stories/Picking",{})).add("拾取 & 高亮",(function(){return React.createElement(_Highlight.default,null)})).add("拾取 & Tooltip",(function(){return React.createElement(_Tooltip.default,null)})).add("高级拾取 API",(function(){return React.createElement(_AdvancedAPI.default,null)}))}).call(this,__webpack_require__(68)(module))},1037:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _layers=__webpack_require__(43),_scene=__webpack_require__(44),dat=_interopRequireWildcard(__webpack_require__(94)),React=_interopRequireWildcard(__webpack_require__(17));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var extendStatics,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},__read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},_default=function(_super){function AdvancedAPI(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(AdvancedAPI,_super),AdvancedAPI.prototype.componentWillUnmount=function(){this.gui&&this.gui.destroy(),this.$stats&&document.body.removeChild(this.$stats),this.scene.destroy()},AdvancedAPI.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,(function(){var response,scene,layer,_a,_b,gui,styleOptions,pointFolder;return __generator(this,(function(_c){switch(_c.label){case 0:return[4,fetch("https://gw.alipayobjects.com/os/basement_prod/d2e0e930-fd44-4fca-8872-c1037b0fee7b.json")];case 1:return response=_c.sent(),scene=new _scene.Scene({id:"map",type:"mapbox",style:"mapbox://styles/mapbox/streets-v9",center:[110.19382669582967,50.258134],pitch:0,zoom:3}),layer=new _layers.PolygonLayer({enablePicking:!0,enableHighlight:!0,highlightColor:[0,0,1,1],onHover:function(pickedFeature){console.log(pickedFeature)}}),_b=(_a=layer).source,[4,response.json()];case 2:return _b.apply(_a,[_c.sent()]).size("name",[0,1e4,5e4,3e4,1e5]).color("name",["#2E8AE6","#69D1AB","#DAF291","#FFD591","#FF7A45","#CF1D49"]).shape("fill").style({opacity:.8}),scene.addLayer(layer),scene.render(),this.scene=scene,gui=new dat.GUI,this.gui=gui,styleOptions={enablePicking:!0,enableHighlight:!0,highlightColor:[0,0,255],pickingX:window.innerWidth/2,pickingY:window.innerHeight/2},(pointFolder=gui.addFolder("非鼠标 hover 交互")).add(styleOptions,"enableHighlight").onChange((function(enableHighlight){layer.style({enableHighlight:enableHighlight}),scene.render()})),pointFolder.add(styleOptions,"pickingX",0,window.innerWidth).onChange((function(pickingX){layer.pick({x:pickingX,y:styleOptions.pickingY})})),pointFolder.add(styleOptions,"pickingY",0,window.innerHeight).onChange((function(pickingY){layer.pick({x:styleOptions.pickingX,y:pickingY})})),pointFolder.addColor(styleOptions,"highlightColor").onChange((function(highlightColor){var _a=__read(highlightColor.map((function(c){return c/255})),3),r=_a[0],g=_a[1],b=_a[2];layer.style({highlightColor:[r,g,b,1]}),scene.render()})),pointFolder.open(),[2]}}))}))},AdvancedAPI.prototype.render=function(){return React.createElement("div",{id:"map",style:{position:"absolute",top:0,left:0,right:0,bottom:0}})},AdvancedAPI}(React.Component);exports.default=_default},1038:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _layers=__webpack_require__(43),_scene=__webpack_require__(44),dat=_interopRequireWildcard(__webpack_require__(94)),React=_interopRequireWildcard(__webpack_require__(17));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var extendStatics,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},__read=function(o,n){var m="function"==typeof Symbol&&o[Symbol.iterator];if(!m)return o;var r,e,i=m.call(o),ar=[];try{for(;(void 0===n||n-- >0)&&!(r=i.next()).done;)ar.push(r.value)}catch(error){e={error:error}}finally{try{r&&!r.done&&(m=i.return)&&m.call(i)}finally{if(e)throw e.error}}return ar},_default=function(_super){function Highlight(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Highlight,_super),Highlight.prototype.componentWillUnmount=function(){this.gui&&this.gui.destroy(),this.$stats&&document.body.removeChild(this.$stats),this.scene.destroy()},Highlight.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,(function(){var response,scene,layer,_a,_b,gui,styleOptions,pointFolder;return __generator(this,(function(_c){switch(_c.label){case 0:return[4,fetch("https://gw.alipayobjects.com/os/basement_prod/d2e0e930-fd44-4fca-8872-c1037b0fee7b.json")];case 1:return response=_c.sent(),scene=new _scene.Scene({id:"map",type:"mapbox",style:"mapbox://styles/mapbox/streets-v9",center:[110.19382669582967,50.258134],pitch:0,zoom:3}),layer=new _layers.PolygonLayer({enablePicking:!0,enableHighlight:!0,highlightColor:[0,0,1,1],onHover:function(pickedFeature){console.log(pickedFeature)}}),_b=(_a=layer).source,[4,response.json()];case 2:return _b.apply(_a,[_c.sent()]).size("name",[0,1e4,5e4,3e4,1e5]).color("name",["#2E8AE6","#69D1AB","#DAF291","#FFD591","#FF7A45","#CF1D49"]).shape("fill").style({opacity:1}),scene.addLayer(layer),scene.render(),this.scene=scene,gui=new dat.GUI,this.gui=gui,styleOptions={enablePicking:!0,enableHighlight:!0,highlightColor:[0,0,255]},(pointFolder=gui.addFolder("拾取 & 高亮")).add(styleOptions,"enableHighlight").onChange((function(enableHighlight){layer.style({enableHighlight:enableHighlight}),scene.render()})),pointFolder.addColor(styleOptions,"highlightColor").onChange((function(highlightColor){var _a=__read(highlightColor.map((function(c){return c/255})),3),r=_a[0],g=_a[1],b=_a[2];layer.style({highlightColor:[r,g,b,1]}),scene.render()})),pointFolder.open(),[2]}}))}))},Highlight.prototype.render=function(){return React.createElement("div",{id:"map",style:{position:"absolute",top:0,left:0,right:0,bottom:0}})},Highlight}(React.Component);exports.default=_default},1039:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _layers=__webpack_require__(43),_scene=__webpack_require__(44),React=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(17));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}var extendStatics,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}},_default=function(_super){function Mapbox(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Mapbox,_super),Mapbox.prototype.componentWillUnmount=function(){this.scene.destroy()},Mapbox.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,(function(){var response,scene,layer,_a,_b;return __generator(this,(function(_c){switch(_c.label){case 0:return[4,fetch("https://gw.alipayobjects.com/os/basement_prod/d2e0e930-fd44-4fca-8872-c1037b0fee7b.json")];case 1:return response=_c.sent(),scene=new _scene.Scene({id:"map",type:"mapbox",style:"mapbox://styles/mapbox/streets-v9",center:[110.19382669582967,50.258134],pitch:0,zoom:3}),layer=new _layers.PolygonLayer({enablePicking:!0,enableHighlight:!1,onHover:function(pickedFeature){console.log(pickedFeature)}}),_b=(_a=layer).source,[4,response.json()];case 2:return _b.apply(_a,[_c.sent()]).size("name",[0,1e4,5e4,3e4,1e5]).color("name",["#2E8AE6","#69D1AB","#DAF291","#FFD591","#FF7A45","#CF1D49"]).shape("fill").style({opacity:.8}),scene.addLayer(layer),scene.render(),this.scene=scene,[2]}}))}))},Mapbox.prototype.render=function(){return React.createElement("div",{id:"map",style:{position:"absolute",top:0,left:0,right:0,bottom:0}})},Mapbox}(React.Component);exports.default=_default},113:function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(3),__webpack_require__(26),__webpack_require__(9),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(11),__webpack_require__(10),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_dec3,_class,_class2,_descriptor,_descriptor2,_inversify=__webpack_require__(18),_index=__webpack_require__(25),_types=__webpack_require__(55),_IMultiPassRenderer=__webpack_require__(129);function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var BasePostProcessingPass=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_types.TYPES.IShaderModuleService),_dec3=(0,_inversify.inject)(_types.TYPES.IRendererService),_dec((_descriptor=_applyDecoratedDescriptor((_class2=function(){function BasePostProcessingPass(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,BasePostProcessingPass),_initializerDefineProperty(this,"shaderModule",_descriptor,this),_initializerDefineProperty(this,"rendererService",_descriptor2,this),this.config=void 0,this.enabled=!0,this.renderToScreen=!1,this.model=void 0,this.optionsToUpdate={}}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(BasePostProcessingPass,[{key:"getName",value:function getName(){return""}},{key:"getType",value:function getType(){return _IMultiPassRenderer.PassType.PostProcessing}},{key:"init",value:function init(layer,config){this.config=config;var _this$rendererService=this.rendererService,createAttribute=_this$rendererService.createAttribute,createBuffer=_this$rendererService.createBuffer,createModel=_this$rendererService.createModel,_this$setupShaders=this.setupShaders(),vs=_this$setupShaders.vs,fs=_this$setupShaders.fs,uniforms=_this$setupShaders.uniforms;this.model=createModel({vs:vs,fs:fs,attributes:{a_Position:createAttribute({buffer:createBuffer({data:[-4,-4,4,-4,0,4],type:_index.gl.FLOAT}),size:2})},uniforms:_objectSpread({u_Texture:null},uniforms,{},this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3})}},{key:"render",value:function render(layer){var _this=this,postProcessor=layer.multiPassRenderer.getPostProcessor(),_this$rendererService2=this.rendererService,useFramebuffer=_this$rendererService2.useFramebuffer,_getViewportSize=(0,_this$rendererService2.getViewportSize)(),width=_getViewportSize.width,height=_getViewportSize.height;useFramebuffer(this.renderToScreen?null:postProcessor.getWriteFBO(),(function(){_this.model.draw({uniforms:_objectSpread({u_Texture:postProcessor.getReadFBO(),u_ViewportSize:[width,height]},_this.convertOptionsToUniforms(_this.optionsToUpdate))})}))}},{key:"isEnabled",value:function isEnabled(){return this.enabled}},{key:"setEnabled",value:function setEnabled(enabled){this.enabled=enabled}},{key:"setRenderToScreen",value:function setRenderToScreen(renderToScreen){this.renderToScreen=renderToScreen}},{key:"updateOptions",value:function updateOptions(config){this.optionsToUpdate=_objectSpread({},this.optionsToUpdate,{},config)}},{key:"setupShaders",value:function setupShaders(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function convertOptionsToUniforms(){throw new Error("Method not implemented.")}}]),BasePostProcessingPass}()).prototype,"shaderModule",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor2=_applyDecoratedDescriptor(_class2.prototype,"rendererService",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=BasePostProcessingPass},129:function(module,exports,__webpack_require__){"use strict";var PassType;__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.PassType=void 0,exports.PassType=PassType,function(PassType){PassType.Normal="normal",PassType.PostProcessing="post-processing"}(PassType||(exports.PassType=PassType={}))},173:function(module,exports,__webpack_require__){"use strict";var gl;__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.gl=void 0,exports.gl=gl,function(gl){gl[gl.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",gl[gl.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",gl[gl.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",gl[gl.POINTS=0]="POINTS",gl[gl.LINES=1]="LINES",gl[gl.LINE_LOOP=2]="LINE_LOOP",gl[gl.LINE_STRIP=3]="LINE_STRIP",gl[gl.TRIANGLES=4]="TRIANGLES",gl[gl.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",gl[gl.TRIANGLE_FAN=6]="TRIANGLE_FAN",gl[gl.ZERO=0]="ZERO",gl[gl.ONE=1]="ONE",gl[gl.SRC_COLOR=768]="SRC_COLOR",gl[gl.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",gl[gl.SRC_ALPHA=770]="SRC_ALPHA",gl[gl.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",gl[gl.DST_ALPHA=772]="DST_ALPHA",gl[gl.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",gl[gl.DST_COLOR=774]="DST_COLOR",gl[gl.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",gl[gl.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",gl[gl.FUNC_ADD=32774]="FUNC_ADD",gl[gl.BLEND_EQUATION=32777]="BLEND_EQUATION",gl[gl.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",gl[gl.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",gl[gl.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",gl[gl.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",gl[gl.BLEND_DST_RGB=32968]="BLEND_DST_RGB",gl[gl.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",gl[gl.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",gl[gl.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",gl[gl.CONSTANT_COLOR=32769]="CONSTANT_COLOR",gl[gl.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",gl[gl.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",gl[gl.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",gl[gl.BLEND_COLOR=32773]="BLEND_COLOR",gl[gl.ARRAY_BUFFER=34962]="ARRAY_BUFFER",gl[gl.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",gl[gl.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",gl[gl.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",gl[gl.STREAM_DRAW=35040]="STREAM_DRAW",gl[gl.STATIC_DRAW=35044]="STATIC_DRAW",gl[gl.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",gl[gl.BUFFER_SIZE=34660]="BUFFER_SIZE",gl[gl.BUFFER_USAGE=34661]="BUFFER_USAGE",gl[gl.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",gl[gl.FRONT=1028]="FRONT",gl[gl.BACK=1029]="BACK",gl[gl.FRONT_AND_BACK=1032]="FRONT_AND_BACK",gl[gl.CULL_FACE=2884]="CULL_FACE",gl[gl.BLEND=3042]="BLEND",gl[gl.DITHER=3024]="DITHER",gl[gl.STENCIL_TEST=2960]="STENCIL_TEST",gl[gl.DEPTH_TEST=2929]="DEPTH_TEST",gl[gl.SCISSOR_TEST=3089]="SCISSOR_TEST",gl[gl.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",gl[gl.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",gl[gl.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",gl[gl.NO_ERROR=0]="NO_ERROR",gl[gl.INVALID_ENUM=1280]="INVALID_ENUM",gl[gl.INVALID_VALUE=1281]="INVALID_VALUE",gl[gl.INVALID_OPERATION=1282]="INVALID_OPERATION",gl[gl.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",gl[gl.CW=2304]="CW",gl[gl.CCW=2305]="CCW",gl[gl.LINE_WIDTH=2849]="LINE_WIDTH",gl[gl.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",gl[gl.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",gl[gl.CULL_FACE_MODE=2885]="CULL_FACE_MODE",gl[gl.FRONT_FACE=2886]="FRONT_FACE",gl[gl.DEPTH_RANGE=2928]="DEPTH_RANGE",gl[gl.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",gl[gl.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",gl[gl.DEPTH_FUNC=2932]="DEPTH_FUNC",gl[gl.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",gl[gl.STENCIL_FUNC=2962]="STENCIL_FUNC",gl[gl.STENCIL_FAIL=2964]="STENCIL_FAIL",gl[gl.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",gl[gl.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",gl[gl.STENCIL_REF=2967]="STENCIL_REF",gl[gl.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",gl[gl.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",gl[gl.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",gl[gl.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",gl[gl.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",gl[gl.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",gl[gl.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",gl[gl.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",gl[gl.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",gl[gl.VIEWPORT=2978]="VIEWPORT",gl[gl.SCISSOR_BOX=3088]="SCISSOR_BOX",gl[gl.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",gl[gl.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",gl[gl.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",gl[gl.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",gl[gl.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",gl[gl.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",gl[gl.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",gl[gl.RED_BITS=3410]="RED_BITS",gl[gl.GREEN_BITS=3411]="GREEN_BITS",gl[gl.BLUE_BITS=3412]="BLUE_BITS",gl[gl.ALPHA_BITS=3413]="ALPHA_BITS",gl[gl.DEPTH_BITS=3414]="DEPTH_BITS",gl[gl.STENCIL_BITS=3415]="STENCIL_BITS",gl[gl.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",gl[gl.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",gl[gl.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",gl[gl.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",gl[gl.SAMPLES=32937]="SAMPLES",gl[gl.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",gl[gl.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",gl[gl.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",gl[gl.DONT_CARE=4352]="DONT_CARE",gl[gl.FASTEST=4353]="FASTEST",gl[gl.NICEST=4354]="NICEST",gl[gl.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",gl[gl.BYTE=5120]="BYTE",gl[gl.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",gl[gl.SHORT=5122]="SHORT",gl[gl.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",gl[gl.INT=5124]="INT",gl[gl.UNSIGNED_INT=5125]="UNSIGNED_INT",gl[gl.FLOAT=5126]="FLOAT",gl[gl.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",gl[gl.ALPHA=6406]="ALPHA",gl[gl.RGB=6407]="RGB",gl[gl.RGBA=6408]="RGBA",gl[gl.LUMINANCE=6409]="LUMINANCE",gl[gl.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",gl[gl.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",gl[gl.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",gl[gl.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",gl[gl.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",gl[gl.VERTEX_SHADER=35633]="VERTEX_SHADER",gl[gl.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",gl[gl.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",gl[gl.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",gl[gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",gl[gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",gl[gl.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",gl[gl.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",gl[gl.SHADER_TYPE=35663]="SHADER_TYPE",gl[gl.DELETE_STATUS=35712]="DELETE_STATUS",gl[gl.LINK_STATUS=35714]="LINK_STATUS",gl[gl.VALIDATE_STATUS=35715]="VALIDATE_STATUS",gl[gl.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",gl[gl.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",gl[gl.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",gl[gl.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",gl[gl.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",gl[gl.NEVER=512]="NEVER",gl[gl.LESS=513]="LESS",gl[gl.EQUAL=514]="EQUAL",gl[gl.LEQUAL=515]="LEQUAL",gl[gl.GREATER=516]="GREATER",gl[gl.NOTEQUAL=517]="NOTEQUAL",gl[gl.GEQUAL=518]="GEQUAL",gl[gl.ALWAYS=519]="ALWAYS",gl[gl.KEEP=7680]="KEEP",gl[gl.REPLACE=7681]="REPLACE",gl[gl.INCR=7682]="INCR",gl[gl.DECR=7683]="DECR",gl[gl.INVERT=5386]="INVERT",gl[gl.INCR_WRAP=34055]="INCR_WRAP",gl[gl.DECR_WRAP=34056]="DECR_WRAP",gl[gl.VENDOR=7936]="VENDOR",gl[gl.RENDERER=7937]="RENDERER",gl[gl.VERSION=7938]="VERSION",gl[gl.NEAREST=9728]="NEAREST",gl[gl.LINEAR=9729]="LINEAR",gl[gl.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",gl[gl.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",gl[gl.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",gl[gl.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",gl[gl.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",gl[gl.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",gl[gl.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",gl[gl.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",gl[gl.TEXTURE_2D=3553]="TEXTURE_2D",gl[gl.TEXTURE=5890]="TEXTURE",gl[gl.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",gl[gl.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",gl[gl.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",gl[gl.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",gl[gl.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",gl[gl.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",gl[gl.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",gl[gl.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",gl[gl.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",gl[gl.TEXTURE0=33984]="TEXTURE0",gl[gl.TEXTURE1=33985]="TEXTURE1",gl[gl.TEXTURE2=33986]="TEXTURE2",gl[gl.TEXTURE3=33987]="TEXTURE3",gl[gl.TEXTURE4=33988]="TEXTURE4",gl[gl.TEXTURE5=33989]="TEXTURE5",gl[gl.TEXTURE6=33990]="TEXTURE6",gl[gl.TEXTURE7=33991]="TEXTURE7",gl[gl.TEXTURE8=33992]="TEXTURE8",gl[gl.TEXTURE9=33993]="TEXTURE9",gl[gl.TEXTURE10=33994]="TEXTURE10",gl[gl.TEXTURE11=33995]="TEXTURE11",gl[gl.TEXTURE12=33996]="TEXTURE12",gl[gl.TEXTURE13=33997]="TEXTURE13",gl[gl.TEXTURE14=33998]="TEXTURE14",gl[gl.TEXTURE15=33999]="TEXTURE15",gl[gl.TEXTURE16=34e3]="TEXTURE16",gl[gl.TEXTURE17=34001]="TEXTURE17",gl[gl.TEXTURE18=34002]="TEXTURE18",gl[gl.TEXTURE19=34003]="TEXTURE19",gl[gl.TEXTURE20=34004]="TEXTURE20",gl[gl.TEXTURE21=34005]="TEXTURE21",gl[gl.TEXTURE22=34006]="TEXTURE22",gl[gl.TEXTURE23=34007]="TEXTURE23",gl[gl.TEXTURE24=34008]="TEXTURE24",gl[gl.TEXTURE25=34009]="TEXTURE25",gl[gl.TEXTURE26=34010]="TEXTURE26",gl[gl.TEXTURE27=34011]="TEXTURE27",gl[gl.TEXTURE28=34012]="TEXTURE28",gl[gl.TEXTURE29=34013]="TEXTURE29",gl[gl.TEXTURE30=34014]="TEXTURE30",gl[gl.TEXTURE31=34015]="TEXTURE31",gl[gl.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",gl[gl.REPEAT=10497]="REPEAT",gl[gl.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",gl[gl.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",gl[gl.FLOAT_VEC2=35664]="FLOAT_VEC2",gl[gl.FLOAT_VEC3=35665]="FLOAT_VEC3",gl[gl.FLOAT_VEC4=35666]="FLOAT_VEC4",gl[gl.INT_VEC2=35667]="INT_VEC2",gl[gl.INT_VEC3=35668]="INT_VEC3",gl[gl.INT_VEC4=35669]="INT_VEC4",gl[gl.BOOL=35670]="BOOL",gl[gl.BOOL_VEC2=35671]="BOOL_VEC2",gl[gl.BOOL_VEC3=35672]="BOOL_VEC3",gl[gl.BOOL_VEC4=35673]="BOOL_VEC4",gl[gl.FLOAT_MAT2=35674]="FLOAT_MAT2",gl[gl.FLOAT_MAT3=35675]="FLOAT_MAT3",gl[gl.FLOAT_MAT4=35676]="FLOAT_MAT4",gl[gl.SAMPLER_2D=35678]="SAMPLER_2D",gl[gl.SAMPLER_CUBE=35680]="SAMPLER_CUBE",gl[gl.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",gl[gl.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",gl[gl.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",gl[gl.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",gl[gl.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",gl[gl.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",gl[gl.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",gl[gl.COMPILE_STATUS=35713]="COMPILE_STATUS",gl[gl.LOW_FLOAT=36336]="LOW_FLOAT",gl[gl.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",gl[gl.HIGH_FLOAT=36338]="HIGH_FLOAT",gl[gl.LOW_INT=36339]="LOW_INT",gl[gl.MEDIUM_INT=36340]="MEDIUM_INT",gl[gl.HIGH_INT=36341]="HIGH_INT",gl[gl.FRAMEBUFFER=36160]="FRAMEBUFFER",gl[gl.RENDERBUFFER=36161]="RENDERBUFFER",gl[gl.RGBA4=32854]="RGBA4",gl[gl.RGB5_A1=32855]="RGB5_A1",gl[gl.RGB565=36194]="RGB565",gl[gl.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",gl[gl.STENCIL_INDEX=6401]="STENCIL_INDEX",gl[gl.STENCIL_INDEX8=36168]="STENCIL_INDEX8",gl[gl.DEPTH_STENCIL=34041]="DEPTH_STENCIL",gl[gl.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",gl[gl.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",gl[gl.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",gl[gl.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",gl[gl.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",gl[gl.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",gl[gl.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",gl[gl.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",gl[gl.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",gl[gl.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",gl[gl.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",gl[gl.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",gl[gl.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",gl[gl.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",gl[gl.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",gl[gl.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",gl[gl.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",gl[gl.NONE=0]="NONE",gl[gl.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",gl[gl.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",gl[gl.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",gl[gl.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",gl[gl.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",gl[gl.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",gl[gl.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",gl[gl.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",gl[gl.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",gl[gl.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",gl[gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",gl[gl.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",gl[gl.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",gl[gl.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL"}(gl||(exports.gl=gl={}))},174:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(16),__webpack_require__(62),__webpack_require__(23),__webpack_require__(4),__webpack_require__(269),__webpack_require__(40),__webpack_require__(0),__webpack_require__(24),__webpack_require__(2),__webpack_require__(38),__webpack_require__(5),__webpack_require__(414),__webpack_require__(939),__webpack_require__(271),__webpack_require__(272),__webpack_require__(273),__webpack_require__(274),__webpack_require__(275),__webpack_require__(276),__webpack_require__(277),__webpack_require__(278),__webpack_require__(279),__webpack_require__(280),__webpack_require__(281),__webpack_require__(282),__webpack_require__(283),__webpack_require__(284),__webpack_require__(285),__webpack_require__(286),__webpack_require__(287),__webpack_require__(288),__webpack_require__(289),__webpack_require__(290),__webpack_require__(291),__webpack_require__(292),__webpack_require__(293),__webpack_require__(80),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.PointFillTriangulation=function PointFillTriangulation(feature){var coordinates=feature.coordinates;return{vertices:[].concat(_toConsumableArray(coordinates),_toConsumableArray(coordinates),_toConsumableArray(coordinates),_toConsumableArray(coordinates)),indices:[0,1,2,2,3,0],size:coordinates.length}},exports.PointExtrudeTriangulation=function PointExtrudeTriangulation(feature){var _getGeometry=function getGeometry(shape){if(GeometryCache&&GeometryCache[shape])return GeometryCache[shape];var path=_Path.geometryShape[shape]?_Path.geometryShape[shape]():_Path.geometryShape.cylinder(),geometry=(0,_extrude.default)([path]);return GeometryCache[shape]=geometry,geometry}(feature.shape),positions=_getGeometry.positions,index=_getGeometry.index;return{vertices:positions,indices:index,normals:Array.from(computeVertexNormals(positions,index)),size:3}},exports.PointImageTriangulation=function PointImageTriangulation(feature){var coordinates=feature.coordinates;return{vertices:_toConsumableArray(coordinates),indices:[0],size:coordinates.length}},exports.LineTriangulation=function LineTriangulation(feature){var coordinates=feature.coordinates,line=(0,_polylineNormal.default)(coordinates,!1,0);return{vertices:line.attrPos,indices:line.attrIndex,normals:line.normals,size:5}},exports.PolygonExtrudeTriangulation=function PolygonExtrudeTriangulation(feature){var coordinates=feature.coordinates,_ref=(0,_extrude.default)(coordinates),positions=_ref.positions,index=_ref.index;return{vertices:positions,indices:index,normals:Array.from(computeVertexNormals(positions,index)),size:3}},exports.HeatmapGridTriangulation=function HeatmapGridTriangulation(feature){var _getHeatmapGeometry=function getHeatmapGeometry(shape){var path=_Path.geometryShape[shape]?_Path.geometryShape[shape]():_Path.geometryShape.circle();return(0,_extrude.fillPolygon)([path])}(feature.shape),positions=_getHeatmapGeometry.positions,index=_getHeatmapGeometry.index;return{vertices:positions,indices:index,normals:Array.from(computeVertexNormals(positions,index)),size:3}},exports.RasterImageTriangulation=function RasterImageTriangulation(feature){var coordinates=feature.coordinates;return{vertices:[].concat(_toConsumableArray(coordinates[0]),[0,0,1,coordinates[1][0],coordinates[0][1],0,1,1],_toConsumableArray(coordinates[1]),[0,1,0],_toConsumableArray(coordinates[0]),[0,0,1],_toConsumableArray(coordinates[1]),[0,1,0,coordinates[0][0],coordinates[1][1],0,0,0]),indices:[0,1,2,3,4,5],size:5}};var _glMatrix=__webpack_require__(177),_polylineNormal=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(940)),_extrude=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}(__webpack_require__(941)),_Path=__webpack_require__(942);function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}var GeometryCache={};function computeVertexNormals(positions,indexArray){for(var vA,vB,vC,dim=2<arguments.length&&void 0!==arguments[2]?arguments[2]:3,normals=new Float32Array(positions.length/dim*3),cb=_glMatrix.vec3.create(),ab=_glMatrix.vec3.create(),normal=_glMatrix.vec3.create(),i=0,li=indexArray.length;i<li;i+=3){vA=3*indexArray[i+0],vB=3*indexArray[i+1],vC=3*indexArray[i+2];var _ref2=[positions[vA],positions[vA+1]],ax=_ref2[0],ay=_ref2[1],pA=_glMatrix.vec3.fromValues(ax,ay,positions[vA+2]),_ref3=[positions[vB],positions[vB+1]],bx=_ref3[0],by=_ref3[1],pB=_glMatrix.vec3.fromValues(bx,by,positions[vB+2]),_ref4=[positions[vC],positions[vC+1]],cx=_ref4[0],cy=_ref4[1],pC=_glMatrix.vec3.fromValues(cx,cy,positions[vC+2]);_glMatrix.vec3.sub(cb,pC,pB),_glMatrix.vec3.sub(ab,pA,pB),_glMatrix.vec3.cross(normal,cb,ab),normals[vA]+=cb[0],normals[vA+1]+=cb[1],normals[vA+2]+=cb[2],normals[vB]+=cb[0],normals[vB+1]+=cb[1],normals[vB+2]+=cb[2],normals[vC]+=cb[0],normals[vC+1]+=cb[1],normals[vC+2]+=cb[2]}return function normalizeNormals(normals){for(var i=0,li=normals.length;i<li;i+=3){var normal=_glMatrix.vec3.fromValues(normals[i],normals[i+1],normals[i+2]),newNormal=_glMatrix.vec3.create();_glMatrix.vec3.normalize(newNormal,normal),normals.set(newNormal,i)}}(normals),normals}},210:function(module,exports,__webpack_require__){"use strict";var _primitiveMap,_usageMap,_dataTypeMap,_formatMap,_mipmapMap,_filterMap,_wrapModeMap,_colorSpaceMap,_depthFuncMap,_blendEquationMap,_blendFuncMap,_stencilFuncMap,_stencilOpMap,_cullFaceMap;function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.cullFaceMap=exports.stencilOpMap=exports.stencilFuncMap=exports.blendFuncMap=exports.blendEquationMap=exports.depthFuncMap=exports.colorSpaceMap=exports.wrapModeMap=exports.filterMap=exports.mipmapMap=exports.formatMap=exports.dataTypeMap=exports.usageMap=exports.primitiveMap=void 0;var _core=__webpack_require__(25),primitiveMap=(_defineProperty(_primitiveMap={},_core.gl.POINTS,"points"),_defineProperty(_primitiveMap,_core.gl.LINES,"lines"),_defineProperty(_primitiveMap,_core.gl.LINE_LOOP,"line loop"),_defineProperty(_primitiveMap,_core.gl.LINE_STRIP,"line strip"),_defineProperty(_primitiveMap,_core.gl.TRIANGLES,"triangles"),_defineProperty(_primitiveMap,_core.gl.TRIANGLE_FAN,"triangle fan"),_defineProperty(_primitiveMap,_core.gl.TRIANGLE_STRIP,"triangle strip"),_primitiveMap);exports.primitiveMap=primitiveMap;var usageMap=(_defineProperty(_usageMap={},_core.gl.STATIC_DRAW,"static"),_defineProperty(_usageMap,_core.gl.DYNAMIC_DRAW,"dynamic"),_defineProperty(_usageMap,_core.gl.STREAM_DRAW,"stream"),_usageMap);exports.usageMap=usageMap;var dataTypeMap=(_defineProperty(_dataTypeMap={},_core.gl.BYTE,"int8"),_defineProperty(_dataTypeMap,_core.gl.UNSIGNED_INT,"int16"),_defineProperty(_dataTypeMap,_core.gl.INT,"int32"),_defineProperty(_dataTypeMap,_core.gl.UNSIGNED_BYTE,"uint8"),_defineProperty(_dataTypeMap,_core.gl.UNSIGNED_SHORT,"uint16"),_defineProperty(_dataTypeMap,_core.gl.UNSIGNED_INT,"uint32"),_defineProperty(_dataTypeMap,_core.gl.FLOAT,"float"),_dataTypeMap);exports.dataTypeMap=dataTypeMap;var formatMap=(_defineProperty(_formatMap={},_core.gl.ALPHA,"alpha"),_defineProperty(_formatMap,_core.gl.LUMINANCE,"luminance"),_defineProperty(_formatMap,_core.gl.LUMINANCE_ALPHA,"luminance alpha"),_defineProperty(_formatMap,_core.gl.RGB,"rgb"),_defineProperty(_formatMap,_core.gl.RGBA,"rgba"),_defineProperty(_formatMap,_core.gl.RGBA4,"rgba4"),_defineProperty(_formatMap,_core.gl.RGB5_A1,"rgb5 a1"),_defineProperty(_formatMap,_core.gl.RGB565,"rgb565"),_defineProperty(_formatMap,_core.gl.DEPTH_COMPONENT,"depth"),_defineProperty(_formatMap,_core.gl.DEPTH_STENCIL,"depth stencil"),_formatMap);exports.formatMap=formatMap;var mipmapMap=(_defineProperty(_mipmapMap={},_core.gl.DONT_CARE,"dont care"),_defineProperty(_mipmapMap,_core.gl.NICEST,"nice"),_defineProperty(_mipmapMap,_core.gl.FASTEST,"fast"),_mipmapMap);exports.mipmapMap=mipmapMap;var filterMap=(_defineProperty(_filterMap={},_core.gl.NEAREST,"nearest"),_defineProperty(_filterMap,_core.gl.LINEAR,"linear"),_defineProperty(_filterMap,_core.gl.LINEAR_MIPMAP_LINEAR,"mipmap"),_defineProperty(_filterMap,_core.gl.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),_defineProperty(_filterMap,_core.gl.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),_defineProperty(_filterMap,_core.gl.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),_filterMap);exports.filterMap=filterMap;var wrapModeMap=(_defineProperty(_wrapModeMap={},_core.gl.REPEAT,"repeat"),_defineProperty(_wrapModeMap,_core.gl.CLAMP_TO_EDGE,"clamp"),_defineProperty(_wrapModeMap,_core.gl.MIRRORED_REPEAT,"mirror"),_wrapModeMap);exports.wrapModeMap=wrapModeMap;var colorSpaceMap=(_defineProperty(_colorSpaceMap={},_core.gl.NONE,"none"),_defineProperty(_colorSpaceMap,_core.gl.BROWSER_DEFAULT_WEBGL,"browser"),_colorSpaceMap);exports.colorSpaceMap=colorSpaceMap;var depthFuncMap=(_defineProperty(_depthFuncMap={},_core.gl.NEVER,"never"),_defineProperty(_depthFuncMap,_core.gl.ALWAYS,"always"),_defineProperty(_depthFuncMap,_core.gl.LESS,"less"),_defineProperty(_depthFuncMap,_core.gl.LEQUAL,"lequal"),_defineProperty(_depthFuncMap,_core.gl.GREATER,"greater"),_defineProperty(_depthFuncMap,_core.gl.GEQUAL,"gequal"),_defineProperty(_depthFuncMap,_core.gl.EQUAL,"equal"),_defineProperty(_depthFuncMap,_core.gl.NOTEQUAL,"notequal"),_depthFuncMap);exports.depthFuncMap=depthFuncMap;var blendEquationMap=(_defineProperty(_blendEquationMap={},_core.gl.FUNC_ADD,"add"),_defineProperty(_blendEquationMap,_core.gl.FUNC_SUBTRACT,"subtract"),_defineProperty(_blendEquationMap,_core.gl.FUNC_REVERSE_SUBTRACT,"reverse subtract"),_blendEquationMap);exports.blendEquationMap=blendEquationMap;var blendFuncMap=(_defineProperty(_blendFuncMap={},_core.gl.ZERO,"zero"),_defineProperty(_blendFuncMap,_core.gl.ONE,"one"),_defineProperty(_blendFuncMap,_core.gl.SRC_COLOR,"src color"),_defineProperty(_blendFuncMap,_core.gl.ONE_MINUS_SRC_COLOR,"one minus src color"),_defineProperty(_blendFuncMap,_core.gl.SRC_ALPHA,"src alpha"),_defineProperty(_blendFuncMap,_core.gl.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),_defineProperty(_blendFuncMap,_core.gl.DST_COLOR,"dst color"),_defineProperty(_blendFuncMap,_core.gl.ONE_MINUS_DST_COLOR,"one minus dst color"),_defineProperty(_blendFuncMap,_core.gl.DST_ALPHA,"dst alpha"),_defineProperty(_blendFuncMap,_core.gl.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),_defineProperty(_blendFuncMap,_core.gl.CONSTANT_COLOR,"constant color"),_defineProperty(_blendFuncMap,_core.gl.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),_defineProperty(_blendFuncMap,_core.gl.CONSTANT_ALPHA,"constant alpha"),_defineProperty(_blendFuncMap,_core.gl.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),_defineProperty(_blendFuncMap,_core.gl.SRC_ALPHA_SATURATE,"src alpha saturate"),_blendFuncMap);exports.blendFuncMap=blendFuncMap;var stencilFuncMap=(_defineProperty(_stencilFuncMap={},_core.gl.NEVER,"never"),_defineProperty(_stencilFuncMap,_core.gl.ALWAYS,"always"),_defineProperty(_stencilFuncMap,_core.gl.LESS,"less"),_defineProperty(_stencilFuncMap,_core.gl.LEQUAL,"lequal"),_defineProperty(_stencilFuncMap,_core.gl.GREATER,"greater"),_defineProperty(_stencilFuncMap,_core.gl.GEQUAL,"gequal"),_defineProperty(_stencilFuncMap,_core.gl.EQUAL,"equal"),_defineProperty(_stencilFuncMap,_core.gl.NOTEQUAL,"notequal"),_stencilFuncMap);exports.stencilFuncMap=stencilFuncMap;var stencilOpMap=(_defineProperty(_stencilOpMap={},_core.gl.ZERO,"zero"),_defineProperty(_stencilOpMap,_core.gl.KEEP,"keep"),_defineProperty(_stencilOpMap,_core.gl.REPLACE,"replace"),_defineProperty(_stencilOpMap,_core.gl.INVERT,"invert"),_defineProperty(_stencilOpMap,_core.gl.INCR,"increment"),_defineProperty(_stencilOpMap,_core.gl.DECR,"decrement"),_defineProperty(_stencilOpMap,_core.gl.INCR_WRAP,"increment wrap"),_defineProperty(_stencilOpMap,_core.gl.DECR_WRAP,"decrement wrap"),_stencilOpMap);exports.stencilOpMap=stencilOpMap;var cullFaceMap=(_defineProperty(_cullFaceMap={},_core.gl.FRONT,"front"),_defineProperty(_cullFaceMap,_core.gl.BACK,"back"),_cullFaceMap);exports.cullFaceMap=cullFaceMap},25:function(module,exports,__webpack_require__){"use strict";__webpack_require__(9),__webpack_require__(4),__webpack_require__(0),__webpack_require__(24),__webpack_require__(11),__webpack_require__(2),__webpack_require__(5),__webpack_require__(80),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0});var _exportNames={container:!0,lazyInject:!0,lazyMultiInject:!0,ClearPass:!0,MultiPassRenderer:!0,PixelPickingPass:!0,RenderPass:!0,TAAPass:!0,TYPES:!0,packCircleVertex:!0};Object.defineProperty(exports,"container",{enumerable:!0,get:function get(){return _inversify.default}}),Object.defineProperty(exports,"lazyInject",{enumerable:!0,get:function get(){return _inversify.lazyInject}}),Object.defineProperty(exports,"lazyMultiInject",{enumerable:!0,get:function get(){return _inversify.lazyMultiInject}}),Object.defineProperty(exports,"ClearPass",{enumerable:!0,get:function get(){return _ClearPass.default}}),Object.defineProperty(exports,"MultiPassRenderer",{enumerable:!0,get:function get(){return _MultiPassRenderer.default}}),Object.defineProperty(exports,"PixelPickingPass",{enumerable:!0,get:function get(){return _PixelPickingPass.default}}),Object.defineProperty(exports,"RenderPass",{enumerable:!0,get:function get(){return _RenderPass.default}}),Object.defineProperty(exports,"TAAPass",{enumerable:!0,get:function get(){return _TAAPass.default}}),Object.defineProperty(exports,"TYPES",{enumerable:!0,get:function get(){return _types.TYPES}}),Object.defineProperty(exports,"packCircleVertex",{enumerable:!0,get:function get(){return _vertexCompression.packCircleVertex}});var _inversify=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}(__webpack_require__(754)),_ClearPass=_interopRequireDefault(__webpack_require__(886)),_MultiPassRenderer=_interopRequireDefault(__webpack_require__(887)),_PixelPickingPass=_interopRequireDefault(__webpack_require__(889)),_RenderPass=_interopRequireDefault(__webpack_require__(890)),_TAAPass=_interopRequireDefault(__webpack_require__(891)),_types=__webpack_require__(55),_vertexCompression=__webpack_require__(892),_ILayerService=__webpack_require__(894);Object.keys(_ILayerService).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _ILayerService[key]}})}));var _IStyleAttributeService=__webpack_require__(895);Object.keys(_IStyleAttributeService).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _IStyleAttributeService[key]}})}));var _ISourceService=__webpack_require__(896);Object.keys(_ISourceService).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _ISourceService[key]}})}));var _IMapService=__webpack_require__(897);Object.keys(_IMapService).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _IMapService[key]}})}));var _ICoordinateSystemService=__webpack_require__(412);Object.keys(_ICoordinateSystemService).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _ICoordinateSystemService[key]}})}));var _IRendererService=__webpack_require__(898);Object.keys(_IRendererService).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _IRendererService[key]}})}));var _ICameraService=__webpack_require__(899);Object.keys(_ICameraService).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _ICameraService[key]}})}));var _IConfigService=__webpack_require__(900);Object.keys(_IConfigService).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _IConfigService[key]}})}));var _ISceneService=__webpack_require__(901);Object.keys(_ISceneService).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _ISceneService[key]}})}));var _IShaderModuleService=__webpack_require__(902);Object.keys(_IShaderModuleService).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _IShaderModuleService[key]}})}));var _IIconService=__webpack_require__(903);Object.keys(_IIconService).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _IIconService[key]}})}));var _IFontService=__webpack_require__(904);Object.keys(_IFontService).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _IFontService[key]}})}));var _IControlService=__webpack_require__(905);Object.keys(_IControlService).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _IControlService[key]}})}));var _IMarkerService=__webpack_require__(906);Object.keys(_IMarkerService).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _IMarkerService[key]}})}));var _IPopUpService=__webpack_require__(907);Object.keys(_IPopUpService).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _IPopUpService[key]}})}));var _ILogService=__webpack_require__(908);Object.keys(_ILogService).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _ILogService[key]}})}));var _IInteractionService=__webpack_require__(298);Object.keys(_IInteractionService).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _IInteractionService[key]}})}));var _IAttribute=__webpack_require__(909);Object.keys(_IAttribute).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _IAttribute[key]}})}));var _IBuffer=__webpack_require__(910);Object.keys(_IBuffer).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _IBuffer[key]}})}));var _IElements=__webpack_require__(911);Object.keys(_IElements).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _IElements[key]}})}));var _IFramebuffer=__webpack_require__(912);Object.keys(_IFramebuffer).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _IFramebuffer[key]}})}));var _IModel=__webpack_require__(913);Object.keys(_IModel).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _IModel[key]}})}));var _IMultiPassRenderer=__webpack_require__(129);Object.keys(_IMultiPassRenderer).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _IMultiPassRenderer[key]}})}));var _IRenderbuffer=__webpack_require__(914);Object.keys(_IRenderbuffer).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _IRenderbuffer[key]}})}));var _ITexture2D=__webpack_require__(915);Object.keys(_ITexture2D).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _ITexture2D[key]}})}));var _IUniform=__webpack_require__(916);Object.keys(_IUniform).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _IUniform[key]}})}));var _gl=__webpack_require__(173);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}Object.keys(_gl).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _gl[key]}})}))},298:function(module,exports,__webpack_require__){"use strict";var InteractionEvent;__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.InteractionEvent=void 0,exports.InteractionEvent=InteractionEvent,function(InteractionEvent){InteractionEvent.Hover="hover",InteractionEvent.Click="click"}(InteractionEvent||(exports.InteractionEvent=InteractionEvent={}))},299:function(module){module.exports=JSON.parse('{"type":"FeatureCollection","features":[{"type":"Feature","properties":{"scalerank":5,"name":"South West Cape","comment":null,"name_alt":null,"lat_y":-43.510984,"long_x":146.054227,"region":"Oceania","subregion":"Australia","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[146.03379804609568,-43.5404025683706]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Howe","comment":null,"name_alt":null,"lat_y":-37.488775,"long_x":149.95853,"region":"Oceania","subregion":"Australia","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[149.95838463633373,-37.48894622188092]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Otway","comment":null,"name_alt":null,"lat_y":-38.857622,"long_x":143.565403,"region":"Oceania","subregion":"Australia","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[143.537005108191,-38.85472383068997]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Jaffa","comment":null,"name_alt":null,"lat_y":-36.944244,"long_x":139.690866,"region":"Oceania","subregion":"Australia","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[139.68061977964746,-36.95624316107086]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Carnot","comment":null,"name_alt":null,"lat_y":-34.920233,"long_x":135.656027,"region":"Oceania","subregion":"Australia","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[135.65378326897053,-34.93870859313661]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Byron","comment":null,"name_alt":null,"lat_y":-28.658282,"long_x":153.632849,"region":"Oceania","subregion":"Australia","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[153.62799176015545,-28.66197417050363]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Manifold","comment":null,"name_alt":null,"lat_y":-22.702081,"long_x":150.811228,"region":"Oceania","subregion":"Australia","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[150.81116783945873,-22.702080987505923]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape York","comment":null,"name_alt":null,"lat_y":-10.710859,"long_x":142.522018,"region":"Oceania","subregion":"Australia","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[142.52173912852123,-10.710747979693423]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Melville","comment":null,"name_alt":null,"lat_y":-14.163629,"long_x":144.506417,"region":"Oceania","subregion":"Australia","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[144.50660240977123,-14.163506768755923]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Arnhem","comment":null,"name_alt":null,"lat_y":-12.337984,"long_x":136.952429,"region":"Oceania","subregion":"Australia","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[136.91481885262823,-12.295662864626316]}},{"type":"Feature","properties":{"scalerank":5,"name":"West Cape Howe","comment":null,"name_alt":null,"lat_y":-35.104301,"long_x":117.597011,"region":"Oceania","subregion":"Australia","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[117.59693444102123,-35.10430266719342]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Leeuwin","comment":null,"name_alt":null,"lat_y":-34.297841,"long_x":115.10633,"region":"Oceania","subregion":"Australia","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[115.1280088910596,-34.328007092559645]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Pasley","comment":null,"name_alt":null,"lat_y":-33.929054,"long_x":123.517283,"region":"Oceania","subregion":"Australia","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[123.51722252695873,-33.92888762813092]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Londonderry","comment":null,"name_alt":null,"lat_y":-13.713856,"long_x":126.964514,"region":"Oceania","subregion":"Australia","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[126.94130045687105,-13.74290642667802]}},{"type":"Feature","properties":{"scalerank":5,"name":"Steep Point","comment":null,"name_alt":null,"lat_y":-26.16822,"long_x":113.169959,"region":"Oceania","subregion":"Australia","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[113.14519563289093,-26.157463616878637]}},{"type":"Feature","properties":{"scalerank":5,"name":"North West Cape","comment":null,"name_alt":null,"lat_y":-21.809776,"long_x":114.117534,"region":"Oceania","subregion":"Australia","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[114.16010761213809,-21.801474697071743]}},{"type":"Feature","properties":{"scalerank":4,"name":"Lands End","comment":null,"name_alt":null,"lat_y":50.069677,"long_x":-5.668629,"region":"Europe","subregion":"British Isles","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-5.668629523822517,50.06970856327533]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cabo Gracias a Dios","comment":null,"name_alt":null,"lat_y":14.994242,"long_x":-83.15866,"region":"North America","subregion":"Central America","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-83.15874182851002,14.994208074994077]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Brewster","comment":null,"name_alt":null,"lat_y":70.150754,"long_x":-22.122616,"region":"North America","subregion":"Greenland","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-22.122731086322517,70.15088532108783]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Morris Jesup","comment":null,"name_alt":null,"lat_y":83.626331,"long_x":-32.491541,"region":"North America","subregion":"Greenland","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-32.49150550038502,83.62628815311908]}},{"type":"Feature","properties":{"scalerank":4,"name":"Cape York","comment":null,"name_alt":null,"lat_y":76.218919,"long_x":-68.218612,"region":"North America","subregion":"Greenland","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-68.21861731679127,76.21887848515033]}},{"type":"Feature","properties":{"scalerank":4,"name":"Nunap Isua","comment":null,"name_alt":"Cape Farewell","lat_y":59.862583,"long_x":-43.90088,"region":"North America","subregion":"Greenland","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-43.90080725819752,59.86267731327533]}},{"type":"Feature","properties":{"scalerank":6,"name":"Rifstangi","comment":null,"name_alt":null,"lat_y":66.530766,"long_x":-16.126417,"region":"Europe","subregion":"Iceland","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-16.148503201808108,66.53076813358783]}},{"type":"Feature","properties":{"scalerank":5,"name":"Grmsey","comment":null,"name_alt":null,"lat_y":66.669359,"long_x":-18.251096,"region":"Europe","subregion":"Iceland","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-18.251088019916267,66.66937897343158]}},{"type":"Feature","properties":{"scalerank":5,"name":"Surtsey","comment":null,"name_alt":null,"lat_y":63.217764,"long_x":-20.434929,"region":"Europe","subregion":"Iceland","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-20.434803840228767,63.21771881718158]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cap Est","comment":null,"name_alt":null,"lat_y":-15.274849,"long_x":50.499889,"region":"Africa","subregion":"Indian Ocean","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[50.49976647227123,-15.274956964068423]}},{"type":"Feature","properties":{"scalerank":4,"name":"Cape Vohimena","comment":null,"name_alt":null,"lat_y":-25.546355,"long_x":45.158683,"region":"Africa","subregion":"Indian Ocean","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[45.15870201914623,-25.546319268755923]}},{"type":"Feature","properties":{"scalerank":7,"name":"Rodrigues","comment":null,"name_alt":null,"lat_y":-19.702241,"long_x":66.54263,"region":"Seven seas (open ocean)","subregion":"Indian Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[66.54273522227123,-19.702203057818423]}},{"type":"Feature","properties":{"scalerank":7,"name":"Diego Garcia","comment":null,"name_alt":null,"lat_y":-19.702241,"long_x":66.54263,"region":"Seven seas (open ocean)","subregion":"Indian Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[72.44202721445873,-7.332207940630923]}},{"type":"Feature","properties":{"scalerank":6,"name":"I. Clarión","comment":null,"name_alt":null,"lat_y":18.345725,"long_x":-114.749992,"region":"Seven seas (open ocean)","subregion":"North Pacific Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-114.74998938710377,18.345770574994077]}},{"type":"Feature","properties":{"scalerank":6,"name":"I. Socorro","comment":null,"name_alt":null,"lat_y":18.786694,"long_x":-110.992912,"region":"Seven seas (open ocean)","subregion":"North Pacific Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-110.99290930897877,18.786810614056577]}},{"type":"Feature","properties":{"scalerank":7,"name":"Tikopia","comment":null,"name_alt":null,"lat_y":-12.28881,"long_x":168.833542,"region":"Oceania","subregion":"Melanesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[168.83362877695873,-12.288750909380923]}},{"type":"Feature","properties":{"scalerank":6,"name":"Norfolk I.","comment":null,"name_alt":null,"lat_y":-29.02416,"long_x":167.960052,"region":"Oceania","subregion":"Melanesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[167.96009362070873,-29.024102471880923]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Cretin","comment":null,"name_alt":null,"lat_y":-6.637492,"long_x":147.852392,"region":"Oceania","subregion":"Melanesia","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[147.85242760508373,-6.637261651568423]}},{"type":"Feature","properties":{"scalerank":5,"name":"Îles Chesterfield","comment":null,"name_alt":null,"lat_y":-19.20447,"long_x":159.95171,"region":"Oceania","subregion":"Melanesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[159.95167076914623,-19.204644464068423]}},{"type":"Feature","properties":{"scalerank":7,"name":"Lamotrek","comment":null,"name_alt":null,"lat_y":7.509727,"long_x":146.333084,"region":"Oceania","subregion":"Micronesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[146.33301842539623,7.509711004681577]}},{"type":"Feature","properties":{"scalerank":7,"name":"Kosrae","comment":null,"name_alt":null,"lat_y":5.329221,"long_x":162.974172,"region":"Oceania","subregion":"Micronesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[162.97413170664623,5.329169012494077]}},{"type":"Feature","properties":{"scalerank":7,"name":"Arorea","comment":null,"name_alt":null,"lat_y":-2.617755,"long_x":176.81264,"region":"Oceania","subregion":"Micronesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[176.81263268320873,-2.617852471880923]}},{"type":"Feature","properties":{"scalerank":7,"name":"Pingelap","comment":null,"name_alt":null,"lat_y":6.22951,"long_x":160.702931,"region":"Oceania","subregion":"Micronesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[160.70289147227123,6.229681707806577]}},{"type":"Feature","properties":{"scalerank":7,"name":"Kapingamarangi","comment":null,"name_alt":null,"lat_y":1.079429,"long_x":154.781328,"region":"Oceania","subregion":"Micronesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[154.78138268320873,1.079474188275327]}},{"type":"Feature","properties":{"scalerank":7,"name":"Agrihan","comment":null,"name_alt":null,"lat_y":18.777332,"long_x":145.670369,"region":"Oceania","subregion":"Micronesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[145.67042076914623,18.777411199994077]}},{"type":"Feature","properties":{"scalerank":7,"name":"Asuncion","comment":null,"name_alt":null,"lat_y":19.688654,"long_x":145.40141,"region":"Oceania","subregion":"Micronesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[145.40125573008373,19.688666082806577]}},{"type":"Feature","properties":{"scalerank":7,"name":"Wotje","comment":null,"name_alt":null,"lat_y":9.451143,"long_x":170.012255,"region":"Oceania","subregion":"Micronesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[170.01209557383373,9.451300360150327]}},{"type":"Feature","properties":{"scalerank":7,"name":"Bikar","comment":null,"name_alt":null,"lat_y":12.243519,"long_x":170.120691,"region":"Oceania","subregion":"Micronesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[170.12061608164623,12.243597723431577]}},{"type":"Feature","properties":{"scalerank":5,"name":"Pagan","comment":null,"name_alt":null,"lat_y":18.119631,"long_x":145.785087,"region":"Oceania","subregion":"Micronesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[145.78492272227123,18.119635321087827]}},{"type":"Feature","properties":{"scalerank":5,"name":"Wake I.","comment":null,"name_alt":null,"lat_y":19.303497,"long_x":166.63626,"region":"Oceania","subregion":"Micronesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[166.63624108164623,19.303595282025327]}},{"type":"Feature","properties":{"scalerank":5,"name":"Tabiteuea","comment":null,"name_alt":null,"lat_y":-1.201405,"long_x":174.755207,"region":"Oceania","subregion":"Micronesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[174.75513756602123,-1.201348565630923]}},{"type":"Feature","properties":{"scalerank":5,"name":"Aranuka","comment":null,"name_alt":null,"lat_y":0.226766,"long_x":173.626286,"region":"Oceania","subregion":"Micronesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[173.62623131602123,0.226752020306577]}},{"type":"Feature","properties":{"scalerank":5,"name":"Nauru","comment":null,"name_alt":null,"lat_y":-0.505856,"long_x":166.930778,"region":"Oceania","subregion":"Micronesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[166.93067467539623,-0.505791925005923]}},{"type":"Feature","properties":{"scalerank":5,"name":"Ebon","comment":null,"name_alt":null,"lat_y":4.59977,"long_x":168.736432,"region":"Oceania","subregion":"Micronesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[168.73633873789623,4.599798895306577]}},{"type":"Feature","properties":{"scalerank":5,"name":"Jaluit","comment":null,"name_alt":null,"lat_y":5.964455,"long_x":169.682894,"region":"Oceania","subregion":"Micronesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[169.68299401133373,5.964483953900327]}},{"type":"Feature","properties":{"scalerank":5,"name":"Mili","comment":null,"name_alt":null,"lat_y":6.107334,"long_x":171.725875,"region":"Oceania","subregion":"Micronesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[171.72584069102123,6.107489324994077]}},{"type":"Feature","properties":{"scalerank":5,"name":"Majuro","comment":null,"name_alt":null,"lat_y":7.118009,"long_x":171.159743,"region":"Oceania","subregion":"Micronesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[171.15980065195873,7.117987371869077]}},{"type":"Feature","properties":{"scalerank":5,"name":"Ailinglapalap","comment":null,"name_alt":null,"lat_y":7.276392,"long_x":168.596926,"region":"Oceania","subregion":"Micronesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[168.59693444102123,7.276495672650327]}},{"type":"Feature","properties":{"scalerank":5,"name":"Kwajalein","comment":null,"name_alt":null,"lat_y":8.746619,"long_x":167.735072,"region":"Oceania","subregion":"Micronesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[167.73511803477123,8.746710516400327]}},{"type":"Feature","properties":{"scalerank":5,"name":"Rongelap","comment":null,"name_alt":null,"lat_y":11.164329,"long_x":166.869876,"region":"Oceania","subregion":"Micronesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[166.86988365977123,11.164496160931577]}},{"type":"Feature","properties":{"scalerank":5,"name":"Bikini","comment":null,"name_alt":null,"lat_y":11.639231,"long_x":165.550698,"region":"Oceania","subregion":"Micronesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[165.55042565195873,11.639288641400327]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Reinga","comment":null,"name_alt":null,"lat_y":-34.432767,"long_x":172.7285,"region":"Oceania","subregion":"New Zealand","featureclass":"cape"},"geometry":{"type":"Point","coordinates":[172.70558117137455,-34.42039113947056]}},{"type":"Feature","properties":{"scalerank":7,"name":"Necker","comment":null,"name_alt":null,"lat_y":23.586649,"long_x":-164.704743,"region":"Oceania","subregion":"Polynesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-164.70470130116627,23.586676336712827]}},{"type":"Feature","properties":{"scalerank":7,"name":"Laysan","comment":null,"name_alt":null,"lat_y":25.776083,"long_x":-171.733589,"region":"Oceania","subregion":"Polynesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-171.73363196522877,25.776007391400327]}},{"type":"Feature","properties":{"scalerank":7,"name":"Kure Atoll","comment":null,"name_alt":null,"lat_y":28.440992,"long_x":-178.319207,"region":"Oceania","subregion":"Polynesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-178.31920325429127,28.440985418744077]}},{"type":"Feature","properties":{"scalerank":7,"name":"Nikumaroro","comment":null,"name_alt":null,"lat_y":-4.644675,"long_x":-174.53143,"region":"Oceania","subregion":"Polynesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-174.53142249257252,-4.644707940630923]}},{"type":"Feature","properties":{"scalerank":7,"name":"Howland I.","comment":null,"name_alt":null,"lat_y":0.814266,"long_x":-176.638313,"region":"Oceania","subregion":"Polynesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-176.63829505116627,0.814276434369077]}},{"type":"Feature","properties":{"scalerank":7,"name":"Palmyra Atoll","comment":null,"name_alt":null,"lat_y":5.879013,"long_x":-162.09929,"region":"Oceania","subregion":"Polynesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-162.09923255116627,5.879095770306577]}},{"type":"Feature","properties":{"scalerank":7,"name":"Jarvis","comment":null,"name_alt":null,"lat_y":-0.368919,"long_x":-160.020814,"region":"Oceania","subregion":"Polynesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-160.02080237538502,-0.368951104693423]}},{"type":"Feature","properties":{"scalerank":7,"name":"Takutea","comment":null,"name_alt":null,"lat_y":-19.8026,"long_x":-158.294405,"region":"Oceania","subregion":"Polynesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-158.29430091054127,-19.802666925005923]}},{"type":"Feature","properties":{"scalerank":7,"name":"Rakahanga","comment":null,"name_alt":null,"lat_y":-10.022892,"long_x":-161.081621,"region":"Oceania","subregion":"Polynesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-161.08171546132252,-10.022881768755923]}},{"type":"Feature","properties":{"scalerank":7,"name":"Raroia","comment":null,"name_alt":null,"lat_y":-16.054416,"long_x":-142.509609,"region":"Oceania","subregion":"Polynesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-142.50963294179127,-16.054253839068423]}},{"type":"Feature","properties":{"scalerank":7,"name":"Rapa","comment":null,"name_alt":null,"lat_y":-27.587603,"long_x":-144.328315,"region":"Oceania","subregion":"Polynesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-144.32823645741627,-27.587456964068423]}},{"type":"Feature","properties":{"scalerank":7,"name":"Mangareva","comment":null,"name_alt":null,"lat_y":-23.102464,"long_x":-134.985909,"region":"Oceania","subregion":"Polynesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-134.98582923085377,-23.102593682818423]}},{"type":"Feature","properties":{"scalerank":7,"name":"Henderson I.","comment":null,"name_alt":null,"lat_y":-24.349847,"long_x":-128.317479,"region":"Oceania","subregion":"Polynesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-128.31755530507252,-24.349663995318423]}},{"type":"Feature","properties":{"scalerank":7,"name":"Nanumea","comment":null,"name_alt":null,"lat_y":-5.67562,"long_x":176.137639,"region":"Oceania","subregion":"Polynesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[176.13770592539623,-5.675591729693423]}},{"type":"Feature","properties":{"scalerank":7,"name":"Niulakita","comment":null,"name_alt":null,"lat_y":-10.750687,"long_x":179.497571,"region":"Oceania","subregion":"Polynesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[179.49756920664623,-10.750664971880923]}},{"type":"Feature","properties":{"scalerank":6,"name":"The Snares","comment":null,"name_alt":null,"lat_y":-48.017042,"long_x":166.588946,"region":"Oceania","subregion":"New Zealand","featureclass":"island"},"geometry":{"type":"Point","coordinates":[166.58887780039623,-48.01690032344342]}},{"type":"Feature","properties":{"scalerank":5,"name":"Kanton","comment":null,"name_alt":null,"lat_y":-2.757106,"long_x":-171.71703,"region":"Oceania","subregion":"Polynesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-171.71703040272877,-2.757134698443423]}},{"type":"Feature","properties":{"scalerank":5,"name":"Tabuaeran","comment":null,"name_alt":"Fanning I.","lat_y":3.866545,"long_x":-159.326781,"region":"Oceania","subregion":"Polynesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-159.32683264882252,3.866705633587827]}},{"type":"Feature","properties":{"scalerank":5,"name":"Malden","comment":null,"name_alt":null,"lat_y":-4.042491,"long_x":-154.983478,"region":"Oceania","subregion":"Polynesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-154.98350989491627,-4.042657159380923]}},{"type":"Feature","properties":{"scalerank":5,"name":"Rarotonga","comment":null,"name_alt":null,"lat_y":-21.201867,"long_x":-159.797637,"region":"Oceania","subregion":"Polynesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-159.79771887929127,-21.201836846880923]}},{"type":"Feature","properties":{"scalerank":5,"name":"Rangiroa","comment":null,"name_alt":null,"lat_y":-15.2046,"long_x":-147.773967,"region":"Oceania","subregion":"Polynesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-147.77403723866627,-15.204766534380923]}},{"type":"Feature","properties":{"scalerank":5,"name":"Funafuti","comment":null,"name_alt":null,"lat_y":-8.491577,"long_x":179.19841,"region":"Oceania","subregion":"Polynesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[179.19837487070873,-8.491631768755923]}},{"type":"Feature","properties":{"scalerank":4,"name":"Vavau","comment":null,"name_alt":null,"lat_y":-18.590062,"long_x":-173.976769,"region":"Oceania","subregion":"Polynesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-173.97673499257252,-18.590020440630923]}},{"type":"Feature","properties":{"scalerank":4,"name":"I. de Pascua","comment":null,"name_alt":"Easter I.","lat_y":-27.102117,"long_x":-109.367953,"region":"Oceania","subregion":"Polynesia","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-109.36790930897877,-27.102227471880923]}},{"type":"Feature","properties":{"scalerank":5,"name":"St. Croix","comment":null,"name_alt":null,"lat_y":17.762944,"long_x":-64.763088,"region":"North America","subregion":"West Indies","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-64.76317298085377,17.763006903119077]}},{"type":"Feature","properties":{"scalerank":5,"name":"Grand Cayman","comment":null,"name_alt":null,"lat_y":19.315829,"long_x":-81.271416,"region":"North America","subregion":"West Indies","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-81.27159583241627,19.315802313275327]}},{"type":"Feature","properties":{"scalerank":5,"name":"San  Salvador","comment":null,"name_alt":null,"lat_y":24.052793,"long_x":-74.492848,"region":"North America","subregion":"West Indies","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-74.49290930897877,24.052801824994077]}},{"type":"Feature","properties":{"scalerank":5,"name":"Grenada","comment":null,"name_alt":null,"lat_y":12.105978,"long_x":-61.723079,"region":"North America","subregion":"West Indies","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-61.72319495351002,12.105963446087827]}},{"type":"Feature","properties":{"scalerank":5,"name":"Barbuda","comment":null,"name_alt":null,"lat_y":17.622525,"long_x":-61.789243,"region":"North America","subregion":"West Indies","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-61.78929602772877,17.622626043744077]}},{"type":"Feature","properties":{"scalerank":5,"name":"Antigua","comment":null,"name_alt":null,"lat_y":17.040441,"long_x":-61.775982,"region":"North America","subregion":"West Indies","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-61.77592932851002,17.040594793744077]}},{"type":"Feature","properties":{"scalerank":5,"name":"Guadeloupe","comment":null,"name_alt":null,"lat_y":16.180583,"long_x":-61.656947,"region":"North America","subregion":"West Indies","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-61.65703284413502,16.180670477337827]}},{"type":"Feature","properties":{"scalerank":5,"name":"Dominica","comment":null,"name_alt":null,"lat_y":15.452943,"long_x":-61.352652,"region":"North America","subregion":"West Indies","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-61.35271155507252,15.452887274212827]}},{"type":"Feature","properties":{"scalerank":5,"name":"Martinique","comment":null,"name_alt":null,"lat_y":14.672462,"long_x":-61.008715,"region":"North America","subregion":"West Indies","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-61.00883948476002,14.672491766400327]}},{"type":"Feature","properties":{"scalerank":5,"name":"Saint Lucia","comment":null,"name_alt":null,"lat_y":13.918332,"long_x":-60.982225,"region":"North America","subregion":"West Indies","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-60.98222815663502,13.918280340619077]}},{"type":"Feature","properties":{"scalerank":5,"name":"Saint Vincent","comment":null,"name_alt":null,"lat_y":13.270131,"long_x":-61.207143,"region":"North America","subregion":"West Indies","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-61.20720374257252,13.270209051556577]}},{"type":"Feature","properties":{"scalerank":5,"name":"Barbados","comment":null,"name_alt":null,"lat_y":13.164326,"long_x":-59.566742,"region":"North America","subregion":"West Indies","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-59.56682288319752,13.164252020306577]}},{"type":"Feature","properties":{"scalerank":5,"name":"Tobago","comment":null,"name_alt":null,"lat_y":11.259334,"long_x":-60.677992,"region":"South America","subregion":"West Indies","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-60.67808997304127,11.259283758587827]}},{"type":"Feature","properties":{"scalerank":5,"name":"Margarita","comment":null,"name_alt":null,"lat_y":10.981467,"long_x":-64.051401,"region":"South America","subregion":"West Indies","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-64.05144202382252,10.981512762494077]}},{"type":"Feature","properties":{"scalerank":5,"name":"Curaao","comment":null,"name_alt":null,"lat_y":12.185355,"long_x":-68.999109,"region":"North America","subregion":"West Indies","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-68.99919593007252,12.185309149212827]}},{"type":"Feature","properties":{"scalerank":5,"name":"Aruba","comment":null,"name_alt":null,"lat_y":12.502849,"long_x":-69.96488,"region":"North America","subregion":"West Indies","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-69.96501624257252,12.502752996869077]}},{"type":"Feature","properties":{"scalerank":5,"name":"Ras Banäs","comment":null,"name_alt":null,"lat_y":23.950592,"long_x":35.778059,"region":"Africa","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[35.77808678477123,23.950628973431577]}},{"type":"Feature","properties":{"scalerank":5,"name":"Ponta das Salinas","comment":null,"name_alt":null,"lat_y":-12.832908,"long_x":12.928991,"region":"Africa","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[12.968705086077254,-12.855718342716505]}},{"type":"Feature","properties":{"scalerank":5,"name":"Ponta das Palmeirinhas","comment":null,"name_alt":null,"lat_y":-9.071387,"long_x":12.999549,"region":"Africa","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[13.033811372274608,-9.099938228394153]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cabo Bojador","comment":null,"name_alt":null,"lat_y":26.157836,"long_x":-14.473111,"region":"Africa","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-14.473194953510017,26.157965399212827]}},{"type":"Feature","properties":{"scalerank":4,"name":"Cape Agulhas","comment":null,"name_alt":null,"lat_y":-34.801182,"long_x":19.993472,"region":"Africa","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[19.993418816021233,-34.80108001094342]}},{"type":"Feature","properties":{"scalerank":3,"name":"Gees Gwardafuy","comment":null,"name_alt":null,"lat_y":11.812855,"long_x":51.235173,"region":"Africa","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[51.258313644180184,11.822028799226407]}},{"type":"Feature","properties":{"scalerank":3,"name":"Victoria Falls","comment":null,"name_alt":null,"lat_y":-17.77079,"long_x":25.460133,"region":"Africa","subregion":null,"featureclass":"waterfall"},"geometry":{"type":"Point","coordinates":[25.852793816021233,-17.928033135943423]}},{"type":"Feature","properties":{"scalerank":6,"name":"Novyy I.","comment":null,"name_alt":null,"lat_y":-50.959168,"long_x":-72.995002,"region":"Antarctica","subregion":null,"featureclass":"island"},"geometry":{"type":"Point","coordinates":[-2.811695930072517,-70.86150481563092]}},{"type":"Feature","properties":{"scalerank":6,"name":"Lyddan I.","comment":null,"name_alt":null,"lat_y":-50.959168,"long_x":-72.995002,"region":"Antarctica","subregion":null,"featureclass":"island"},"geometry":{"type":"Point","coordinates":[-20.902027961322517,-74.11870696406842]}},{"type":"Feature","properties":{"scalerank":6,"name":"Verblyud I.","comment":null,"name_alt":null,"lat_y":-50.959168,"long_x":-72.995002,"region":"Antarctica","subregion":null,"featureclass":"island"},"geometry":{"type":"Point","coordinates":[16.049937370708733,-69.88189055781842]}},{"type":"Feature","properties":{"scalerank":6,"name":"Coulman I.","comment":null,"name_alt":null,"lat_y":-50.959168,"long_x":-72.995002,"region":"Antarctica","subregion":null,"featureclass":"island"},"geometry":{"type":"Point","coordinates":[169.73536217539623,-73.50945403438092]}},{"type":"Feature","properties":{"scalerank":6,"name":"Minna Hook","comment":null,"name_alt":null,"lat_y":-50.959168,"long_x":-72.995002,"region":"Antarctica","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[167.25318444102123,-78.63811614375592]}},{"type":"Feature","properties":{"scalerank":3,"name":"Wright I.","comment":null,"name_alt":null,"lat_y":-50.959168,"long_x":-72.995002,"region":"Antarctica","subregion":null,"featureclass":"island"},"geometry":{"type":"Point","coordinates":[-116.89262854726002,-74.06670501094342]}},{"type":"Feature","properties":{"scalerank":3,"name":"Grant I.","comment":null,"name_alt":null,"lat_y":-50.959168,"long_x":-72.995002,"region":"Antarctica","subregion":null,"featureclass":"island"},"geometry":{"type":"Point","coordinates":[-131.48540198476002,-74.48272063594342]}},{"type":"Feature","properties":{"scalerank":3,"name":"Newman I.","comment":null,"name_alt":null,"lat_y":-50.959168,"long_x":-72.995002,"region":"Antarctica","subregion":null,"featureclass":"island"},"geometry":{"type":"Point","coordinates":[-145.68681800038502,-75.59185149531842]}},{"type":"Feature","properties":{"scalerank":3,"name":"Dean I.","comment":null,"name_alt":null,"lat_y":-50.959168,"long_x":-72.995002,"region":"Antarctica","subregion":null,"featureclass":"island"},"geometry":{"type":"Point","coordinates":[-127.63438880116627,-74.50066497188092]}},{"type":"Feature","properties":{"scalerank":6,"name":"Cape Adare","comment":null,"name_alt":null,"lat_y":-52.510412,"long_x":169.120166,"region":"Antarctica","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[170.26734223219574,-71.33025954578193]}},{"type":"Feature","properties":{"scalerank":6,"name":"Cape Poinsett","comment":null,"name_alt":null,"lat_y":-52.510412,"long_x":169.120166,"region":"Antarctica","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[113.20496666758373,-65.78606536250592]}},{"type":"Feature","properties":{"scalerank":6,"name":"Masson I.","comment":null,"name_alt":null,"lat_y":-52.510412,"long_x":169.120166,"region":"Antarctica","subregion":null,"featureclass":"island"},"geometry":{"type":"Point","coordinates":[96.63392174570873,-66.15068938594342]}},{"type":"Feature","properties":{"scalerank":6,"name":"Mikhaylov I.","comment":null,"name_alt":null,"lat_y":-52.510412,"long_x":169.120166,"region":"Antarctica","subregion":null,"featureclass":"island"},"geometry":{"type":"Point","coordinates":[85.60340416758373,-66.84026458125592]}},{"type":"Feature","properties":{"scalerank":6,"name":"Cape Norvegia","comment":null,"name_alt":null,"lat_y":-52.510412,"long_x":169.120166,"region":"Antarctica","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-12.327320930072517,-71.37249114375592]}},{"type":"Feature","properties":{"scalerank":6,"name":"Deception I.","comment":null,"name_alt":null,"lat_y":-52.510412,"long_x":169.120166,"region":"Antarctica","subregion":null,"featureclass":"island"},"geometry":{"type":"Point","coordinates":[-60.61430823476002,-62.95086028438092]}},{"type":"Feature","properties":{"scalerank":6,"name":"Cape Framnes","comment":null,"name_alt":null,"lat_y":-52.510412,"long_x":169.120166,"region":"Antarctica","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-60.59343421132252,-65.97173430781842]}},{"type":"Feature","properties":{"scalerank":6,"name":"Cape Agassiz","comment":null,"name_alt":null,"lat_y":-52.510412,"long_x":169.120166,"region":"Antarctica","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-62.87468421132252,-68.45610930781842]}},{"type":"Feature","properties":{"scalerank":6,"name":"Cape Jeremy","comment":null,"name_alt":null,"lat_y":-52.510412,"long_x":169.120166,"region":"Antarctica","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-68.79051673085377,-69.43328215938092]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Comorin","comment":null,"name_alt":null,"lat_y":8.143554,"long_x":77.471497,"region":"Asia","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[77.51210506924555,8.085338515340696]}},{"type":"Feature","properties":{"scalerank":5,"name":"Dondra Head","comment":null,"name_alt":null,"lat_y":5.947528,"long_x":80.616321,"region":"Asia","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[80.59180925571331,5.929580617022318]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Yelizavety","comment":null,"name_alt":null,"lat_y":54.416083,"long_x":142.720445,"region":"Asia","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[142.72059166758373,54.41620514530658]}},{"type":"Feature","properties":{"scalerank":5,"name":"Pt. Yuzhnyy","comment":null,"name_alt":null,"lat_y":57.733572,"long_x":156.796426,"region":"Asia","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[156.79664147227123,57.73346588749408]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Sata","comment":null,"name_alt":null,"lat_y":31.026941,"long_x":130.695089,"region":"Asia","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[130.69520104258373,31.026922918744077]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Aniva","comment":null,"name_alt":null,"lat_y":46.081706,"long_x":143.43487,"region":"Asia","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[143.43482506602123,46.08179352421283]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Terpeniya","comment":null,"name_alt":null,"lat_y":48.66928,"long_x":144.712582,"region":"Asia","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[144.71253502695873,48.66937897343158]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Lopatka","comment":null,"name_alt":null,"lat_y":50.914155,"long_x":156.651536,"region":"Asia","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[156.65162194102123,50.91412994999408]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Ozernoy","comment":null,"name_alt":null,"lat_y":57.7708,"long_x":163.246685,"region":"Asia","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[163.24683678477123,57.77088043827533]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Olyutorskiy","comment":null,"name_alt":null,"lat_y":59.960807,"long_x":170.31265,"region":"Asia","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[170.31287682383373,59.96082184452533]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Navarin","comment":null,"name_alt":null,"lat_y":62.327239,"long_x":179.074225,"region":"Asia","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[179.07422936289623,62.32727692265033]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Lopatka","comment":null,"name_alt":null,"lat_y":71.907853,"long_x":150.066042,"region":"Asia","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[150.06592858164623,71.90778229374408]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Ince","comment":null,"name_alt":null,"lat_y":42.084312,"long_x":34.983358,"region":"Asia","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[34.98328698008373,42.08417389530658]}},{"type":"Feature","properties":{"scalerank":5,"name":"Ras Fartak","comment":null,"name_alt":null,"lat_y":15.677412,"long_x":52.229105,"region":"Asia","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[52.2389696999939,15.65795249845498]}},{"type":"Feature","properties":{"scalerank":5,"name":"Ras Sharbatat","comment":null,"name_alt":null,"lat_y":18.164534,"long_x":56.56827,"region":"Asia","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[56.558165806017215,18.166986171245085]}},{"type":"Feature","properties":{"scalerank":5,"name":"Ra\'s al Had","comment":null,"name_alt":null,"lat_y":22.530158,"long_x":59.849134,"region":"Asia","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[59.7995168175437,22.518675327148298]}},{"type":"Feature","properties":{"scalerank":5,"name":"Hachijjima","comment":null,"name_alt":null,"lat_y":33.109796,"long_x":139.804903,"region":"Asia","subregion":null,"featureclass":"island"},"geometry":{"type":"Point","coordinates":[139.80482018320873,33.10980866093158]}},{"type":"Feature","properties":{"scalerank":4,"name":"Plain of Jars","comment":null,"name_alt":null,"lat_y":20.550709,"long_x":101.890532,"region":"Asia","subregion":null,"featureclass":"plain"},"geometry":{"type":"Point","coordinates":[101.89063561289623,20.550909735150327]}},{"type":"Feature","properties":{"scalerank":5,"name":"Nordkapp","comment":null,"name_alt":null,"lat_y":71.18337,"long_x":25.662398,"region":"Europe","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[25.66067519711473,71.15450206702127]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cabo de São Vicentete","comment":null,"name_alt":null,"lat_y":37.038304,"long_x":-8.969391,"region":"Europe","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-8.969410773822517,37.03827545780658]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cabo Fisterra","comment":null,"name_alt":null,"lat_y":42.952418,"long_x":-9.267837,"region":"Europe","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-9.26996282865152,42.92873605781255]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape San Blas","comment":null,"name_alt":null,"lat_y":29.713967,"long_x":-85.270961,"region":"North America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-85.27092444569752,29.713995672650327]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Sable","comment":null,"name_alt":null,"lat_y":43.469097,"long_x":-65.610769,"region":"North America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-65.61082923085377,43.46900055546283]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Bauld","comment":null,"name_alt":null,"lat_y":51.568576,"long_x":-55.430306,"region":"North America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-55.43028723866627,51.56848786015033]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape Fear","comment":null,"name_alt":null,"lat_y":33.867949,"long_x":-77.990568,"region":"North America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-77.99058997304127,33.86798737186908]}},{"type":"Feature","properties":{"scalerank":5,"name":"I. Guadalupe","comment":null,"name_alt":null,"lat_y":29.052552,"long_x":-118.317465,"region":"Seven seas (open ocean)","subregion":"North Pacific Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-118.31749426991627,29.052496649212827]}},{"type":"Feature","properties":{"scalerank":5,"name":"Miquelon","comment":null,"name_alt":null,"lat_y":46.929526,"long_x":-56.329884,"region":"North America","subregion":null,"featureclass":"island"},"geometry":{"type":"Point","coordinates":[-56.32988440663502,46.92938873905658]}},{"type":"Feature","properties":{"scalerank":4,"name":"Cabo Corrientes","comment":null,"name_alt":null,"lat_y":20.409471,"long_x":-105.683581,"region":"North America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-105.67795873874799,20.420365114940253]}},{"type":"Feature","properties":{"scalerank":4,"name":"Pt. Eugenia","comment":null,"name_alt":null,"lat_y":27.861925,"long_x":-115.07629,"region":"North America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-115.04623945046137,27.842887092585283]}},{"type":"Feature","properties":{"scalerank":4,"name":"Point Conception","comment":null,"name_alt":null,"lat_y":34.582313,"long_x":-120.659016,"region":"North America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-120.46360036202867,34.46027592467621]}},{"type":"Feature","properties":{"scalerank":4,"name":"Cape Hatteras","comment":null,"name_alt":null,"lat_y":35.437762,"long_x":-75.450543,"region":"North America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-75.54032952413311,35.24475263812895]}},{"type":"Feature","properties":{"scalerank":4,"name":"Cape Sable","comment":null,"name_alt":null,"lat_y":25.124896,"long_x":-81.090442,"region":"North America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-81.09044348866627,25.124762274212827]}},{"type":"Feature","properties":{"scalerank":4,"name":"Cape Hope","comment":null,"name_alt":null,"lat_y":68.35638,"long_x":-166.815582,"region":"North America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-166.81321268769543,68.35380207543972]}},{"type":"Feature","properties":{"scalerank":4,"name":"Point Barrow","comment":null,"name_alt":null,"lat_y":71.372637,"long_x":-156.615894,"region":"North America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-156.4719492091668,71.40589128763096]}},{"type":"Feature","properties":{"scalerank":3,"name":"Cape Canaveral","comment":null,"name_alt":null,"lat_y":28.483713,"long_x":-80.534941,"region":"North America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-80.53625603636821,28.473056814472134]}},{"type":"Feature","properties":{"scalerank":3,"name":"Cape Mendocino","comment":null,"name_alt":null,"lat_y":40.350222,"long_x":-124.323474,"region":"North America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-124.39201745043425,40.44222065537283]}},{"type":"Feature","properties":{"scalerank":3,"name":"Cabo San Lucas","comment":null,"name_alt":null,"lat_y":22.887711,"long_x":-109.969843,"region":"North America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-109.96983801991627,22.887762762494077]}},{"type":"Feature","properties":{"scalerank":3,"name":"Cape Churchill","comment":null,"name_alt":null,"lat_y":58.752014,"long_x":-93.182023,"region":"North America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-93.18211829335377,58.75208161015033]}},{"type":"Feature","properties":{"scalerank":3,"name":"Cape Cod","comment":null,"name_alt":null,"lat_y":41.734867,"long_x":-69.964865,"region":"North America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-70.03687833567446,41.9914589934385]}},{"type":"Feature","properties":{"scalerank":3,"name":"Cape May","comment":null,"name_alt":null,"lat_y":37.2017,"long_x":-75.926791,"region":"North America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-74.95121933164988,38.92969645987068]}},{"type":"Feature","properties":{"scalerank":2,"name":"Niagara Falls","comment":null,"name_alt":null,"lat_y":43.087653,"long_x":-79.044073,"region":"North America","subregion":null,"featureclass":"waterfall"},"geometry":{"type":"Point","coordinates":[-79.04411780507252,43.08771393436908]}},{"type":"Feature","properties":{"scalerank":7,"name":"I. Alejandro Selkirk","comment":null,"name_alt":null,"lat_y":-33.722178,"long_x":-80.733492,"region":"Seven seas (open ocean)","subregion":"South Pacific Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-80.73350989491627,-33.72222258906842]}},{"type":"Feature","properties":{"scalerank":7,"name":"I. San Ambrosio","comment":null,"name_alt":null,"lat_y":-26.341922,"long_x":-79.900062,"region":"Seven seas (open ocean)","subregion":"South Pacific Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-79.90001380116627,-26.341851495318423]}},{"type":"Feature","properties":{"scalerank":5,"name":"I. Robinson Crusoe","comment":null,"name_alt":null,"lat_y":-33.589852,"long_x":-78.872522,"region":"Seven seas (open ocean)","subregion":"South Pacific Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-78.87254798085377,-33.58965422969342]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cabo Orange","comment":null,"name_alt":null,"lat_y":4.125735,"long_x":-51.242144,"region":"South America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-51.26287766987179,4.135614177285231]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cabo de Santa Marta Grande","comment":null,"name_alt":null,"lat_y":-28.558078,"long_x":-48.735526,"region":"South America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-48.80338037734664,-28.57198267323537]}},{"type":"Feature","properties":{"scalerank":5,"name":"Punta del Este","comment":null,"name_alt":null,"lat_y":-34.975503,"long_x":-54.933154,"region":"South America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-54.94628769070382,-34.96658679840526]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cabo San Antonio","comment":null,"name_alt":null,"lat_y":-36.381052,"long_x":-56.655377,"region":"South America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-56.716792100626165,-36.40959917438929]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cabo Corrientes","comment":null,"name_alt":null,"lat_y":-38.135985,"long_x":-57.546212,"region":"South America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-57.56252349612641,-38.066376942128464]}},{"type":"Feature","properties":{"scalerank":5,"name":"Punta Rasa","comment":null,"name_alt":null,"lat_y":-40.834718,"long_x":-62.282201,"region":"South America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-62.25911745789756,-40.72626411656719]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cabo Dos Bahías","comment":null,"name_alt":null,"lat_y":-44.9887,"long_x":-65.615952,"region":"South America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-65.5438334451688,-44.89439847091873]}},{"type":"Feature","properties":{"scalerank":4,"name":"Punta Negra","comment":null,"name_alt":null,"lat_y":-5.948875,"long_x":-81.108252,"region":"South America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-81.10832678944752,-5.948663018755923]}},{"type":"Feature","properties":{"scalerank":4,"name":"Punta Lavapié","comment":null,"name_alt":null,"lat_y":-37.262867,"long_x":-73.606377,"region":"South America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-73.60304396243782,-37.17120002933805]}},{"type":"Feature","properties":{"scalerank":3,"name":"Cabo de Hornos","comment":null,"name_alt":"Cape Horn","lat_y":-55.862824,"long_x":-67.169425,"region":"South America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-67.16942298085377,-55.86284758906842]}},{"type":"Feature","properties":{"scalerank":2,"name":"Salto Angel","comment":null,"name_alt":"Angel Falls","lat_y":5.686836,"long_x":-62.061848,"region":"South America","subregion":null,"featureclass":"waterfall"},"geometry":{"type":"Point","coordinates":[-62.06181800038502,5.686896063275327]}},{"type":"Feature","properties":{"scalerank":2,"name":"Iguazu Falls","comment":null,"name_alt":null,"lat_y":-25.568265,"long_x":-54.582842,"region":"South America","subregion":null,"featureclass":"waterfall"},"geometry":{"type":"Point","coordinates":[-54.58299719960377,-25.568291925005923]}},{"type":"Feature","properties":{"scalerank":7,"name":"Clipperton I.","comment":null,"name_alt":null,"lat_y":10.309933,"long_x":-109.213284,"region":"Seven seas (open ocean)","subregion":"North Pacific Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-109.2295822833424,10.304020508304784]}},{"type":"Feature","properties":{"scalerank":7,"name":"Île Amsterdam","comment":null,"name_alt":null,"lat_y":-19.702241,"long_x":66.54263,"region":"Seven seas (open ocean)","subregion":"South Indian Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[77.53467858164623,-37.85796477656842]}},{"type":"Feature","properties":{"scalerank":7,"name":"Île Amsterdam","comment":null,"name_alt":null,"lat_y":-19.702241,"long_x":66.54263,"region":"Seven seas (open ocean)","subregion":"South Indian Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[77.52552330820873,-38.72014739375592]}},{"type":"Feature","properties":{"scalerank":7,"name":"Île Europa","comment":null,"name_alt":null,"lat_y":-22.837936,"long_x":40.192423,"region":"Africa","subregion":null,"featureclass":"island"},"geometry":{"type":"Point","coordinates":[40.19239342539623,-22.837945245318423]}},{"type":"Feature","properties":{"scalerank":7,"name":"Annobón","comment":null,"name_alt":null,"lat_y":-1.429572,"long_x":5.621149,"region":"Africa","subregion":null,"featureclass":"island"},"geometry":{"type":"Point","coordinates":[5.621104362896233,-1.429620050005923]}},{"type":"Feature","properties":{"scalerank":7,"name":"Ascension","comment":null,"name_alt":null,"lat_y":-7.925105,"long_x":-14.362648,"region":"Seven seas (open ocean)","subregion":"Southern Atlantic Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-14.362721320697517,-7.925225518755923]}},{"type":"Feature","properties":{"scalerank":7,"name":"Tristan da Cunha","comment":null,"name_alt":null,"lat_y":-35.278715,"long_x":-17.932071,"region":"Seven seas (open ocean)","subregion":"Southern Atlantic Ocean","featureclass":"island group"},"geometry":{"type":"Point","coordinates":[-12.265431281635017,-37.07024505000592]}},{"type":"Feature","properties":{"scalerank":7,"name":"Gough I.","comment":null,"name_alt":null,"lat_y":-35.278715,"long_x":-17.932071,"region":"Seven seas (open ocean)","subregion":"Southern Atlantic Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-9.967213508197517,-40.34014251094342]}},{"type":"Feature","properties":{"scalerank":7,"name":"Bouvet I.","comment":null,"name_alt":null,"lat_y":-35.278715,"long_x":-17.932071,"region":"Seven seas (open ocean)","subregion":"Southern Atlantic Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[3.409922722271233,-54.41655852656842]}},{"type":"Feature","properties":{"scalerank":6,"name":"Cape Colbeck","comment":null,"name_alt":null,"lat_y":-50.959168,"long_x":-72.995002,"region":"Antarctica","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-158.25767981679127,-77.11113860469342]}},{"type":"Feature","properties":{"scalerank":6,"name":"Is. de Fernando de Noronha","comment":null,"name_alt":null,"lat_y":-3.849881,"long_x":-32.417053,"region":"Seven seas (open ocean)","subregion":"Southern Atlantic Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-32.41704260976002,-3.849908135943423]}},{"type":"Feature","properties":{"scalerank":6,"name":"Cocos Is.","comment":null,"name_alt":null,"lat_y":-12.158465,"long_x":96.828369,"region":"Seven seas (open ocean)","subregion":"Indian Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[96.82837975352123,-12.158257745318423]}},{"type":"Feature","properties":{"scalerank":6,"name":"Christmas I.","comment":null,"name_alt":null,"lat_y":-10.472542,"long_x":105.667155,"region":"Seven seas (open ocean)","subregion":"Indian Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[105.66712487070873,-10.472588800005923]}},{"type":"Feature","properties":{"scalerank":6,"name":"Campbell I.","comment":null,"name_alt":null,"lat_y":-52.510412,"long_x":169.120166,"region":"Seven seas (open ocean)","subregion":"South Pacific Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[169.12012780039623,-52.51043059688092]}},{"type":"Feature","properties":{"scalerank":6,"name":"Macquarie I.","comment":null,"name_alt":null,"lat_y":-52.510412,"long_x":169.120166,"region":"Seven seas (open ocean)","subregion":"South Indian Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[158.89600670664623,-54.60979583125592]}},{"type":"Feature","properties":{"scalerank":6,"name":"Cape Darnley","comment":null,"name_alt":null,"lat_y":-52.510412,"long_x":169.120166,"region":"Antarctica","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[69.61109459727123,-67.77349212031842]}},{"type":"Feature","properties":{"scalerank":6,"name":"Cape Ann","comment":null,"name_alt":null,"lat_y":-52.510412,"long_x":169.120166,"region":"Antarctica","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[51.40809166758373,-66.16106536250592]}},{"type":"Feature","properties":{"scalerank":6,"name":"Peter I I.","comment":null,"name_alt":null,"lat_y":-52.510412,"long_x":169.120166,"region":"Antarctica","subregion":"Southern Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-90.56822669179127,-68.76604583125592]}},{"type":"Feature","properties":{"scalerank":6,"name":"Antipodes Islands","comment":null,"name_alt":null,"lat_y":-49.649273,"long_x":178.773056,"region":"Seven seas (open ocean)","subregion":"South Pacific Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[178.77295983164623,-49.64934661250592]}},{"type":"Feature","properties":{"scalerank":6,"name":"Bounty Is.","comment":null,"name_alt":null,"lat_y":-47.688207,"long_x":178.89656,"region":"Seven seas (open ocean)","subregion":"South Pacific Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[178.89661705820873,-47.68828704219342]}},{"type":"Feature","properties":{"scalerank":6,"name":"Balls Pyramid","comment":null,"name_alt":null,"lat_y":-31.826904,"long_x":159.158463,"region":"Seven seas (open ocean)","subregion":"South Pacific Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[159.15833580820873,-31.826958917193423]}},{"type":"Feature","properties":{"scalerank":6,"name":"Lord Howe I.","comment":null,"name_alt":null,"lat_y":-31.542569,"long_x":159.069307,"region":"Seven seas (open ocean)","subregion":"South Pacific Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[159.06922448008373,-31.542535089068423]}},{"type":"Feature","properties":{"scalerank":6,"name":"St. Helena","comment":null,"name_alt":null,"lat_y":-15.950901,"long_x":-5.705161,"region":"Seven seas (open ocean)","subregion":"Southern Atlantic Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-5.705128547260017,-15.950860284380923]}},{"type":"Feature","properties":{"scalerank":6,"name":"I. del Coco","comment":null,"name_alt":null,"lat_y":5.539857,"long_x":-87.092227,"region":"Seven seas (open ocean)","subregion":"North Pacific Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-87.09221350819752,5.539923407025327]}},{"type":"Feature","properties":{"scalerank":6,"name":"Sable I.","comment":null,"name_alt":null,"lat_y":43.930893,"long_x":-59.91953,"region":"Seven seas (open ocean)","subregion":null,"featureclass":"island"},"geometry":{"type":"Point","coordinates":[-59.91960608632252,43.93097565311908]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cabo Delgado","comment":null,"name_alt":null,"lat_y":-10.670103,"long_x":40.624309,"region":"Africa","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[40.62440026133373,-10.670098565630923]}},{"type":"Feature","properties":{"scalerank":5,"name":"Ponta da Barra","comment":null,"name_alt":null,"lat_y":-23.829888,"long_x":35.515696,"region":"Africa","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[35.51563561289623,-23.830010675005923]}},{"type":"Feature","properties":{"scalerank":5,"name":"Ponta São Sebastio","comment":null,"name_alt":null,"lat_y":-22.118899,"long_x":35.480417,"region":"Africa","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[35.48023522227123,-22.118829034380923]}},{"type":"Feature","properties":{"scalerank":5,"name":"Ras Cantin","comment":null,"name_alt":null,"lat_y":32.581636,"long_x":-9.273918,"region":"Africa","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-9.273915168353767,32.58161041874408]}},{"type":"Feature","properties":{"scalerank":5,"name":"Ras Kasr","comment":null,"name_alt":null,"lat_y":18.076817,"long_x":38.573746,"region":"Africa","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[38.58027735871919,18.075167704493374]}},{"type":"Feature","properties":{"scalerank":5,"name":"Ponta de Jericoacoara","comment":null,"name_alt":null,"lat_y":-2.85044,"long_x":-40.067208,"region":"South America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-39.991649927946355,-2.851822991583529]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cabo de São Roque","comment":null,"name_alt":null,"lat_y":-5.193476,"long_x":-35.447654,"region":"South America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-35.50994900651512,-5.156866121305913]}},{"type":"Feature","properties":{"scalerank":5,"name":"Ponta da Baleia","comment":null,"name_alt":null,"lat_y":-17.710136,"long_x":-39.157619,"region":"South America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-39.14557867836578,-17.678753845220847]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cabo de São Tomé","comment":null,"name_alt":null,"lat_y":-21.996382,"long_x":-41.009692,"region":"South America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-40.98763990313761,-21.971754611783773]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cabo Frio","comment":null,"name_alt":null,"lat_y":-22.869501,"long_x":-41.962188,"region":"South America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-41.89015627474056,-22.759730815669258]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cabo San Diego","comment":null,"name_alt":null,"lat_y":-54.6406,"long_x":-65.21365,"region":"South America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-65.21361243397877,-54.64067962031842]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cabo Tres Puntas","comment":null,"name_alt":null,"lat_y":-47.237629,"long_x":-65.774707,"region":"South America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-65.74439816328368,-47.328778975372465]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cap Saint André","comment":null,"name_alt":null,"lat_y":-16.174457,"long_x":44.467405,"region":"Africa","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[44.46729576914623,-16.174493096880923]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape St. Lucia","comment":null,"name_alt":null,"lat_y":-28.552694,"long_x":32.367221,"region":"Africa","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[32.36732018320873,-28.552666925005923]}},{"type":"Feature","properties":{"scalerank":5,"name":"Cape St. Francis","comment":null,"name_alt":null,"lat_y":-34.171766,"long_x":24.817688,"region":"Africa","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[24.84143613032799,-34.18861022316314]}},{"type":"Feature","properties":{"scalerank":5,"name":"Minamitori-shima","comment":null,"name_alt":"Marcus I.","lat_y":24.319813,"long_x":153.958899,"region":"Seven seas (open ocean)","subregion":"North Pacific Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[153.95887291758373,24.319769598431577]}},{"type":"Feature","properties":{"scalerank":5,"name":"Is. Martin Vaz","comment":null,"name_alt":null,"lat_y":-20.559422,"long_x":-29.338439,"region":"Seven seas (open ocean)","subregion":"Southern Atlantic Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-29.338429328510017,-20.559502862505923]}},{"type":"Feature","properties":{"scalerank":5,"name":"Rockall","comment":null,"name_alt":null,"lat_y":58.163524,"long_x":-12.408715,"region":"Seven seas (open ocean)","subregion":"North Atlantic Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-12.408741828510017,58.16339752811908]}},{"type":"Feature","properties":{"scalerank":5,"name":"I. de Cozumel","comment":null,"name_alt":null,"lat_y":20.444687,"long_x":-86.880555,"region":"North America","subregion":null,"featureclass":"island"},"geometry":{"type":"Point","coordinates":[-86.88060462147877,20.444708563275327]}},{"type":"Feature","properties":{"scalerank":5,"name":"Bermuda Islands","comment":null,"name_alt":null,"lat_y":32.317339,"long_x":-64.742895,"region":"Seven seas (open ocean)","subregion":"North Atlantic Ocean","featureclass":"island"},"geometry":{"type":"Point","coordinates":[-64.74290930897877,32.31726715702533]}},{"type":"Feature","properties":{"scalerank":4,"name":"Punta Galera","comment":null,"name_alt":null,"lat_y":0.731221,"long_x":-80.062205,"region":"South America","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-80.06212317616627,0.731207586712827]}},{"type":"Feature","properties":{"scalerank":4,"name":"Cap Lopez","comment":null,"name_alt":null,"lat_y":-0.604761,"long_x":8.726423,"region":"Africa","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[8.727299789450319,-0.615086490513119]}},{"type":"Feature","properties":{"scalerank":4,"name":"Cape Bobaomby","comment":null,"name_alt":null,"lat_y":-11.966598,"long_x":49.262904,"region":"Africa","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[49.26282799570873,-11.966485284380923]}},{"type":"Feature","properties":{"scalerank":4,"name":"Cap Blanc","comment":null,"name_alt":null,"lat_y":20.822108,"long_x":-17.052856,"region":"Africa","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-17.052906867572517,20.822088934369077]}},{"type":"Feature","properties":{"scalerank":3,"name":"Cape of Good Hope","comment":null,"name_alt":null,"lat_y":-34.307311,"long_x":18.441206,"region":"Africa","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[18.441294792583733,-34.30718352656842]}},{"type":"Feature","properties":{"scalerank":3,"name":"Cape Palmas","comment":null,"name_alt":null,"lat_y":4.373924,"long_x":-7.457356,"region":"Africa","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-7.457386848041267,4.373968817181577]}},{"type":"Feature","properties":{"scalerank":3,"name":"Cape Verde","comment":null,"name_alt":null,"lat_y":14.732312,"long_x":-17.471776,"region":"Africa","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[-17.471730109760017,14.732489324994077]}},{"type":"Feature","properties":{"scalerank":3,"name":"Cap Bon","comment":null,"name_alt":null,"lat_y":37.073954,"long_x":11.024061,"region":"Africa","subregion":null,"featureclass":"cape"},"geometry":{"type":"Point","coordinates":[11.024180534771233,37.07398102421283]}},{"type":"Feature","properties":{"scalerank":3,"name":"Oceanic pole of inaccessibility","comment":null,"name_alt":null,"lat_y":-48.865032,"long_x":-123.401986,"region":"Seven seas (open ocean)","subregion":"South Pacific Ocean","featureclass":"pole"},"geometry":{"type":"Point","coordinates":[-123.40202796132252,-48.86504485469342]}},{"type":"Feature","properties":{"scalerank":3,"name":"South Magnetic Pole 2005 (est)","comment":null,"name_alt":null,"lat_y":-48.865032,"long_x":-123.401986,"region":"Antarctica","subregion":"Southern Ocean","featureclass":"pole"},"geometry":{"type":"Point","coordinates":[137.85425865977123,-64.51824309688092]}},{"type":"Feature","properties":{"scalerank":3,"name":"North Magnetic Pole 2005 (est)","comment":null,"name_alt":null,"lat_y":-48.865032,"long_x":-123.401986,"region":"Seven seas (open ocean)","subregion":"Arctic Ocean","featureclass":"pole"},"geometry":{"type":"Point","coordinates":[-114.40569007069752,82.71008942265033]}}]}')},300:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(26),__webpack_require__(9),__webpack_require__(59),__webpack_require__(4),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(15),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(14),__webpack_require__(11),__webpack_require__(12),__webpack_require__(2),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.PositionType=void 0;var _dec,_class,_descriptor,_temp,PositionType,_core=__webpack_require__(25),_utils=__webpack_require__(60),_eventemitter=__webpack_require__(126);exports.PositionType=PositionType,function(PositionType){PositionType.TOPRIGHT="topright",PositionType.TOPLEFT="topleft",PositionType.BOTTOMRIGHT="bottomright",PositionType.BOTTOMLEFT="bottomleft"}(PositionType||(exports.PositionType=PositionType={}));var Control=(_dec=(0,_core.lazyInject)(_core.TYPES.IControlService),_temp=function(_eventemitter$EventEm){function Control(cfg){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Control),(_this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,_getPrototypeOf(Control).call(this))).controlOption=void 0,_this.mapsService=void 0,function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_assertThisInitialized(_this),"controlService",_descriptor,_assertThisInitialized(_this)),_this.container=void 0,_this.isShow=void 0,_this.controlOption=function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}({},_this.getDefault(),{},cfg||{}),_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Control,_eventemitter$EventEm),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Control,[{key:"getDefault",value:function getDefault(){return{position:PositionType.TOPRIGHT}}},{key:"setPosition",value:function setPosition(position){var controlService=this.controlService;return controlService&&controlService.removeControl(this),this.controlOption.position=position,controlService&&controlService.addControl(this,this.mapsService),this}},{key:"addTo",value:function addTo(mapService){this.remove(),this.isShow=!0,this.mapsService=mapService,this.container=this.onAdd(mapService);var container=this.container,pos=this.controlOption.position,corner=this.controlService.controlCorners[pos];return _utils.DOM.addClass(container,"l7-control"),-1===pos.indexOf("bottom")?corner.appendChild(container):corner.insertBefore(container,corner.firstChild),this}},{key:"onAdd",value:function onAdd(){throw new Error("Method not implemented.")}},{key:"hide",value:function hide(){var container=this.container;_utils.DOM.addClass(container,"l7-control-hide"),this.isShow=!1}},{key:"show",value:function show(){var container=this.container;_utils.DOM.removeClass(container,"l7-control-hide"),this.isShow=!0}},{key:"remove",value:function remove(){return this.mapsService?void _utils.DOM.remove(this.container):this}},{key:"_refocusOnMap",value:function _refocusOnMap(e){if(this.mapsService&&e&&0<e.screenX&&0<e.screenY){var container=this.mapsService.getContainer();null!==container&&container.focus()}}}]),Control}(_eventemitter.EventEmitter),_descriptor=function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}((_class=_temp).prototype,"controlService",[_dec],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class);exports.default=Control},403:function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(26),__webpack_require__(9),__webpack_require__(62),__webpack_require__(4),__webpack_require__(807),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(11),__webpack_require__(2),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.buildMapping=function buildMapping(_ref){var characterSet=_ref.characterSet,getFontWidth=_ref.getFontWidth,fontHeight=_ref.fontHeight,buffer=_ref.buffer,maxCanvasWidth=_ref.maxCanvasWidth,_ref$mapping=_ref.mapping,mapping=void 0===_ref$mapping?{}:_ref$mapping,_ref$xOffset=_ref.xOffset,xOffset=void 0===_ref$xOffset?0:_ref$xOffset,_ref$yOffset=_ref.yOffset,yOffset=void 0===_ref$yOffset?0:_ref$yOffset,row=0,x=xOffset;Array.from(characterSet).forEach((function(_char,i){if(!mapping[_char]){var width=getFontWidth(_char,i);x+glyphSizeInSDF>maxCanvasWidth&&(x=0,row++),mapping[_char]={x:x,y:yOffset+row*glyphSizeInSDF,width:glyphSizeInSDF,height:glyphSizeInSDF,advance:width},x+=glyphSizeInSDF}}));var rowHeight=fontHeight+2*buffer;return{mapping:mapping,xOffset:x,yOffset:yOffset+row*rowHeight,canvasHeight:nextPowOfTwo(yOffset+(row+1)*rowHeight)}},exports.buildIconMaping=function buildIconMaping(icons,buffer,maxCanvasWidth){var xOffset=0,yOffset=0,rowHeight=0,columns=[],mapping={},_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,icon,_iterator=icons[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)if(icon=_step.value,!mapping[icon.id]){var height=icon.height,width=icon.width;xOffset+width+buffer>maxCanvasWidth&&(buildRowMapping(mapping,columns,yOffset),xOffset=0,yOffset=rowHeight+yOffset+buffer,rowHeight=0,columns=[]),columns.push({icon:icon,xOffset:xOffset}),xOffset=xOffset+width+buffer,rowHeight=Math.max(rowHeight,height)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}0<columns.length&&buildRowMapping(mapping,columns,yOffset);var canvasHeight=nextPowOfTwo(rowHeight+yOffset+buffer);return{mapping:mapping,canvasHeight:canvasHeight}},exports.nextPowOfTwo=nextPowOfTwo;var glyphSizeInSDF=30;function buildRowMapping(mapping,columns,yOffset){var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=columns[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var column=_step2.value,icon=column.icon,xOffset=column.xOffset;mapping[icon.id]=_objectSpread({},icon,{x:xOffset,y:yOffset,image:icon.image})}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}function nextPowOfTwo(num){return Math.pow(2,Math.ceil(Math.log2(num)))}},412:function(module,exports,__webpack_require__){"use strict";var CoordinateSystem;__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.CoordinateUniform=exports.CoordinateSystem=void 0,exports.CoordinateSystem=CoordinateSystem,function(CoordinateSystem){CoordinateSystem[CoordinateSystem.LNGLAT=1]="LNGLAT",CoordinateSystem[CoordinateSystem.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",CoordinateSystem[CoordinateSystem.VECTOR_TILE=3]="VECTOR_TILE",CoordinateSystem[CoordinateSystem.IDENTITY=4]="IDENTITY",CoordinateSystem[CoordinateSystem.P20=5]="P20",CoordinateSystem[CoordinateSystem.P20_OFFSET=6]="P20_OFFSET",CoordinateSystem[CoordinateSystem.METER_OFFSET=7]="METER_OFFSET"}(CoordinateSystem||(exports.CoordinateSystem=CoordinateSystem={}));exports.CoordinateUniform={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter"}},413:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if(Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(9),__webpack_require__(23),__webpack_require__(4),__webpack_require__(27),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(40),__webpack_require__(0),__webpack_require__(11),__webpack_require__(2),__webpack_require__(38),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.normalizePasses=normalizePasses,exports.default=void 0;var _dec,_dec2,_dec3,_dec4,_class,_class2,_descriptor,_descriptor2,_descriptor3,_core=__webpack_require__(25),_inversify=__webpack_require__(18);function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}function normalizePasses(passes){return passes.map((function(pass){return"string"==typeof pass&&(pass=[pass,{}]),pass}))}var MultiPassRendererPlugin=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_core.TYPES.IGlobalConfigService),_dec3=(0,_inversify.inject)(_core.TYPES.IRendererService),_dec4=(0,_inversify.inject)(_core.TYPES.IFactoryPostProcessingPass),_dec((_descriptor=_applyDecoratedDescriptor((_class2=function(){function MultiPassRendererPlugin(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,MultiPassRendererPlugin),_initializerDefineProperty(this,"configService",_descriptor,this),_initializerDefineProperty(this,"rendererService",_descriptor2,this),_initializerDefineProperty(this,"postProcessingPassFactory",_descriptor3,this),this.enabled=void 0}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(MultiPassRendererPlugin,[{key:"apply",value:function apply(layer){var _this=this;layer.hooks.init.tap("MultiPassRendererPlugin",(function(){var _layer$getStyleOption=layer.getStyleOptions(),enableMultiPassRenderer=_layer$getStyleOption.enableMultiPassRenderer,_layer$getStyleOption2=_layer$getStyleOption.passes,passes=void 0===_layer$getStyleOption2?[]:_layer$getStyleOption2;_this.enabled=!!enableMultiPassRenderer&&!1!==_this.configService.getConfig().enableMultiPassRenderer,_this.enabled&&(layer.multiPassRenderer=_this.createMultiPassRenderer(layer,passes),layer.multiPassRenderer.setRenderFlag(!0))})),layer.hooks.beforeRender.tap("MultiPassRendererPlugin",(function(){if(_this.enabled){var _this$rendererService=_this.rendererService.getViewportSize(),width=_this$rendererService.width,height=_this$rendererService.height;layer.multiPassRenderer.resize(width,height)}else _this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}))}},{key:"createMultiPassRenderer",value:function createMultiPassRenderer(layer,passes){var _this2=this,multiPassRenderer=new _core.MultiPassRenderer(layer),_layer$getStyleOption3=layer.getStyleOptions(),enablePicking=_layer$getStyleOption3.enablePicking,enableTAA=_layer$getStyleOption3.enableTAA;return multiPassRenderer.add(new _core.ClearPass),enablePicking&&multiPassRenderer.add(new _core.PixelPickingPass),enableTAA?multiPassRenderer.add(new _core.TAAPass):multiPassRenderer.add(new _core.RenderPass),normalizePasses(passes).forEach((function(pass){var _pass=_slicedToArray(pass,2),passName=_pass[0],initializationOptions=_pass[1];multiPassRenderer.add(_this2.postProcessingPassFactory(passName),initializationOptions)})),multiPassRenderer.add(this.postProcessingPassFactory("copy")),multiPassRenderer}}]),MultiPassRendererPlugin}()).prototype,"configService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor2=_applyDecoratedDescriptor(_class2.prototype,"rendererService",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor3=_applyDecoratedDescriptor(_class2.prototype,"postProcessingPassFactory",[_dec4],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=MultiPassRendererPlugin},416:function(module,exports,__webpack_require__){"use strict";__webpack_require__(4),__webpack_require__(0),__webpack_require__(24),__webpack_require__(2),__webpack_require__(5),__webpack_require__(80),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.rgb2arr=function rgb2arr(str){var color=d3.color(str),arr=[0,0,0,0];return null!=color&&(arr[0]=color.r/255,arr[1]=color.g/255,arr[2]=color.b/255,arr[3]=color.opacity),arr};var d3=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}(__webpack_require__(130));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}},418:function(module,exports,__webpack_require__){"use strict";__webpack_require__(9),__webpack_require__(0),__webpack_require__(11),__webpack_require__(10),Object.defineProperty(exports,"__esModule",{value:!0});var _exportNames={getTransform:!0,registerTransform:!0,getParser:!0,registerParser:!0};Object.defineProperty(exports,"getTransform",{enumerable:!0,get:function get(){return _factory.getTransform}}),Object.defineProperty(exports,"registerTransform",{enumerable:!0,get:function get(){return _factory.registerTransform}}),Object.defineProperty(exports,"getParser",{enumerable:!0,get:function get(){return _factory.getParser}}),Object.defineProperty(exports,"registerParser",{enumerable:!0,get:function get(){return _factory.registerParser}}),exports.default=void 0;var _factory=__webpack_require__(953),_csv=_interopRequireDefault(__webpack_require__(954)),_geojson=_interopRequireDefault(__webpack_require__(959)),_image=_interopRequireDefault(__webpack_require__(962)),_json=_interopRequireDefault(__webpack_require__(419)),_source=_interopRequireDefault(__webpack_require__(963)),_cluster=__webpack_require__(977),_grid=__webpack_require__(978),_hexagon=__webpack_require__(981),_interface=__webpack_require__(982);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.keys(_interface).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _interface[key]}})}));var _default=_source.default;exports.default=_default,(0,_factory.registerParser)("geojson",_geojson.default),(0,_factory.registerParser)("image",_image.default),(0,_factory.registerParser)("csv",_csv.default),(0,_factory.registerParser)("json",_json.default),(0,_factory.registerTransform)("cluster",_cluster.cluster),(0,_factory.registerTransform)("grid",_grid.aggregatorToGrid),(0,_factory.registerTransform)("hexagon",_hexagon.pointToHexbin)},419:function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(26),__webpack_require__(9),__webpack_require__(62),__webpack_require__(23),__webpack_require__(4),__webpack_require__(40),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(11),__webpack_require__(2),__webpack_require__(955),__webpack_require__(38),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function json(data,cfg){var x=cfg.x,y=cfg.y,x1=cfg.x1,y1=cfg.y1,coordinates=cfg.coordinates,resultData=[];return data.forEach((function(col,featureIndex){var coords=[];if(x&&y&&(coords=[parseFloat(col[x]),parseFloat(col[y])]),x&&y&&x1&&y1&&(coords=[[parseFloat(col[x]),parseFloat(col[y])],[parseFloat(col[x1]),parseFloat(col[y1])]]),coordinates){var type="Polygon";Array.isArray(coordinates[0])||(type="Point"),Array.isArray(coordinates[0])&&!Array.isArray(coordinates[0][0])&&(type="LineString");var geometry={type:type,coordinates:_toConsumableArray(col[coordinates])};(0,_geojsonRewind.default)(geometry,!0),coords=geometry.coordinates}var dataItem=function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}({},col,{_id:featureIndex,coordinates:coords});resultData.push(dataItem)})),{dataArray:resultData}};var _geojsonRewind=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(420))},421:function(module,exports,__webpack_require__){"use strict";function max(x){if(0===x.length)throw new Error("max requires at least one data point");for(var value=x[0],i=1;i<x.length;i++)x[i]>value&&(value=x[i]);return value}function min(x){if(0===x.length)throw new Error("min requires at least one data point");for(var value=x[0],i=1;i<x.length;i++)x[i]<value&&(value=x[i]);return value}function sum(x){if(0===x.length)return 0;for(var transition,sumNum=x[0],correction=0,i=1;i<x.length;i++)transition=sumNum+x[i],correction+=Math.abs(sumNum)>=Math.abs(x[i])?sumNum-transition+x[i]:x[i]-transition+sumNum,sumNum=transition;return sumNum+correction}function mean(x){if(0===x.length)throw new Error("mean requires at least one data point");return sum(x)/x.length}__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.sum=sum,exports.max=max,exports.min=min,exports.mean=mean,exports.statMap=void 0;var statMap={min:min,max:max,mean:mean,sum:sum};exports.statMap=statMap},423:function(module,exports,__webpack_require__){var content=__webpack_require__(1019);"string"==typeof content&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};__webpack_require__(388)(content,options);content.locals&&(module.exports=content.locals)},424:function(module,exports,__webpack_require__){"use strict";__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Control",{enumerable:!0,get:function get(){return _BaseControl.default}}),Object.defineProperty(exports,"Scale",{enumerable:!0,get:function get(){return _scale.default}}),Object.defineProperty(exports,"Zoom",{enumerable:!0,get:function get(){return _zoom.default}}),Object.defineProperty(exports,"Marker",{enumerable:!0,get:function get(){return _marker.default}}),Object.defineProperty(exports,"Popup",{enumerable:!0,get:function get(){return _popup.default}});var _BaseControl=_interopRequireDefault(__webpack_require__(300)),_scale=_interopRequireDefault(__webpack_require__(1022)),_zoom=_interopRequireDefault(__webpack_require__(1023)),_marker=_interopRequireDefault(__webpack_require__(1024)),_popup=_interopRequireDefault(__webpack_require__(1025));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},426:function(module,exports,__webpack_require__){"use strict";var anchorType;__webpack_require__(16),__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyAnchorClass=function applyAnchorClass(element,anchor,prefix){var classList=element.classList;for(var key in anchorTranslate)anchorTranslate.hasOwnProperty(key)&&classList.remove("l7-".concat(prefix,"-anchor-").concat(key));classList.add("l7-".concat(prefix,"-anchor-").concat(anchor))},exports.anchorTranslate=exports.anchorType=void 0,exports.anchorType=anchorType,function(anchorType){anchorType.CENTER="center",anchorType.TOP="top",anchorType["TOP-LEFT"]="top-left",anchorType["TOP-RIGHT"]="top-right",anchorType.BOTTOM="bottom",anchorType["BOTTOM-LEFT"]="bottom-left",anchorType.LEFT="left",anchorType.RIGHT="right"}(anchorType||(exports.anchorType=anchorType={}));var anchorTranslate={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};exports.anchorTranslate=anchorTranslate},43:function(module,exports,__webpack_require__){"use strict";__webpack_require__(121),__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"BaseLayer",{enumerable:!0,get:function get(){return _BaseLayer.default}}),Object.defineProperty(exports,"HeatMapGridLayer",{enumerable:!0,get:function get(){return _grid.default}}),Object.defineProperty(exports,"LineLayer",{enumerable:!0,get:function get(){return _index.default}}),Object.defineProperty(exports,"Point3dLayer",{enumerable:!0,get:function get(){return _extrude.default}}),Object.defineProperty(exports,"PointImageLayer",{enumerable:!0,get:function get(){return _image.default}}),Object.defineProperty(exports,"PointLayer",{enumerable:!0,get:function get(){return _index2.default}}),Object.defineProperty(exports,"PolygonLayer",{enumerable:!0,get:function get(){return _polygon.default}}),Object.defineProperty(exports,"Polygon3DLayer",{enumerable:!0,get:function get(){return _polygon3D.default}}),Object.defineProperty(exports,"ImageLayer",{enumerable:!0,get:function get(){return _image2.default}});var _core=__webpack_require__(25),_BaseLayer=_interopRequireDefault(__webpack_require__(99)),_grid=_interopRequireDefault(__webpack_require__(938)),_index=_interopRequireDefault(__webpack_require__(943)),_extrude=_interopRequireDefault(__webpack_require__(944)),_image=_interopRequireDefault(__webpack_require__(945)),_index2=_interopRequireDefault(__webpack_require__(946)),_polygon=_interopRequireDefault(__webpack_require__(947)),_polygon3D=_interopRequireDefault(__webpack_require__(948)),_image2=_interopRequireDefault(__webpack_require__(949)),_ConfigSchemaValidationPlugin=_interopRequireDefault(__webpack_require__(950)),_DataMappingPlugin=_interopRequireDefault(__webpack_require__(951)),_DataSourcePlugin=_interopRequireDefault(__webpack_require__(952)),_FeatureScalePlugin=_interopRequireDefault(__webpack_require__(983)),_MultiPassRendererPlugin=_interopRequireDefault(__webpack_require__(413)),_PixelPickingPlugin=_interopRequireDefault(__webpack_require__(985)),_RegisterStyleAttributePlugin=_interopRequireDefault(__webpack_require__(986)),_ShaderUniformPlugin=_interopRequireDefault(__webpack_require__(987)),_UpdateStyleAttributePlugin=_interopRequireDefault(__webpack_require__(988));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_core.container.bind(_core.TYPES.ILayerPlugin).to(_ConfigSchemaValidationPlugin.default),_core.container.bind(_core.TYPES.ILayerPlugin).to(_DataSourcePlugin.default),_core.container.bind(_core.TYPES.ILayerPlugin).to(_RegisterStyleAttributePlugin.default),_core.container.bind(_core.TYPES.ILayerPlugin).to(_FeatureScalePlugin.default),_core.container.bind(_core.TYPES.ILayerPlugin).to(_DataMappingPlugin.default),_core.container.bind(_core.TYPES.ILayerPlugin).to(_UpdateStyleAttributePlugin.default),_core.container.bind(_core.TYPES.ILayerPlugin).to(_MultiPassRendererPlugin.default),_core.container.bind(_core.TYPES.ILayerPlugin).to(_ShaderUniformPlugin.default),_core.container.bind(_core.TYPES.ILayerPlugin).to(_PixelPickingPlugin.default)},434:function(module,exports,__webpack_require__){__webpack_require__(435),__webpack_require__(547),module.exports=__webpack_require__(548)},44:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(59),__webpack_require__(27),__webpack_require__(121),__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.Scene=void 0;var _core=__webpack_require__(25),_maps=__webpack_require__(989),_renderer=__webpack_require__(997);_core.container.bind(_core.TYPES.IRendererService).to(_renderer.ReglRendererService).inSingletonScope();var mapType,Scene=function(){function Scene(config){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,Scene),this.map=void 0,this.sceneService=void 0,this.mapService=void 0,this.controlService=void 0,this.iconService=void 0;var mapServiceImpl,_config$type=config.type,type=void 0===_config$type?_core.MapType.amap:_config$type;if(type===_core.MapType.mapbox)mapServiceImpl=_maps.MapboxService;else if(type===_core.MapType.amap)mapServiceImpl=_maps.AMapService;else{if(type!==_core.MapType.maptalks)throw new Error("不支持的地图服务");mapServiceImpl=_maps.MaptalksService}_core.container.isBound(_core.TYPES.IMapService)?type!==mapType&&_core.container.rebind(_core.TYPES.IMapService).to(mapServiceImpl).inSingletonScope():_core.container.bind(_core.TYPES.IMapService).to(mapServiceImpl).inSingletonScope(),this.sceneService=_core.container.get(_core.TYPES.ISceneService),this.sceneService.init(config),this.mapService=_core.container.get(_core.TYPES.IMapService),this.iconService=_core.container.get(_core.TYPES.IIconService),this.controlService=_core.container.get(_core.TYPES.IControlService),this.map=this.mapService.map,mapType=this.mapService.getType()}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Scene,[{key:"getMapService",value:function getMapService(){return this.mapService}},{key:"addLayer",value:function addLayer(layer){this.sceneService.addLayer(layer)}},{key:"render",value:function render(){this.sceneService.render()}},{key:"addImage",value:function addImage(id,img){this.iconService.addImage(id,img)}},{key:"hasImage",value:function hasImage(id){this.iconService.hasImage(id)}},{key:"removeImage",value:function removeImage(id){this.iconService.removeImage(id)}},{key:"addControl",value:function addControl(ctr){this.controlService.addControl(ctr,this.mapService)}},{key:"removeControl",value:function removeControl(ctr){this.controlService.removeControl(ctr)}},{key:"addMarker",value:function addMarker(marker){marker.addTo(this)}},{key:"on",value:function on(type,handle){-1===_core.SceneEventList.indexOf(type)?this.mapService.on(type,handle):this.sceneService.on(type,handle)}},{key:"off",value:function off(type,handle){-1===_core.SceneEventList.indexOf(type)?this.mapService.off(type,handle):this.sceneService.off(type,handle)}},{key:"getZoom",value:function getZoom(){return this.mapService.getZoom()}},{key:"getCenter",value:function getCenter(){return this.mapService.getCenter()}},{key:"getPitch",value:function getPitch(){return this.mapService.getPitch()}},{key:"getRotation",value:function getRotation(){return this.mapService.getRotation()}},{key:"getBounds",value:function getBounds(){return this.mapService.getBounds()}},{key:"setRotation",value:function setRotation(rotation){this.mapService.setRotation(rotation)}},{key:"zoomIn",value:function zoomIn(){this.mapService.zoomIn()}},{key:"zoomOut",value:function zoomOut(){this.mapService.zoomOut()}},{key:"panTo",value:function panTo(p){this.mapService.panTo(p)}},{key:"panBy",value:function panBy(pixel){this.mapService.panTo(pixel)}},{key:"fitBounds",value:function fitBounds(bound){this.mapService.fitBounds(bound)}},{key:"setZoomAndCenter",value:function setZoomAndCenter(zoom,center){this.mapService.setZoomAndCenter(zoom,center)}},{key:"setMapStyle",value:function setMapStyle(style){this.mapService.setMapStyle(style)}},{key:"pixelToLngLat",value:function pixelToLngLat(pixel){return this.mapService.pixelToLngLat(pixel)}},{key:"lngLatToPixel",value:function lngLatToPixel(lnglat){return this.mapService.lngLatToPixel(lnglat)}},{key:"containerToLngLat",value:function containerToLngLat(pixel){return this.mapService.containerToLngLat(pixel)}},{key:"lngLatToContainer",value:function lngLatToContainer(lnglat){return this.mapService.lngLatToContainer(lnglat)}},{key:"destroy",value:function destroy(){this.sceneService.destroy()}}]),Scene}();Scene.displayName="Scene",exports.Scene=Scene},456:function(module,exports){},548:function(module,exports,__webpack_require__){"use strict";(function(module){var _react=__webpack_require__(137);__webpack_require__(716);var _theming=__webpack_require__(734);__webpack_require__(749),(0,_react.addParameters)({options:{isFullscreen:!1,showAddonsPanel:!0,showSearchBox:!1,panelPosition:"bottom",hierarchySeparator:/\./,enableShortcuts:!0,theme:(0,_theming.create)({base:"light",brandTitle:"L7 POC for new architecture",brandUrl:"https://github.com/xiaoiver/L7-POC",gridCellSize:12})}});var req=__webpack_require__(751);(0,_react.configure)((function loadStories(){req.keys().forEach(req)}),module)}).call(this,__webpack_require__(68)(module))},55:function(module,exports,__webpack_require__){"use strict";__webpack_require__(3),__webpack_require__(7),__webpack_require__(0),__webpack_require__(2),Object.defineProperty(exports,"__esModule",{value:!0}),exports.TYPES=void 0;var TYPES={ISceneService:Symbol.for("ISceneService"),IGlobalConfigService:Symbol.for("IGlobalConfigService"),ICameraService:Symbol.for("ICameraService"),ICoordinateSystemService:Symbol.for("ICoordinateSystemService"),ILayerService:Symbol.for("ILayerService"),ILayerMappingService:Symbol.for("ILayerMappingService"),ILayerStyleService:Symbol.for("ILayerStyleService"),ILogService:Symbol.for("ILogService"),IMapService:Symbol.for("IMapService"),IFactoryMapService:Symbol.for("Factory<IMapService>"),IRendererService:Symbol.for("IRendererService"),IShaderModuleService:Symbol.for("IShaderModuleService"),IIconService:Symbol.for("IIconService"),IFontService:Symbol.for("IFontService"),IInteractionService:Symbol.for("IInteractionService"),IControlService:Symbol.for("IControlService"),IStyleAttributeService:Symbol.for("IStyleAttributeService"),ILayerPlugin:Symbol.for("ILayerPlugin"),INewablePostProcessingPass:Symbol.for("Newable<IPostProcessingPass>"),IFactoryPostProcessingPass:Symbol.for("Factory<IPostProcessingPass>")};exports.TYPES=TYPES},60:function(module,exports,__webpack_require__){"use strict";__webpack_require__(9),__webpack_require__(4),__webpack_require__(0),__webpack_require__(24),__webpack_require__(11),__webpack_require__(2),__webpack_require__(5),__webpack_require__(80),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0});var _exportNames={djb2hash:!0,BKDRHash:!0,DOM:!0};Object.defineProperty(exports,"djb2hash",{enumerable:!0,get:function get(){return _hash.djb2hash}}),Object.defineProperty(exports,"BKDRHash",{enumerable:!0,get:function get(){return _hash.BKDRHash}}),exports.DOM=void 0;var _hash=__webpack_require__(785),DOM=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}(__webpack_require__(786));exports.DOM=DOM;var _fetchData=__webpack_require__(789);Object.keys(_fetchData).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _fetchData[key]}})}));var _geo=__webpack_require__(799);Object.keys(_geo).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _geo[key]}})}));var _lru_cache=__webpack_require__(804);Object.keys(_lru_cache).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _lru_cache[key]}})}));var _event=__webpack_require__(805);function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}Object.keys(_event).forEach((function(key){"default"===key||"__esModule"===key||Object.prototype.hasOwnProperty.call(_exportNames,key)||Object.defineProperty(exports,key,{enumerable:!0,get:function get(){return _event[key]}})}))},749:function(module,exports,__webpack_require__){var content=__webpack_require__(750);"string"==typeof content&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};__webpack_require__(388)(content,options);content.locals&&(module.exports=content.locals)},750:function(module,exports,__webpack_require__){(module.exports=__webpack_require__(387)(!1)).push([module.i,"html,body{margin:0}.dg.ac{z-index:999 !important}\n",""])},751:function(module,exports,__webpack_require__){var map={"./Animation/Animation.stories.tsx":752,"./Layers/Layers.stories.tsx":1008,"./MapAdaptor/Map.stories.tsx":1016,"./MultiPassRenderer/MultiPassRenderer.stories.tsx":1028,"./Picking/Picking.stories.tsx":1036};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=751},752:function(module,exports,__webpack_require__){"use strict";(function(module){var _react=__webpack_require__(137),React=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(__webpack_require__(17)),_Polygon=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(753));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}var withSourceLoader=__webpack_require__(176).withSource,__STORY__="import { storiesOf } from '@storybook/react';\nimport * as React from 'react';\nimport Polygon from './components/Polygon';\n// @ts-ignore\nstoriesOf('动画', module).add('动态更新指定 feature(s)', () => <Polygon />);\n",__ADDS_MAP__={"动画--动态更新指定-feature-s":{startLoc:{col:28,line:5},endLoc:{col:66,line:5},startBody:{col:49,line:5},endBody:{col:66,line:5}}};(0,_react.storiesOf)("动画",module).addParameters({storySource:{source:__STORY__,locationsMap:__ADDS_MAP__}}).addDecorator(withSourceLoader(__STORY__,__ADDS_MAP__,"/Animation.stories.tsx",[],{},"/Users/dongdong.feng/Documents/own-fork/L7/stories/Animation",{})).add("动态更新指定 feature(s)",(function(){return React.createElement(_Polygon.default,null)}))}).call(this,__webpack_require__(68)(module))},753:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _layers=__webpack_require__(43),_scene=__webpack_require__(44),dat=_interopRequireWildcard(__webpack_require__(94)),React=_interopRequireWildcard(__webpack_require__(17));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}var extendStatics,__extends=(extendStatics=function(d,b){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])})(d,b)},function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}),__awaiter=function(thisArg,_arguments,P,generator){return new(P||(P=Promise))((function(resolve,reject){function fulfilled(value){try{step(generator.next(value))}catch(e){reject(e)}}function rejected(value){try{step(generator.throw(value))}catch(e){reject(e)}}function step(result){result.done?resolve(result.value):function adopt(value){return value instanceof P?value:new P((function(resolve){resolve(value)}))}(result.value).then(fulfilled,rejected)}step((generator=generator.apply(thisArg,_arguments||[])).next())}))},__generator=function(thisArg,body){var f,y,t,g,_={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return g={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(g[Symbol.iterator]=function(){return this}),g;function verb(n){return function(v){return function step(op){if(f)throw new TypeError("Generator is already executing.");for(;_;)try{if(f=1,y&&(t=2&op[0]?y.return:op[0]?y.throw||((t=y.return)&&t.call(y),0):y.next)&&!(t=t.call(y,op[1])).done)return t;switch(y=0,t&&(op=[2&op[0],t.value]),op[0]){case 0:case 1:t=op;break;case 4:return _.label++,{value:op[1],done:!1};case 5:_.label++,y=op[1],op=[0];continue;case 7:op=_.ops.pop(),_.trys.pop();continue;default:if(!(t=(t=_.trys).length>0&&t[t.length-1])&&(6===op[0]||2===op[0])){_=0;continue}if(3===op[0]&&(!t||op[1]>t[0]&&op[1]<t[3])){_.label=op[1];break}if(6===op[0]&&_.label<t[1]){_.label=t[1],t=op;break}if(t&&_.label<t[2]){_.label=t[2],_.ops.push(op);break}t[2]&&_.ops.pop(),_.trys.pop();continue}op=body.call(thisArg,_)}catch(e){op=[6,e],y=0}finally{f=t=0}if(5&op[0])throw op[1];return{value:op[0]?op[1]:void 0,done:!0}}([n,v])}}};var _default=function(_super){function Mapbox(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Mapbox,_super),Mapbox.prototype.componentWillUnmount=function(){this.gui&&this.gui.destroy(),this.$stats&&document.body.removeChild(this.$stats),this.scene.destroy()},Mapbox.prototype.componentDidMount=function(){return __awaiter(this,void 0,void 0,(function(){var response,scene,layer,_a,_b,gui,styleOptions,pointFolder;return __generator(this,(function(_c){switch(_c.label){case 0:return[4,fetch("https://gw.alipayobjects.com/os/basement_prod/d2e0e930-fd44-4fca-8872-c1037b0fee7b.json")];case 1:return response=_c.sent(),scene=new _scene.Scene({id:"map",type:"mapbox",style:"mapbox://styles/mapbox/streets-v9",center:[110.19382669582967,50.258134],pitch:0,zoom:3}),this.scene=scene,layer=new _layers.PolygonLayer({enablePicking:!1}),_b=(_a=layer).source,[4,response.json()];case 2:return _b.apply(_a,[_c.sent()]).size("name",[0,1e4,5e4,3e4,1e5]).color("name",["#2E8AE6","#69D1AB","#DAF291","#FFD591","#FF7A45","#CF1D49"]).shape("fill").style({opacity:.8}),scene.addLayer(layer),scene.render(),gui=new dat.GUI,this.gui=gui,styleOptions={color:[0,0,0],featureRange:{startIndex:0,endIndex:1/0}},(pointFolder=gui.addFolder("精确更新 feature")).add(styleOptions.featureRange,"startIndex",0,100,1),pointFolder.add(styleOptions.featureRange,"endIndex",0,100,1),pointFolder.addColor(styleOptions,"color").onChange((function(color){var rgb;layer.color("name",[(rgb=color,"#"+rgb.map((function(r){return("0"+Math.floor(r).toString(16)).slice(-2)})).join(""))],{featureRange:{startIndex:styleOptions.featureRange.startIndex,endIndex:styleOptions.featureRange.endIndex}}),scene.render()})),[2]}}))}))},Mapbox.prototype.render=function(){return React.createElement("div",{id:"map",style:{position:"absolute",top:0,left:0,right:0,bottom:0}})},Mapbox}(React.Component);exports.default=_default},754:function(module,exports,__webpack_require__){"use strict";__webpack_require__(121),__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.lazyMultiInject=exports.lazyInject=void 0,__webpack_require__(755);var _eventemitter=__webpack_require__(126),_inversify=__webpack_require__(18),_inversifyInjectDecorators=_interopRequireDefault(__webpack_require__(782)),_types=__webpack_require__(55),_FontService=_interopRequireDefault(__webpack_require__(784)),_IconService=_interopRequireDefault(__webpack_require__(808)),_CameraService=_interopRequireDefault(__webpack_require__(809)),_ControlService=_interopRequireDefault(__webpack_require__(810)),_ConfigService=_interopRequireDefault(__webpack_require__(811)),_CoordinateSystemService=_interopRequireDefault(__webpack_require__(846)),_InteractionService=_interopRequireDefault(__webpack_require__(851)),_LayerService=_interopRequireDefault(__webpack_require__(853)),_StyleAttributeService=_interopRequireDefault(__webpack_require__(854)),_LogService=_interopRequireDefault(__webpack_require__(856)),_SceneService=_interopRequireDefault(__webpack_require__(858)),_ShaderModuleService=_interopRequireDefault(__webpack_require__(875)),_BlurHPass=_interopRequireDefault(__webpack_require__(878)),_BlurVPass=_interopRequireDefault(__webpack_require__(879)),_ColorHalfTonePass=_interopRequireDefault(__webpack_require__(880)),_CopyPass=_interopRequireDefault(__webpack_require__(881)),_HexagonalPixelatePass=_interopRequireDefault(__webpack_require__(882)),_InkPass=_interopRequireDefault(__webpack_require__(883)),_NoisePass=_interopRequireDefault(__webpack_require__(884)),_SepiaPass=_interopRequireDefault(__webpack_require__(885));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var container=new _inversify.Container;container.bind(_types.TYPES.ISceneService).to(_SceneService.default).inSingletonScope(),container.bind(_types.TYPES.IGlobalConfigService).to(_ConfigService.default).inSingletonScope(),container.bind(_types.TYPES.ILayerService).to(_LayerService.default).inSingletonScope(),container.bind(_types.TYPES.IStyleAttributeService).to(_StyleAttributeService.default),container.bind(_types.TYPES.ICameraService).to(_CameraService.default).inSingletonScope(),container.bind(_types.TYPES.ICoordinateSystemService).to(_CoordinateSystemService.default).inSingletonScope(),container.bind(_types.TYPES.IIconService).to(_IconService.default).inSingletonScope(),container.bind(_types.TYPES.IShaderModuleService).to(_ShaderModuleService.default).inSingletonScope(),container.bind(_types.TYPES.ILogService).to(_LogService.default).inSingletonScope(),container.bind(_types.TYPES.IInteractionService).to(_InteractionService.default).inSingletonScope(),container.bind(_types.TYPES.IFontService).to(_FontService.default).inSingletonScope(),container.bind(_types.TYPES.IControlService).to(_ControlService.default).inSingletonScope(),(0,_inversify.decorate)((0,_inversify.injectable)(),_eventemitter.EventEmitter);var DECORATORS=(0,_inversifyInjectDecorators.default)(container,!1);exports.lazyInject=function(serviceIdentifier){var original=DECORATORS.lazyInject(serviceIdentifier);return function(proto,key,descriptor){original.call(this,proto,key),descriptor.initializer=function(){return proto[key]}}};exports.lazyMultiInject=function(serviceIdentifier){var original=DECORATORS.lazyMultiInject(serviceIdentifier);return function(proto,key,descriptor){original.call(this,proto,key),descriptor.initializer=function(){return proto[key]}}},container.bind(_types.TYPES.INewablePostProcessingPass).to(_CopyPass.default).whenTargetNamed("copy"),container.bind(_types.TYPES.INewablePostProcessingPass).to(_BlurHPass.default).whenTargetNamed("blurH"),container.bind(_types.TYPES.INewablePostProcessingPass).to(_BlurVPass.default).whenTargetNamed("blurV"),container.bind(_types.TYPES.INewablePostProcessingPass).to(_NoisePass.default).whenTargetNamed("noise"),container.bind(_types.TYPES.INewablePostProcessingPass).to(_SepiaPass.default).whenTargetNamed("sepia"),container.bind(_types.TYPES.INewablePostProcessingPass).to(_ColorHalfTonePass.default).whenTargetNamed("colorHalftone"),container.bind(_types.TYPES.INewablePostProcessingPass).to(_HexagonalPixelatePass.default).whenTargetNamed("hexagonalPixelate"),container.bind(_types.TYPES.INewablePostProcessingPass).to(_InkPass.default).whenTargetNamed("ink"),container.bind(_types.TYPES.IFactoryPostProcessingPass).toFactory((function(context){return function(named){return context.container.getNamed(_types.TYPES.INewablePostProcessingPass,named)}}));var _default=container;exports.default=_default},784:function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(16),__webpack_require__(26),__webpack_require__(9),__webpack_require__(4),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(11),__webpack_require__(2),__webpack_require__(140),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.DEFAULT_RADIUS=exports.DEFAULT_CUTOFF=exports.DEFAULT_BUFFER=exports.DEFAULT_FONT_SIZE=exports.DEFAULT_FONT_WEIGHT=exports.DEFAULT_FONT_FAMILY=exports.DEFAULT_CHAR_SET=void 0;var _class,_utils=__webpack_require__(60),_tinySdf=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(806)),_inversify=__webpack_require__(18),_font_util=__webpack_require__(403);var DEFAULT_CHAR_SET=function getDefaultCharacterSet(){for(var charSet=[],i=32;128>i;i++)charSet.push(String.fromCharCode(i));return charSet}();exports.DEFAULT_CHAR_SET=DEFAULT_CHAR_SET;exports.DEFAULT_FONT_FAMILY="sans-serif";exports.DEFAULT_FONT_WEIGHT="normal";exports.DEFAULT_FONT_SIZE=24;exports.DEFAULT_BUFFER=3;exports.DEFAULT_CUTOFF=.25;exports.DEFAULT_RADIUS=8;var CACHE_LIMIT=3;function setTextStyle(ctx,fontFamily,fontSize,fontWeight){ctx.font="".concat(fontWeight," ").concat(fontSize,"px ").concat(fontFamily),ctx.fillStyle="black",ctx.textBaseline="middle"}function populateAlphaChannel(alphaChannel,imageData){for(var i=0;i<alphaChannel.length;i++)imageData.data[4*i+3]=alphaChannel[i]}var FontService=(0,_inversify.injectable)()(_class=function(){function FontService(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,FontService),this.fontAtlas=void 0,this.fontOptions=void 0,this.key=void 0,this.cache=new _utils.LRUCache(CACHE_LIMIT)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(FontService,[{key:"init",value:function init(){this.fontOptions={fontFamily:"sans-serif",fontWeight:"normal",characterSet:DEFAULT_CHAR_SET,fontSize:24,buffer:3,sdf:!0,cutoff:.25,radius:8},this.key=""}},{key:"setFontOptions",value:function setFontOptions(option){this.fontOptions=_objectSpread({},this.fontOptions,{},option),this.key=this.getKey();var charSet=this.getNewChars(this.key,this.fontOptions.characterSet),cachedFontAtlas=this.cache.get(this.key);if(!cachedFontAtlas||0!==charSet.length){var fontAtlas=this.generateFontAtlas(this.key,charSet,cachedFontAtlas);this.fontAtlas=fontAtlas,this.cache.set(this.key,fontAtlas)}}},{key:"destroy",value:function destroy(){this.cache.clear()}},{key:"generateFontAtlas",value:function generateFontAtlas(key,characterSet,cachedFontAtlas){var _this$fontOptions=this.fontOptions,fontFamily=_this$fontOptions.fontFamily,fontWeight=_this$fontOptions.fontWeight,fontSize=_this$fontOptions.fontSize,buffer=_this$fontOptions.buffer,sdf=_this$fontOptions.sdf,radius=_this$fontOptions.radius,cutoff=_this$fontOptions.cutoff,canvas=cachedFontAtlas&&cachedFontAtlas.data;canvas||((canvas=document.createElement("canvas")).width=1024);var ctx=canvas.getContext("2d");setTextStyle(ctx,fontFamily,fontSize,fontWeight);var _ref=(0,_font_util.buildMapping)(_objectSpread({getFontWidth:function getFontWidth(_char){return ctx.measureText(_char).width},fontHeight:1*fontSize,buffer:buffer,characterSet:characterSet,maxCanvasWidth:1024},cachedFontAtlas&&{mapping:cachedFontAtlas.mapping,xOffset:cachedFontAtlas.xOffset,yOffset:cachedFontAtlas.yOffset})),mapping=_ref.mapping,canvasHeight=_ref.canvasHeight,xOffset=_ref.xOffset,yOffset=_ref.yOffset;if(canvas.height!==canvasHeight){var imageData=ctx.getImageData(0,0,canvas.width,canvas.height);canvas.height=canvasHeight,ctx.putImageData(imageData,0,0)}if(setTextStyle(ctx,fontFamily,fontSize,fontWeight),sdf){var tinySDF=new _tinySdf.default(fontSize,buffer,radius,cutoff,fontFamily,fontWeight),_imageData=ctx.getImageData(0,0,tinySDF.size,tinySDF.size),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_char2,_iterator=characterSet[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_char2=_step.value,populateAlphaChannel(tinySDF.draw(_char2),_imageData),ctx.putImageData(_imageData,mapping[_char2].x,mapping[_char2].y)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}else{var _iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_char3,_iterator2=characterSet[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0)_char3=_step2.value,ctx.fillText(_char3,mapping[_char3].x,mapping[_char3].y+1*fontSize)}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}return{xOffset:xOffset,yOffset:yOffset,mapping:mapping,data:canvas,width:canvas.width,height:canvas.height}}},{key:"getKey",value:function getKey(){var _this$fontOptions2=this.fontOptions,fontFamily=_this$fontOptions2.fontFamily,fontWeight=_this$fontOptions2.fontWeight,fontSize=_this$fontOptions2.fontSize,buffer=_this$fontOptions2.buffer,sdf=_this$fontOptions2.sdf,radius=_this$fontOptions2.radius,cutoff=_this$fontOptions2.cutoff;return sdf?"".concat(fontFamily," ").concat(fontWeight," ").concat(fontSize," ").concat(buffer," ").concat(radius," ").concat(cutoff):"".concat(fontFamily," ").concat(fontWeight," ").concat(fontSize," ").concat(buffer)}},{key:"getNewChars",value:function getNewChars(key,characterSet){var cachedFontAtlas=this.cache.get(key);if(!cachedFontAtlas)return characterSet;var newChars=[],cachedMapping=cachedFontAtlas.mapping,cachedCharSet=new Set(Object.keys(cachedMapping));return new Set(characterSet).forEach((function(_char4){cachedCharSet.has(_char4)||newChars.push(_char4)})),newChars}},{key:"scale",get:function get(){return 1}},{key:"canvas",get:function get(){var data=this.cache.get(this.key);return data&&data.data}},{key:"mapping",get:function get(){var data=this.cache.get(this.key);return data&&data.mapping}}]),FontService}())||_class;exports.default=FontService},785:function(module,exports,__webpack_require__){"use strict";__webpack_require__(40),__webpack_require__(0),__webpack_require__(2),__webpack_require__(38),Object.defineProperty(exports,"__esModule",{value:!0}),exports.BKDRHash=function BKDRHash(str){var hash=0;str+="x";for(var MAX_SAFE_INTEGER=Math.floor(65745979961613.07),i=0;i<str.length;i++)hash>MAX_SAFE_INTEGER&&(hash=Math.floor(hash/137)),hash=131*hash+str.charCodeAt(i);return hash},exports.djb2hash=function djb2hash(str){str=str.toString();for(var hash=5381,i=str.length;i;)hash=33*hash^str.charCodeAt(--i);return hash>>>0}},786:function(module,exports,__webpack_require__){"use strict";__webpack_require__(0),__webpack_require__(787),__webpack_require__(70),__webpack_require__(38),__webpack_require__(169),__webpack_require__(122),__webpack_require__(268),Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRendererContainer=function createRendererContainer(domId){var $wrapper=document.getElementById(domId);if($wrapper){var $container=document.createElement("div");return $container.style.cssText+="\n      position: absolute;\n      top: 0;\n      z-index:2;\n      height: 100%;\n      width: 100%;\n      pointer-events: none;\n    ",$container.id="l7_canvaslayer",$wrapper.appendChild($container),$container}return null},exports.trim=trim,exports.splitWords=splitWords,exports.create=function create(tagName,className,container){var el=document.createElement(tagName);return el.className=className||"",container&&container.appendChild(el),el},exports.remove=function remove(el){var parent=el.parentNode;parent&&parent.removeChild(el)},exports.addClass=function addClass(el,name){if(void 0!==el.classList)for(var classes=splitWords(name),i=0,len=classes.length;i<len;i++)el.classList.add(classes[i]);else if(!hasClass(el,name)){var className=getClass(el);setClass(el,(className?className+" ":"")+name)}},exports.removeClass=function removeClass(el,name){void 0===el.classList?setClass(el,trim((" "+getClass(el)+" ").replace(" "+name+" "," "))):el.classList.remove(name)},exports.hasClass=hasClass,exports.setClass=setClass,exports.getClass=getClass,exports.empty=function empty(el){for(;el.firstChild;)el.removeChild(el.firstChild)},exports.setTransform=function setTransform(el,value){el.style[transformProp]=value};var docStyle=window.document.documentElement.style;function trim(str){return str.trim?str.trim():str.replace(/^\s+|\s+$/g,"")}function splitWords(str){return trim(str).split(/\s+/)}function hasClass(el,name){if(void 0!==el.classList)return el.classList.contains(name);var className=getClass(el);return 0<className.length&&new RegExp("(^|\\s)"+name+"(\\s|$)").test(className)}function setClass(el,name){el instanceof HTMLElement?el.className=name:el.className.baseVal=name}function getClass(el){return el instanceof SVGElement&&(el=el.correspondingElement),void 0===el.className.baseVal?el.className:el.className.baseVal}var transformProp=function testProp(props){if(!docStyle)return props[0];for(var i in props)if(props[i]&&props[i]in docStyle)return props[i];return props[0]}(["transform","WebkitTransform"])},789:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _wrapNativeSuper(Class){var _cache="function"==typeof Map?new Map:void 0;return(_wrapNativeSuper=function(Class){function Wrapper(){return _construct(Class,arguments,_getPrototypeOf(this).constructor)}if(null===Class||!function _isNativeFunction(fn){return-1!==Function.toString.call(fn).indexOf("[native code]")}(Class))return Class;if("function"!=typeof Class)throw new TypeError("Super expression must either be null or a function");if(void 0!==_cache){if(_cache.has(Class))return _cache.get(Class);_cache.set(Class,Wrapper)}return Wrapper.prototype=Object.create(Class.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,Class)})(Class)}function _construct(){return(_construct=function isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(Parent,args,Class){var a=[null];a.push.apply(a,args);var instance=new(Function.bind.apply(Parent,a));return Class&&_setPrototypeOf(instance,Class.prototype),instance}).apply(null,arguments)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(16),__webpack_require__(59),__webpack_require__(4),__webpack_require__(269),__webpack_require__(40),__webpack_require__(121),__webpack_require__(28),__webpack_require__(142),__webpack_require__(15),__webpack_require__(0),__webpack_require__(14),__webpack_require__(12),__webpack_require__(2),__webpack_require__(790),__webpack_require__(38),__webpack_require__(5),__webpack_require__(397),__webpack_require__(271),__webpack_require__(272),__webpack_require__(273),__webpack_require__(274),__webpack_require__(275),__webpack_require__(276),__webpack_require__(277),__webpack_require__(278),__webpack_require__(279),__webpack_require__(280),__webpack_require__(281),__webpack_require__(282),__webpack_require__(283),__webpack_require__(284),__webpack_require__(285),__webpack_require__(286),__webpack_require__(287),__webpack_require__(288),__webpack_require__(289),__webpack_require__(290),__webpack_require__(291),__webpack_require__(292),__webpack_require__(293),__webpack_require__(6),__webpack_require__(400),Object.defineProperty(exports,"__esModule",{value:!0}),exports.getImage=exports.getArrayBuffer=exports.getJSON=void 0;var AJAXError=function(_Error){function AJAXError(message,status,url){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AJAXError),(_this=_possibleConstructorReturn(this,_getPrototypeOf(AJAXError).call(this,message))).status=void 0,_this.url=void 0,_this.status=status,_this.url=url,_this.name=_this.constructor.name,_this.message=message,_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(AJAXError,_Error),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(AJAXError,[{key:"toString",value:function toString(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}]),AJAXError}(_wrapNativeSuper(Error));function makeRequest(requestParameters){var xhr=new XMLHttpRequest;for(var k in xhr.open("GET",requestParameters.url,!0),requestParameters.headers)requestParameters.headers.hasOwnProperty(k)&&xhr.setRequestHeader(k,requestParameters.headers[k]);return xhr.withCredentials="include"===requestParameters.credentials,xhr}exports.getJSON=function(requestParameters,callback){var xhr=makeRequest(requestParameters);return xhr.setRequestHeader("Accept","application/json"),xhr.onerror=function(){callback(new Error(xhr.statusText))},xhr.onload=function(){if(200<=xhr.status&&300>xhr.status&&xhr.response){var data;try{data=JSON.parse(xhr.response)}catch(err){return callback(err)}callback(null,data)}else 401===xhr.status?callback(new AJAXError("".concat(xhr.statusText),xhr.status,requestParameters.url)):callback(new AJAXError(xhr.statusText,xhr.status,requestParameters.url))},xhr.send(),xhr};var getArrayBuffer=function(requestParameters,callback){var xhr=makeRequest(requestParameters);return xhr.responseType="arraybuffer",xhr.onerror=function(){callback(new Error(xhr.statusText))},xhr.onload=function(){var response=xhr.response;return 0===response.byteLength&&200===xhr.status?callback(new Error("http status 200 returned without content.")):void(200<=xhr.status&&300>xhr.status&&xhr.response?callback(null,{data:response,cacheControl:xhr.getResponseHeader("Cache-Control"),expires:xhr.getResponseHeader("Expires")}):callback(new AJAXError(xhr.statusText,xhr.status,requestParameters.url)))},xhr.send(),xhr};exports.getArrayBuffer=getArrayBuffer;exports.getImage=function(requestParameters,callback){return getArrayBuffer(requestParameters,(function(err,imgData){if(err)callback(err);else if(imgData){var img=new window.Image;img.crossOrigin="anonymous";var URL=window.URL||window.webkitURL;img.onload=function(){callback(null,img),URL.revokeObjectURL(img.src)};var blob=new window.Blob([new Uint8Array(imgData.data)],{type:"image/png"});img.src=imgData.data.byteLength?URL.createObjectURL(blob):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}}))}},799:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if(Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(9),__webpack_require__(23),__webpack_require__(4),__webpack_require__(27),__webpack_require__(40),__webpack_require__(203),__webpack_require__(800),__webpack_require__(0),__webpack_require__(2),__webpack_require__(402),__webpack_require__(38),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.extent=function extent(data){var dataExtent=[1/0,1/0,-1/0,-1/0];return data.forEach((function(item){var coordinates=item.coordinates;!function caculExtent(dataExtent,coords){return Array.isArray(coords[0])?coords.forEach((function(coord){caculExtent(dataExtent,coord)})):(dataExtent[0]>coords[0]&&(dataExtent[0]=coords[0]),dataExtent[1]>coords[1]&&(dataExtent[1]=coords[1]),dataExtent[2]<coords[0]&&(dataExtent[2]=coords[0]),dataExtent[3]<coords[1]&&(dataExtent[3]=coords[1])),dataExtent}(dataExtent,coordinates)})),dataExtent},exports.tranfrormCoord=function tranfrormCoord(data,cb){return function transform(item,cb){return Array.isArray(item[0])?item.map((function(coord){return transform(coord,cb)})):cb(item)}(data,cb)},exports.lngLatToMeters=function lngLatToMeters(lnglat){var validate=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],accuracy=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{enable:!0,decimal:1},lng=(lnglat=validateLngLat(lnglat,validate))[0],lat=lnglat[1],x=lng*originShift/180,y=Math.log(Math.tan((90+lat)*Math.PI/360))/(Math.PI/180);return y=y*originShift/180,accuracy.enable&&(x=+x.toFixed(accuracy.decimal),y=+y.toFixed(accuracy.decimal)),3===lnglat.length?[x,y,lnglat[2]]:[x,y]},exports.metersToLngLat=function metersToLngLat(meters){var decimal=1<arguments.length&&void 0!==arguments[1]?arguments[1]:6,x=meters[0],y=meters[1],lng=x/originShift*180,lat=y/originShift*180;return lat=180/Math.PI*(2*Math.atan(Math.exp(lat*Math.PI/180))-Math.PI/2),null!=decimal&&(lng=+lng.toFixed(decimal),lat=+lat.toFixed(decimal)),3===meters.length?[lng,lat,meters[2]]:[lng,lat]},exports.longitude=longitude,exports.latitude=latitude,exports.validateLngLat=validateLngLat,exports.aProjectFlat=function aProjectFlat(lnglat){var lat=Math.max(Math.min(85.0511287798,lnglat[1]),-85.0511287798),d=Math.PI/180,x=lnglat[0]*d,y=lat*d;y=Math.log(Math.tan(Math.PI/4+y/2));var a=.5/Math.PI,c=-.5/Math.PI;return x=268435456*(a*x+.5),y=268435456*(c*y+(d=.5)),[parseInt(x.toString(),10),parseInt(y.toString(),10)]},exports.unProjectFlat=function unProjectFlat(px){var a=.5/Math.PI,c=-.5/Math.PI,d=.5,_px=_slicedToArray(px,2),x=_px[0],y=_px[1];return x=(x/268435456-.5)/a,y=(y/268435456-d)/c,y=2*(Math.atan(Math.pow(Math.E,y))-Math.PI/4),d=Math.PI/180,[x/d,y/d]},exports.lnglatDistance=function lnglatDistance(coordinates1,coordinates2,units){var dLat=(0,_helpers.degreesToRadians)(coordinates2[1]-coordinates1[1]),dLon=(0,_helpers.degreesToRadians)(coordinates2[0]-coordinates1[0]),lat1=(0,_helpers.degreesToRadians)(coordinates1[1]),lat2=(0,_helpers.degreesToRadians)(coordinates2[1]),a=Math.pow(Math.sin(dLat/2),2)+Math.pow(Math.sin(dLon/2),2)*Math.cos(lat1)*Math.cos(lat2);return(0,_helpers.radiansToLength)(2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),"meters")};var _helpers=__webpack_require__(294),originShift=2*Math.PI*6378137/2;function longitude(lng){if(null==lng)throw new Error("lng is required");return(180<lng||-180>lng)&&(180<(lng%=360)&&(lng=-360+lng),-180>lng&&(lng=360+lng),0===lng&&(lng=0)),lng}function latitude(lat){if(null==lat)throw new Error("lat is required");return(90<lat||-90>lat)&&(90<(lat%=180)&&(lat=-180+lat),-90>lat&&(lat=180+lat),0===lat&&(lat=0)),lat}function validateLngLat(lnglat,validate){if(!1===validate)return lnglat;var lng=longitude(lnglat[0]),lat=latitude(lnglat[1]);return 85<lat&&(lat=85),-85>lat&&(lat=-85),3===lnglat.length?[lng,lat,lnglat[2]]:[lng,lat]}},804:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(208),__webpack_require__(9),__webpack_require__(209),__webpack_require__(0),__webpack_require__(11),__webpack_require__(10),Object.defineProperty(exports,"__esModule",{value:!0}),exports.LRUCache=void 0;var LRUCache=function(){function LRUCache(){var limit=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50,destroy=1<arguments.length?arguments[1]:void 0;(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,LRUCache),this.limit=void 0,this.cache=void 0,this.destroy=void 0,this.order=void 0,this.limit=limit,this.destroy=destroy||this.defaultDestroy,this.order=[],this.clear()}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(LRUCache,[{key:"clear",value:function clear(){var _this=this;this.order.forEach((function(key){_this.delete(key)})),this.cache={},this.order=[]}},{key:"get",value:function get(key){var value=this.cache[key];return value&&(this.deleteOrder(key),this.appendOrder(key)),value}},{key:"set",value:function set(key,value){this.cache[key]?(this.delete(key),this.cache[key]=value,this.appendOrder(key)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[key]=value,this.appendOrder(key))}},{key:"delete",value:function _delete(key){var value=this.cache[key];value&&(this.deleteCache(key),this.deleteOrder(key),this.destroy(value,key))}},{key:"deleteCache",value:function deleteCache(key){delete this.cache[key]}},{key:"deleteOrder",value:function deleteOrder(key){var index=this.order.findIndex((function(o){return o===key}));0<=index&&this.order.splice(index,1)}},{key:"appendOrder",value:function appendOrder(key){this.order.push(key)}},{key:"defaultDestroy",value:function defaultDestroy(){return null}}]),LRUCache}();exports.LRUCache=LRUCache},805:function(module,exports,__webpack_require__){"use strict";__webpack_require__(9),__webpack_require__(121),__webpack_require__(0),__webpack_require__(10),Object.defineProperty(exports,"__esModule",{value:!0}),exports.bindAll=function bindAll(fns,context){fns.forEach((function(fn){context[fn]&&(context[fn]=context[fn].bind(context))}))}},808:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(16),__webpack_require__(26),__webpack_require__(9),__webpack_require__(4),__webpack_require__(15),__webpack_require__(0),__webpack_require__(14),__webpack_require__(11),__webpack_require__(12),__webpack_require__(2),__webpack_require__(69),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),__webpack_require__(400),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _class,_eventemitter=__webpack_require__(126),_inversify=__webpack_require__(18),_font_util=__webpack_require__(403),IconService=(0,_inversify.injectable)()(_class=function(_eventemitter$EventEm){function IconService(){var _getPrototypeOf2,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,IconService);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(IconService)).call.apply(_getPrototypeOf2,[this].concat(args)))).canvasHeight=void 0,_this.textrure=void 0,_this.canvas=void 0,_this.iconData=void 0,_this.iconMap=void 0,_this.ctx=void 0,_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(IconService,_eventemitter$EventEm),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(IconService,[{key:"init",value:function init(){this.iconData=[],this.iconMap={},this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function addImage(id,image){var _this2=this,imagedata=new Image;if(this.hasImage(id))throw new Error("Image Id already exists");this.loadImage(image).then((function(img){imagedata=img,_this2.iconData.push({id:id,image:imagedata,width:64,height:64}),_this2.update()}))}},{key:"getTexture",value:function getTexture(){return this.textrure}},{key:"getIconMap",value:function getIconMap(){return this.iconMap}},{key:"getCanvas",value:function getCanvas(){return this.canvas}},{key:"hasImage",value:function hasImage(id){return this.iconMap.hasOwnProperty(id)}},{key:"removeImage",value:function removeImage(id){this.hasImage(id)&&(this.iconData=this.iconData.filter((function(icon){return icon.id!==id})),delete this.iconMap[id],this.update())}},{key:"destroy",value:function destroy(){this.iconData=[],this.iconMap={}}},{key:"update",value:function update(){this.updateIconMap(),this.updateIconAtlas(),this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function updateIconAtlas(){var _this3=this;this.canvas.width=1024,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach((function(item){var _this3$iconMap$item=_this3.iconMap[item],x=_this3$iconMap$item.x,y=_this3$iconMap$item.y,image=_this3$iconMap$item.image;_this3.ctx.drawImage(image,x,y,64,64)}))}},{key:"updateIconMap",value:function updateIconMap(){var _ref=(0,_font_util.buildIconMaping)(this.iconData,3,1024),mapping=_ref.mapping,canvasHeight=_ref.canvasHeight;this.iconMap=mapping,this.canvasHeight=canvasHeight}},{key:"loadImage",value:function loadImage(url){return new Promise((function(resolve,reject){if(url instanceof HTMLImageElement)resolve(url);else{var image=new Image;image.crossOrigin="anonymous",image.onload=function(){resolve(image)},image.onerror=function(){reject(new Error("Could not load image at "+url))},image.src=url instanceof File?URL.createObjectURL(url):url}}))}}]),IconService}(_eventemitter.EventEmitter))||_class;exports.default=IconService},809:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if(Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(23),__webpack_require__(4),__webpack_require__(40),__webpack_require__(0),__webpack_require__(2),__webpack_require__(38),__webpack_require__(5),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _class,_glMatrix=__webpack_require__(177),CameraService=(0,__webpack_require__(18).injectable)()(_class=function(){function CameraService(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,CameraService),this.viewport=void 0,this.overridedViewProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0,this.jitteredProjectionMatrix=void 0}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(CameraService,[{key:"init",value:function init(){}},{key:"update",value:function update(viewport){this.viewport=viewport}},{key:"getProjectionMatrix",value:function getProjectionMatrix(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getViewMatrix",value:function getViewMatrix(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function getViewMatrixUncentered(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function getViewProjectionMatrix(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function getZoom(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function getZoomScale(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function getCenter(){var _this$viewport$getCen2=_slicedToArray(this.viewport.getCenter(),2);return[_this$viewport$getCen2[0],_this$viewport$getCen2[1]]}},{key:"getFocalDistance",value:function getFocalDistance(){return this.viewport.getFocalDistance()}},{key:"projectFlat",value:function projectFlat(lngLat,scale){return this.viewport.projectFlat(lngLat,scale)}},{key:"setViewProjectionMatrix",value:function setViewProjectionMatrix(viewProjectionMatrix){this.overridedViewProjectionMatrix=viewProjectionMatrix}},{key:"jitterProjectionMatrix",value:function jitterProjectionMatrix(x,y){var translation=_glMatrix.mat4.fromTranslation(_glMatrix.mat4.create(),[x,y,0]);this.jitteredProjectionMatrix=_glMatrix.mat4.multiply(_glMatrix.mat4.create(),translation,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=_glMatrix.mat4.multiply(_glMatrix.mat4.create(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function clearJitterProjectionMatrix(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),CameraService}())||_class;exports.default=CameraService},810:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(59),__webpack_require__(4),__webpack_require__(209),__webpack_require__(0),__webpack_require__(2),__webpack_require__(5),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _class,_utils=__webpack_require__(60),ControlService=(0,__webpack_require__(18).injectable)()(_class=function(){function ControlService(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,ControlService),this.container=void 0,this.controlCorners=void 0,this.controlContainer=void 0,this.controls=[]}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ControlService,[{key:"init",value:function init(cfg){this.container=cfg.container,this.initControlPos()}},{key:"addControl",value:function addControl(ctr,mapService){ctr.addTo(mapService),this.controls.push(ctr)}},{key:"removeControl",value:function removeControl(ctr){var index=this.controls.indexOf(ctr);return-1<index&&this.controls.splice(index,1),ctr.remove(),this}},{key:"destroy",value:function destroy(){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=this.controls[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_step.value.remove()}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function initControlPos(){function createCorner(vSide,hSide){corners[vSide+hSide]=_utils.DOM.create("div","l7-"+vSide+" l7-"+hSide,container)}var corners=this.controlCorners={},container=this.controlContainer=_utils.DOM.create("div","l7-control-container",this.container);createCorner("top","left"),createCorner("top","right"),createCorner("bottom","left"),createCorner("bottom","right")}},{key:"clearControlPos",value:function clearControlPos(){for(var i in this.controlCorners)this.controlCorners[i]&&_utils.DOM.remove(this.controlCorners[i]);_utils.DOM.remove(this.controlContainer),delete this.controlCorners,delete this.controlContainer}}]),ControlService}())||_class;exports.default=ControlService},811:function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(3),__webpack_require__(26),__webpack_require__(9),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(11),__webpack_require__(10),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _class,_ajv=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(812)),_inversify=__webpack_require__(18);var defaultGlobalConfig={type:"amap",zoom:5,center:[107.622,39.266],pitch:0,colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"]},ajv=new _ajv.default({allErrors:!0,verbose:!0}),GlobalConfigService=(0,_inversify.injectable)()(_class=function(){function GlobalConfigService(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,GlobalConfigService),this.config=defaultGlobalConfig,this.layerConfigValidatorCache={}}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(GlobalConfigService,[{key:"getConfig",value:function getConfig(){return this.config}},{key:"setAndCheckConfig",value:function setAndCheckConfig(config){return this.config=function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}({},this.config,{},config),!0}},{key:"reset",value:function reset(){this.config=defaultGlobalConfig}},{key:"registerLayerConfigSchemaValidator",value:function registerLayerConfigSchemaValidator(layerName,schema){this.layerConfigValidatorCache[layerName]||(this.layerConfigValidatorCache[layerName]=ajv.compile(schema))}},{key:"validateLayerConfig",value:function validateLayerConfig(layerName,data){var validate=this.layerConfigValidatorCache[layerName];if(validate){var valid=validate(data);if(!valid)return{valid:valid,errors:validate.errors,errorText:ajv.errorsText(validate.errors)}}return{valid:!0,errors:null,errorText:null}}}]),GlobalConfigService}())||_class;exports.default=GlobalConfigService},846:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(9),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(847),__webpack_require__(0),__webpack_require__(11),__webpack_require__(10),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_class,_class2,_descriptor,_glMatrix=__webpack_require__(177),_inversify=__webpack_require__(18),_types=__webpack_require__(55),_project=__webpack_require__(850),_ICoordinateSystemService=__webpack_require__(412);var VECTOR_TO_POINT_MATRIX=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],CoordinateSystemService=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_types.TYPES.ICameraService),_dec((_descriptor=function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}((_class2=function(){function CoordinateSystemService(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,CoordinateSystemService),function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(this,"cameraService",_descriptor,this),this.coordinateSystem=void 0,this.viewportCenter=void 0,this.viewportCenterProjection=void 0,this.pixelsPerDegree=void 0,this.pixelsPerDegree2=void 0,this.pixelsPerMeter=void 0}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(CoordinateSystemService,[{key:"refresh",value:function refresh(){var zoom=this.cameraService.getZoom(),zoomScale=this.cameraService.getZoomScale(),center=this.cameraService.getCenter(),_ref=(0,_project.getDistanceScales)({latitude:center[1],zoom:zoom}),pixelsPerMeter=_ref.pixelsPerMeter,pixelsPerDegree=_ref.pixelsPerDegree;this.viewportCenter=center,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=pixelsPerMeter,this.pixelsPerDegree=pixelsPerDegree,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===_ICoordinateSystemService.CoordinateSystem.LNGLAT||this.coordinateSystem===_ICoordinateSystemService.CoordinateSystem.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===_ICoordinateSystemService.CoordinateSystem.LNGLAT_OFFSET?this.calculateLnglatOffset(center,zoom):this.coordinateSystem===_ICoordinateSystemService.CoordinateSystem.P20_OFFSET&&this.calculateLnglatOffset(center,zoom,zoomScale,!0)}},{key:"getCoordinateSystem",value:function getCoordinateSystem(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function setCoordinateSystem(coordinateSystem){this.coordinateSystem=coordinateSystem}},{key:"getViewportCenter",value:function getViewportCenter(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function getViewportCenterProjection(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function getPixelsPerDegree(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function getPixelsPerDegree2(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function getPixelsPerMeter(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function calculateLnglatOffset(center,zoom,scale,flipY){var _ref2=(0,_project.getDistanceScales)({latitude:center[1],zoom:zoom,scale:scale,flipY:flipY,highPrecision:!0}),ppm=_ref2.pixelsPerMeter,ppd=_ref2.pixelsPerDegree,pixelsPerDegree2=_ref2.pixelsPerDegree2,viewMatrix=this.cameraService.getViewMatrix(),projectionMatrix=this.cameraService.getProjectionMatrix(),viewProjectionMatrix=_glMatrix.mat4.multiply([],projectionMatrix,viewMatrix),positionPixels=this.cameraService.projectFlat([Math.fround(center[0]),Math.fround(center[1])],Math.pow(2,zoom));this.viewportCenterProjection=_glMatrix.vec4.transformMat4([],[positionPixels[0],positionPixels[1],0,1],viewProjectionMatrix),viewMatrix=this.cameraService.getViewMatrixUncentered()||viewMatrix,viewProjectionMatrix=_glMatrix.mat4.multiply([],projectionMatrix,viewMatrix),viewProjectionMatrix=_glMatrix.mat4.multiply([],viewProjectionMatrix,VECTOR_TO_POINT_MATRIX),this.cameraService.setViewProjectionMatrix(viewProjectionMatrix),this.pixelsPerMeter=ppm,this.pixelsPerDegree=ppd,this.pixelsPerDegree2=pixelsPerDegree2}}]),CoordinateSystemService}()).prototype,"cameraService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=CoordinateSystemService},850:function(module,exports,__webpack_require__){"use strict";__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDistanceScales=function getDistanceScales(_ref){var _ref$latitude=_ref.latitude,latitude=void 0===_ref$latitude?0:_ref$latitude,_ref$zoom=_ref.zoom,zoom=void 0===_ref$zoom?0:_ref$zoom,scale=_ref.scale,_ref$highPrecision=_ref.highPrecision,_ref$flipY=_ref.flipY,flipY=void 0!==_ref$flipY&&_ref$flipY;scale=void 0===scale?Math.pow(2,zoom):scale;var result={},worldSize=TILE_SIZE*scale,latCosine=Math.cos(latitude*DEGREES_TO_RADIANS),pixelsPerDegreeX=worldSize/360,pixelsPerDegreeY=pixelsPerDegreeX/latCosine,altPixelsPerMeter=worldSize/EARTH_CIRCUMFERENCE/latCosine;if(result.pixelsPerMeter=[altPixelsPerMeter,-altPixelsPerMeter,altPixelsPerMeter],result.metersPerPixel=[1/altPixelsPerMeter,-1/altPixelsPerMeter,1/altPixelsPerMeter],result.pixelsPerDegree=[pixelsPerDegreeX,-pixelsPerDegreeY,altPixelsPerMeter],result.degreesPerPixel=[1/pixelsPerDegreeX,-1/pixelsPerDegreeY,1/altPixelsPerMeter],void 0!==_ref$highPrecision&&_ref$highPrecision){var latCosine2=DEGREES_TO_RADIANS*Math.tan(latitude*DEGREES_TO_RADIANS)/latCosine,altPixelsPerDegree2=worldSize/EARTH_CIRCUMFERENCE*latCosine2,altPixelsPerMeter2=altPixelsPerDegree2/pixelsPerDegreeY*altPixelsPerMeter;result.pixelsPerDegree2=[0,-pixelsPerDegreeX*latCosine2/2,altPixelsPerDegree2],result.pixelsPerMeter2=[altPixelsPerMeter2,0,altPixelsPerMeter2],flipY&&(result.pixelsPerDegree2[1]=-result.pixelsPerDegree2[1],result.pixelsPerMeter2[1]=-result.pixelsPerMeter2[1])}return flipY&&(result.pixelsPerMeter[1]=-result.pixelsPerMeter[1],result.metersPerPixel[1]=-result.metersPerPixel[1],result.pixelsPerDegree[1]=-result.pixelsPerDegree[1],result.degreesPerPixel[1]=-result.degreesPerPixel[1]),result};var DEGREES_TO_RADIANS=Math.PI/180,TILE_SIZE=512,EARTH_CIRCUMFERENCE=4003e4},851:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(16),__webpack_require__(9),__webpack_require__(4),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(15),__webpack_require__(0),__webpack_require__(14),__webpack_require__(11),__webpack_require__(12),__webpack_require__(2),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_dec3,_class,_class2,_descriptor,_descriptor2,_temp,_eventemitter=_interopRequireDefault(__webpack_require__(126)),_hammerjs=_interopRequireDefault(__webpack_require__(852)),_inversify=__webpack_require__(18),_types=__webpack_require__(55),_IInteractionService=__webpack_require__(298);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var InteractionService=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_types.TYPES.IMapService),_dec3=(0,_inversify.inject)(_types.TYPES.ILogService),_dec((_temp=function(_eventemitter$default){function InteractionService(){var _getPrototypeOf2,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,InteractionService);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,(_getPrototypeOf2=_getPrototypeOf(InteractionService)).call.apply(_getPrototypeOf2,[this].concat(args))),_initializerDefineProperty(_assertThisInitialized(_this),"mapService",_descriptor,_assertThisInitialized(_this)),_initializerDefineProperty(_assertThisInitialized(_this),"logger",_descriptor2,_assertThisInitialized(_this)),_this.hammertime=void 0,_this.onHover=function(_ref){var x=_ref.x,y=_ref.y;_this.emit(_IInteractionService.InteractionEvent.Hover,{x:x,y:y})},_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(InteractionService,_eventemitter$default),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(InteractionService,[{key:"init",value:function init(){this.addEventListenerOnMap()}},{key:"destroy",value:function destroy(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(_IInteractionService.InteractionEvent.Hover)}},{key:"triggerHover",value:function triggerHover(_ref2){var x=_ref2.x,y=_ref2.y;this.emit(_IInteractionService.InteractionEvent.Hover,{x:x,y:y})}},{key:"addEventListenerOnMap",value:function addEventListenerOnMap(){var $containter=this.mapService.getMapContainer();if($containter){var hammertime=new _hammerjs.default($containter);hammertime.get("pan").set({direction:_hammerjs.default.DIRECTION_ALL}),hammertime.get("pinch").set({enable:!0}),$containter.addEventListener("mousemove",this.onHover),this.hammertime=hammertime,this.logger.info("add event listeners on canvas")}}},{key:"removeEventListenerOnMap",value:function removeEventListenerOnMap(){var $containter=this.mapService.getMapContainer();$containter&&$containter.removeEventListener("mousemove",this.onHover)}}]),InteractionService}(_eventemitter.default),_descriptor=_applyDecoratedDescriptor((_class2=_temp).prototype,"mapService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor2=_applyDecoratedDescriptor(_class2.prototype,"logger",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=InteractionService},853:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(9),__webpack_require__(4),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(0),__webpack_require__(11),__webpack_require__(2),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_dec3,_class,_class2,_descriptor,_descriptor2,_inversify=__webpack_require__(18),_types=__webpack_require__(55);function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var LayerService=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_types.TYPES.IRendererService),_dec3=(0,_inversify.inject)(_types.TYPES.IGlobalConfigService),_dec((_descriptor=_applyDecoratedDescriptor((_class2=function(){function LayerService(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,LayerService),this.layers=[],_initializerDefineProperty(this,"renderService",_descriptor,this),_initializerDefineProperty(this,"configService",_descriptor2,this)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(LayerService,[{key:"add",value:function add(layer){this.layers.push(layer)}},{key:"initLayers",value:function initLayers(){this.layers.forEach((function(layer){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=layer.plugins[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_step.value.apply(layer)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}layer.init()}))}},{key:"renderLayers",value:function renderLayers(){this.layers.forEach((function(layer){layer.hooks.beforeRender.call(),layer.render(),layer.hooks.afterRender.call()}))}},{key:"destroy",value:function destroy(){this.layers.forEach((function(layer){return layer.destroy()})),this.layers=[]}}]),LayerService}()).prototype,"renderService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor2=_applyDecoratedDescriptor(_class2.prototype,"configService",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=LayerService},854:function(module,exports,__webpack_require__){"use strict";var _bytesPerElementMap;function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(26),__webpack_require__(109),__webpack_require__(9),__webpack_require__(62),__webpack_require__(59),__webpack_require__(23),__webpack_require__(4),__webpack_require__(27),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(40),__webpack_require__(28),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(11),__webpack_require__(2),__webpack_require__(38),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_class,_class2,_descriptor,_inversify=__webpack_require__(18),_types=__webpack_require__(55),_gl=__webpack_require__(173),_StyleAttribute=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(855));var bytesPerElementMap=(_defineProperty(_bytesPerElementMap={},_gl.gl.FLOAT,4),_defineProperty(_bytesPerElementMap,_gl.gl.UNSIGNED_BYTE,1),_defineProperty(_bytesPerElementMap,_gl.gl.UNSIGNED_SHORT,2),_bytesPerElementMap),StyleAttributeService=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_types.TYPES.IRendererService),_dec((_descriptor=function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}((_class2=function(){function StyleAttributeService(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,StyleAttributeService),function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(this,"rendererService",_descriptor,this),this.attributes=[],this.featureLayout={sizePerElement:0,elements:[]}}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(StyleAttributeService,[{key:"registerStyleAttribute",value:function registerStyleAttribute(options){var attributeToUpdate=this.getLayerStyleAttribute(options.name||"");return attributeToUpdate?attributeToUpdate.setProps(options):(attributeToUpdate=new _StyleAttribute.default(options),this.attributes.push(attributeToUpdate)),attributeToUpdate}},{key:"updateStyleAttribute",value:function updateStyleAttribute(attributeName,options,updateOptions){var attributeToUpdate=this.getLayerStyleAttribute(attributeName);attributeToUpdate||(attributeToUpdate=this.registerStyleAttribute(_objectSpread({},options,{name:attributeName})));var scale=options.scale;scale&&attributeToUpdate&&(attributeToUpdate.scale=scale,attributeToUpdate.needRescale=!0,attributeToUpdate.needRemapping=!0,attributeToUpdate.needRegenerateVertices=!0,updateOptions&&updateOptions.featureRange&&(attributeToUpdate.featureRange=updateOptions.featureRange))}},{key:"getLayerStyleAttributes",value:function getLayerStyleAttributes(){return this.attributes}},{key:"getLayerStyleAttribute",value:function getLayerStyleAttribute(attributeName){return this.attributes.find((function(attribute){return attribute.name===attributeName}))}},{key:"updateAttributeByFeatureRange",value:function updateAttributeByFeatureRange(attributeName,features){var startFeatureIdx=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,endFeatureIdx=3<arguments.length?arguments[3]:void 0,attributeToUpdate=this.attributes.find((function(attribute){return attribute.name===attributeName}));if(attributeToUpdate&&attributeToUpdate.descriptor){var descriptor=attributeToUpdate.descriptor,update=descriptor.update,buffer=descriptor.buffer,_descriptor$size=descriptor.size,size=void 0===_descriptor$size?0:_descriptor$size,bytesPerElement=bytesPerElementMap[buffer.type||_gl.gl.FLOAT];if(update){var _this$featureLayout=this.featureLayout,elements=_this$featureLayout.elements,sizePerElement=_this$featureLayout.sizePerElement,featuresToUpdate=elements.slice(startFeatureIdx,endFeatureIdx);if(!featuresToUpdate.length)return;var offset=featuresToUpdate[0].offset,updatedBufferData=featuresToUpdate.map((function(_ref,attributeIdx){for(var normal,featureIdx=_ref.featureIdx,vertices=_ref.vertices,normals=_ref.normals,verticesNumForCurrentFeature=vertices.length/sizePerElement,featureData=[],vertexIdx=0;vertexIdx<verticesNumForCurrentFeature;vertexIdx++)normal=normals?normals.slice(3*vertexIdx,3*vertexIdx+3):[],featureData.push.apply(featureData,_toConsumableArray(update(features[featureIdx],featureIdx,vertices.slice(vertexIdx*sizePerElement,vertexIdx*sizePerElement+sizePerElement),attributeIdx,normal)));return featureData})).reduce((function(prev,cur){return prev.push.apply(prev,_toConsumableArray(cur)),prev}),[]);attributeToUpdate.vertexAttribute.updateBuffer({data:updatedBufferData,offset:offset*size*bytesPerElement})}}}},{key:"createAttributesAndIndices",value:function createAttributesAndIndices(features,triangulation){var _this=this,descriptors=this.attributes.map((function(attr){return attr.descriptor})),verticesNum=0,vertices=[],indices=[],normals=[],size=3;features.forEach((function(feature,featureIdx){var _triangulation=triangulation(feature),indicesForCurrentFeature=_triangulation.indices,verticesForCurrentFeature=_triangulation.vertices,normalsForCurrentFeature=_triangulation.normals,vertexSize=_triangulation.size;indices.push.apply(indices,_toConsumableArray(indicesForCurrentFeature.map((function(i){return i+verticesNum})))),vertices.push.apply(vertices,_toConsumableArray(verticesForCurrentFeature)),normalsForCurrentFeature&&normals.push.apply(normals,_toConsumableArray(normalsForCurrentFeature)),size=vertexSize;var verticesNumForCurrentFeature=verticesForCurrentFeature.length/vertexSize;_this.featureLayout.sizePerElement=size,_this.featureLayout.elements.push({featureIdx:featureIdx,vertices:verticesForCurrentFeature,normals:normalsForCurrentFeature,offset:verticesNum}),verticesNum+=verticesNumForCurrentFeature;for(var _loop=function(vertexIdx){descriptors.forEach((function(descriptor){if(descriptor&&descriptor.update){var _descriptor$buffer$da,normal=(null==normalsForCurrentFeature?void 0:normalsForCurrentFeature.slice(3*vertexIdx,3*vertexIdx+3))||[];(_descriptor$buffer$da=descriptor.buffer.data).push.apply(_descriptor$buffer$da,_toConsumableArray(descriptor.update(feature,featureIdx,verticesForCurrentFeature.slice(vertexIdx*vertexSize,vertexIdx*vertexSize+vertexSize),vertexIdx,normal)))}}))},vertexIdx=0;vertexIdx<verticesNumForCurrentFeature;vertexIdx++)_loop(vertexIdx)}));var _this$rendererService=this.rendererService,createAttribute=_this$rendererService.createAttribute,createBuffer=_this$rendererService.createBuffer,createElements=_this$rendererService.createElements,attributes={};descriptors.forEach((function(descriptor,attributeIdx){if(descriptor){var buffer=descriptor.buffer,rest=(descriptor.update,descriptor.name,_objectWithoutProperties(descriptor,["buffer","update","name"])),vertexAttribute=createAttribute(_objectSpread({buffer:createBuffer(buffer)},rest));attributes[descriptor.name||""]=vertexAttribute,_this.attributes[attributeIdx].vertexAttribute=vertexAttribute}}));var elements=createElements({data:indices,type:_gl.gl.UNSIGNED_INT,count:indices.length});return{attributes:attributes,elements:elements}}},{key:"clearAllAttributes",value:function clearAllAttributes(){this.attributes.forEach((function(attribute){attribute.vertexAttribute&&attribute.vertexAttribute.destroy()})),this.attributes=[]}}]),StyleAttributeService}()).prototype,"rendererService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=StyleAttributeService},855:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(4),__webpack_require__(27),__webpack_require__(28),__webpack_require__(37),__webpack_require__(0),__webpack_require__(2),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _lodash=__webpack_require__(72),StyleAttribute=function(){function StyleAttribute(options){var _this=this;(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,StyleAttribute),this.name=void 0,this.type=void 0,this.scale=void 0,this.descriptor=void 0,this.featureBufferLayout=[],this.needRescale=!1,this.needRemapping=!1,this.needRegenerateVertices=!1,this.featureRange={startIndex:0,endIndex:1/0},this.vertexAttribute=void 0,this.defaultCallback=function(params){var _this$scale;return 0===params.length?(null===(_this$scale=_this.scale)||void 0===_this$scale?void 0:_this$scale.values)||[]:params.map((function(param,idx){var _this$scale2;return(0,(null===(_this$scale2=_this.scale)||void 0===_this$scale2?void 0:_this$scale2.scalers)[idx].func)(param)}))},this.setProps(options)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(StyleAttribute,[{key:"setProps",value:function setProps(options){Object.assign(this,options)}},{key:"mapping",value:function mapping(params){var _this$scale3;if(null===(_this$scale3=this.scale)||void 0===_this$scale3?void 0:_this$scale3.callback){var _this$scale4,ret=null===(_this$scale4=this.scale)||void 0===_this$scale4?void 0:_this$scale4.callback(params);if(!(0,_lodash.isNil)(ret))return[ret]}return this.defaultCallback(params)}}]),StyleAttribute}();exports.default=StyleAttribute},856:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _class,_inversify=__webpack_require__(18),Logger=new(__webpack_require__(1041).Log)({id:"L7"}).enable(),LogService=(0,_inversify.injectable)()(_class=function(){function LogService(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LogService)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(LogService,[{key:"error",value:function error(message){Logger.error(message)()}},{key:"warn",value:function warn(message){Logger.warn(message)()}},{key:"info",value:function info(message){Logger.info(message)()}}]),LogService}())||_class;exports.default=LogService},857:function(module,exports){},858:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}var gen=fn.apply(self,args);_next(void 0)}))}}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(9),__webpack_require__(4),__webpack_require__(27),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(28),__webpack_require__(15),__webpack_require__(0),__webpack_require__(14),__webpack_require__(11),__webpack_require__(12),__webpack_require__(2),__webpack_require__(69),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),__webpack_require__(87),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_dec3,_dec4,_dec5,_dec6,_dec7,_dec8,_dec9,_dec10,_dec11,_dec12,_class,_class2,_descriptor,_descriptor2,_descriptor3,_descriptor4,_descriptor5,_descriptor6,_descriptor7,_descriptor8,_descriptor9,_descriptor10,_descriptor11,_temp,_eventemitter=__webpack_require__(126),_inversify=__webpack_require__(18),_tapable=__webpack_require__(859),_types=__webpack_require__(55),_dom=__webpack_require__(874);function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var Scene=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_types.TYPES.IIconService),_dec3=(0,_inversify.inject)(_types.TYPES.IFontService),_dec4=(0,_inversify.inject)(_types.TYPES.IControlService),_dec5=(0,_inversify.inject)(_types.TYPES.ILogService),_dec6=(0,_inversify.inject)(_types.TYPES.IGlobalConfigService),_dec7=(0,_inversify.inject)(_types.TYPES.IMapService),_dec8=(0,_inversify.inject)(_types.TYPES.IRendererService),_dec9=(0,_inversify.inject)(_types.TYPES.ILayerService),_dec10=(0,_inversify.inject)(_types.TYPES.ICameraService),_dec11=(0,_inversify.inject)(_types.TYPES.IInteractionService),_dec12=(0,_inversify.inject)(_types.TYPES.IShaderModuleService),_dec((_temp=function(_eventemitter$EventEm){function Scene(){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Scene),_this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,_getPrototypeOf(Scene).call(this)),_initializerDefineProperty(_assertThisInitialized(_this),"iconService",_descriptor,_assertThisInitialized(_this)),_initializerDefineProperty(_assertThisInitialized(_this),"fontService",_descriptor2,_assertThisInitialized(_this)),_initializerDefineProperty(_assertThisInitialized(_this),"controlService",_descriptor3,_assertThisInitialized(_this)),_initializerDefineProperty(_assertThisInitialized(_this),"logger",_descriptor4,_assertThisInitialized(_this)),_initializerDefineProperty(_assertThisInitialized(_this),"configService",_descriptor5,_assertThisInitialized(_this)),_initializerDefineProperty(_assertThisInitialized(_this),"map",_descriptor6,_assertThisInitialized(_this)),_initializerDefineProperty(_assertThisInitialized(_this),"rendererService",_descriptor7,_assertThisInitialized(_this)),_initializerDefineProperty(_assertThisInitialized(_this),"layerService",_descriptor8,_assertThisInitialized(_this)),_initializerDefineProperty(_assertThisInitialized(_this),"cameraService",_descriptor9,_assertThisInitialized(_this)),_initializerDefineProperty(_assertThisInitialized(_this),"interactionService",_descriptor10,_assertThisInitialized(_this)),_initializerDefineProperty(_assertThisInitialized(_this),"shaderModule",_descriptor11,_assertThisInitialized(_this)),_this.inited=void 0,_this.$container=void 0,_this.hooks=void 0,_this.handleWindowResized=function(){if(_this.emit("resize"),_this.$container){var pixelRatio=window.devicePixelRatio,w=window.innerWidth,h=window.innerHeight;if(_this.$container!==document.body){var bounds=_this.$container.getBoundingClientRect();w=bounds.right-bounds.left,h=bounds.bottom-bounds.top}_this.rendererService.viewport({x:0,y:0,width:pixelRatio*w,height:pixelRatio*h}),_this.render()}},_this.handleMapCameraChanged=function(viewport){_this.cameraService.update(viewport),_this.render()},_this.hooks={init:new _tapable.AsyncParallelHook(["config"])},_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Scene,_eventemitter$EventEm),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Scene,[{key:"init",value:function init(globalConfig){var _this2=this;this.configService.setAndCheckConfig(globalConfig),this.iconService.init(),this.fontService.init(),this.controlService.init({container:document.getElementById(this.configService.getConfig().id||"map")}),this.hooks.init.tapPromise("initMap",function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark((function _callee(config){return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,new Promise((function(resolve){_this2.map.onCameraChanged((function(viewport){_this2.cameraService.init(),_this2.cameraService.update(viewport),resolve()})),_this2.map.init(config)}));case 2:_this2.map.onCameraChanged(_this2.handleMapCameraChanged),_this2.logger.info("map loaded");case 4:case"end":return _context.stop()}}),_callee)})));return function(){return _ref.apply(this,arguments)}}()),this.hooks.init.tapPromise("initRenderer",_asyncToGenerator(regeneratorRuntime.mark((function _callee2(){var $container;return regeneratorRuntime.wrap((function(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if($container=(0,_dom.createRendererContainer)(_this2.configService.getConfig().id||""),_this2.$container=$container,!$container){_context2.next=8;break}return _context2.next=5,_this2.rendererService.init($container);case 5:window.addEventListener("resize",_this2.handleWindowResized,!1),_context2.next=9;break;case 8:_this2.logger.error("容器 id 不存在");case 9:_this2.shaderModule.registerBuiltinModules(),_this2.interactionService.init(),_this2.logger.info("renderer loaded");case 12:case"end":return _context2.stop()}}),_callee2)}))))}},{key:"addLayer",value:function addLayer(layer){this.logger.info("add layer ".concat(layer.name)),this.layerService.add(layer)}},{key:"render",value:(_render=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){return regeneratorRuntime.wrap((function(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(this.inited){_context3.next=7;break}return _context3.next=3,this.hooks.init.promise(this.configService.getConfig());case 3:this.map.addMarkerContainer(),this.emit("loaded"),this.inited=!0,this.layerService.initLayers();case 7:this.layerService.renderLayers(),this.logger.info("render");case 9:case"end":return _context3.stop()}}),_callee3,this)}))),function render(){return _render.apply(this,arguments)})},{key:"destroy",value:function destroy(){this.emit("destroy"),this.inited=!1,this.layerService.destroy(),this.configService.reset(),this.interactionService.destroy(),this.controlService.destroy(),this.removeAllListeners(),this.rendererService.destroy(),this.map.destroy(),window.removeEventListener("resize",this.handleWindowResized,!1)}}]),Scene;var _render}(_eventemitter.EventEmitter),_descriptor=_applyDecoratedDescriptor((_class2=_temp).prototype,"iconService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor2=_applyDecoratedDescriptor(_class2.prototype,"fontService",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor3=_applyDecoratedDescriptor(_class2.prototype,"controlService",[_dec4],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor4=_applyDecoratedDescriptor(_class2.prototype,"logger",[_dec5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor5=_applyDecoratedDescriptor(_class2.prototype,"configService",[_dec6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor6=_applyDecoratedDescriptor(_class2.prototype,"map",[_dec7],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor7=_applyDecoratedDescriptor(_class2.prototype,"rendererService",[_dec8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor8=_applyDecoratedDescriptor(_class2.prototype,"layerService",[_dec9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor9=_applyDecoratedDescriptor(_class2.prototype,"cameraService",[_dec10],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor10=_applyDecoratedDescriptor(_class2.prototype,"interactionService",[_dec11],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor11=_applyDecoratedDescriptor(_class2.prototype,"shaderModule",[_dec12],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=Scene},874:function(module,exports,__webpack_require__){"use strict";__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRendererContainer=function createRendererContainer(domId){var $wrapper=document.getElementById(domId);if($wrapper){var $container=document.createElement("div");return $container.style.cssText+="\n      position: absolute;\n      top: 0;\n      z-index:2;\n      height: 100%;\n      width: 100%;\n      pointer-events: none;\n    ",$container.id="l7_canvaslayer",$wrapper.appendChild($container),$container}return null};window.document.documentElement.style},875:function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(3),__webpack_require__(16),__webpack_require__(26),__webpack_require__(9),__webpack_require__(59),__webpack_require__(22),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(11),__webpack_require__(70),__webpack_require__(169),__webpack_require__(122),__webpack_require__(268),__webpack_require__(10),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _class,_inversify=__webpack_require__(18),_lodash=__webpack_require__(72),_shaderModule=__webpack_require__(876),common="#define PI 3.14159265359",precisionRegExp=/precision\s+(high|low|medium)p\s+float/,includeRegExp=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,ShaderModuleService=(0,_inversify.injectable)()(_class=function(){function ShaderModuleService(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,ShaderModuleService),this.moduleCache={},this.rawContentCache={}}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ShaderModuleService,[{key:"registerBuiltinModules",value:function registerBuiltinModules(){this.registerModule("common",{vs:common,fs:common}),this.registerModule("decode",{vs:"#define SHIFT_RIGHT17 1.0 / 131072.0\n#define SHIFT_RIGHT18 1.0 / 262144.0\n#define SHIFT_RIGHT19 1.0 / 524288.0\n#define SHIFT_RIGHT20 1.0 / 1048576.0\n#define SHIFT_RIGHT21 1.0 / 2097152.0\n#define SHIFT_RIGHT22 1.0 / 4194304.0\n#define SHIFT_RIGHT23 1.0 / 8388608.0\n#define SHIFT_RIGHT24 1.0 / 16777216.0\n\n#define SHIFT_LEFT17 131072.0\n#define SHIFT_LEFT18 262144.0\n#define SHIFT_LEFT19 524288.0\n#define SHIFT_LEFT20 1048576.0\n#define SHIFT_LEFT21 2097152.0\n#define SHIFT_LEFT22 4194304.0\n#define SHIFT_LEFT23 8388608.0\n#define SHIFT_LEFT24 16777216.0\n\nvec2 unpack_float(const float packedValue) {\n  int packedIntValue = int(packedValue);\n  int v0 = packedIntValue / 256;\n  return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec4 decode_color(const vec2 encodedColor) {\n  return vec4(\n    unpack_float(encodedColor[0]) / 255.0,\n    unpack_float(encodedColor[1]) / 255.0\n  );\n}",fs:""}),this.registerModule("projection",{vs:"#define TILE_SIZE 512.0\n#define PI 3.1415926536\n#define WORLD_SCALE TILE_SIZE / (PI * 2.0)\n\n#define COORDINATE_SYSTEM_LNGLAT 1.0\n#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0\n#define COORDINATE_SYSTEM_VECTOR_TILE 3.0\n#define COORDINATE_SYSTEM_IDENTITY 4.0\n#define COORDINATE_SYSTEM_P20 5.0\n#define COORDINATE_SYSTEM_P20_OFFSET 6.0\n#define COORDINATE_SYSTEM_METER_OFFSET 7.0\n\nuniform mat4 u_ViewMatrix;\nuniform mat4 u_ProjectionMatrix;\nuniform mat4 u_ViewProjectionMatrix;\nuniform float u_Zoom : 1;\nuniform float u_ZoomScale : 1;\n\nuniform float u_CoordinateSystem;\nuniform vec2 u_ViewportCenter;\nuniform vec4 u_ViewportCenterProjection;\nuniform vec3 u_PixelsPerDegree;\nuniform vec3 u_PixelsPerDegree2;\nuniform vec3 u_PixelsPerMeter;\n\nuniform vec2 u_ViewportSize;\nuniform float u_DevicePixelRatio;\nuniform float u_FocalDistance;\n\n// web mercator coords -> world coords\nvec2 project_mercator(vec2 lnglat) {\n  float x = lnglat.x;\n  return vec2(\n    radians(x) + PI,\n    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))\n  );\n}\n\nfloat project_scale(float meters) {\n  return meters * u_PixelsPerMeter.z;\n}\n\n// offset coords -> world coords\nvec4 project_offset(vec4 offset) {\n  float dy = offset.y;\n  dy = clamp(dy, -1., 1.);\n  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;\n  return vec4(offset.xyz * pixels_per_unit, offset.w);\n}\n\nvec3 project_normal(vec3 normal) {\n  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);\n  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);\n}\n\nvec4 project_position(vec4 position) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET\n    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    float X = position.x - u_ViewportCenter.x;\n    float Y = position.y - u_ViewportCenter.y;\n    return project_offset(vec4(X, Y, position.z, position.w));\n  }\n\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {\n    return vec4(\n      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,\n      project_scale(position.z),\n      position.w\n    );\n  }\n\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {\n    return vec4(\n      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),\n      project_scale(position.z),\n      position.w\n    );\n  }\n\n  // TODO: 瓦片坐标系 & 常规世界坐标系\n}\n\nvec2 project_pixel_size_to_clipspace(vec2 pixels) {\n  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;\n  return offset * u_FocalDistance;\n}\n\nvec2 project_pixel(vec2 pixel) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20\n    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {\n    // P20 坐标系下，为了和 Web 墨卡托坐标系统一，zoom 默认减1\n    return pixel * pow(2.0, (19.0 - u_Zoom));\n  }\n  return pixel;\n}\n\nvec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {\n  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||\n    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {\n    // Needs to be divided with project_uCommonUnitsPerMeter\n    position.w *= u_PixelsPerMeter.z;\n  }\n  return viewProjectionMatrix * position + center;\n}\n\n// Projects from common space coordinates to clip space\nvec4 project_common_position_to_clipspace(vec4 position) {\n  return project_common_position_to_clipspace(\n    position,\n    u_ViewProjectionMatrix,\n    u_ViewportCenterProjection\n  );\n}",fs:""}),this.registerModule("sdf_2d",{vs:"",fs:"/**\n * 2D signed distance field functions\n * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm\n */\n\nfloat ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }\n\nfloat sdCircle(vec2 p, float r) {\n  return length(p) - r;\n}\n\nfloat sdEquilateralTriangle(vec2 p) {\n  const float k = sqrt(3.0);\n  p.x = abs(p.x) - 1.0;\n  p.y = p.y + 1.0/k;\n  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;\n  p.x -= clamp( p.x, -2.0, 0.0 );\n  return -length(p)*sign(p.y);\n}\n\nfloat sdBox(vec2 p, vec2 b) {\n  vec2 d = abs(p)-b;\n  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);\n}\n\nfloat sdPentagon(vec2 p, float r) {\n  const vec3 k = vec3(0.809016994,0.587785252,0.726542528);\n  p.x = abs(p.x);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);    \n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagon(vec2 p, float r) {\n  const vec3 k = vec3(-0.866025404,0.5,0.577350269);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdOctogon(vec2 p, float r) {\n  const vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );\n  p = abs(p);\n  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);\n  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);\n  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdHexagram(vec2 p, float r) {\n  const vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);\n  p = abs(p);\n  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;\n  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;\n  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);\n  return length(p)*sign(p.y);\n}\n\nfloat sdRhombus(vec2 p, vec2 b) {\n  vec2 q = abs(p);\n  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);\n  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );\n  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );\n}\n\nfloat sdVesica(vec2 p, float r, float d) {\n  p = abs(p);\n  float b = sqrt(r*r-d*d); // can delay this sqrt\n  return ((p.y-b)*d>p.x*b) \n          ? length(p-vec2(0.0,b))\n          : length(p-vec2(-d,0.0))-r;\n}"}),this.registerModule("lighting",{vs:"// Blinn-Phong model\n// apply lighting in vertex shader instead of fragment shader\n// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting\nuniform float u_ambient : 1.0;\nuniform float u_diffuse : 1.0;\nuniform float u_specular : 1.0;\nuniform int u_num_of_directional_lights : 1;\nuniform int u_num_of_spot_lights : 0;\n\n#define SHININESS 32.0\n#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3\n#define MAX_NUM_OF_SPOT_LIGHTS 3\n\nstruct DirectionalLight {\n  vec3 direction;\n  vec3 ambient;\n  vec3 diffuse;\n  vec3 specular;\n};\n\nstruct SpotLight {\n  vec3 position;\n  vec3 direction;\n  vec3 ambient;\n  vec3 diffuse;\n  vec3 specular;\n  float constant;\n  float linear;\n  float quadratic;\n  float angle;\n  float blur;\n  float exponent;\n};\n\nuniform DirectionalLight u_directional_lights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];\nuniform SpotLight u_spot_lights[MAX_NUM_OF_SPOT_LIGHTS];\n\nvec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {\n  vec3 lightDir = normalize(light.direction);\n  // diffuse shading\n  float diff = max(dot(normal, lightDir), 0.0);\n  // Blinn-Phong specular shading\n  vec3 halfwayDir = normalize(lightDir + viewDir);\n  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);\n\n  vec3 ambient = light.ambient * u_ambient;\n  vec3 diffuse = light.diffuse * diff * u_diffuse;\n  vec3 specular = light.specular * spec * u_specular;\n\n  return ambient + diffuse + specular;\n}\n\n// vec3 calc_spot_light(SpotLight light, vec3 normal, vec3 fragPos, vec3 viewDir) {\n//   vec3 lightDir = normalize(light.position - fragPos);\n//   // diffuse shading\n//   float diff = max(dot(normal, lightDir), 0.0);\n//   // specular shading\n//   vec3 reflectDir = reflect(-lightDir, normal);\n//   float spec = pow(max(dot(viewDir, reflectDir), 0.0), SHININESS);\n//   // attenuation\n//   float distance = length(light.position - fragPos);\n//   float attenuation = 1.0 / (light.constant + light.linear * distance + \n//           light.quadratic * (distance * distance));    \n\n//   vec3 ambient = light.ambient * u_ambient;\n//   vec3 diffuse = light.diffuse * diff * u_diffuse;\n//   vec3 specular = light.specular * spec * u_specular;\n\n//   float spotEffect = dot(normalize(light.direction), -lightDir);\n//   float spotCosCutoff = cos(light.angle / 180.0 * PI);\n//   float spotCosOuterCutoff = cos((light.angle + light.blur) / 180.0 * PI);\n//   float spotCosInnerCutoff = cos((light.angle - light.blur) / 180.0 * PI);\n//   if (spotEffect > spotCosCutoff) {\n//     spotEffect = pow(smoothstep(spotCosOuterCutoff, spotCosInnerCutoff, spotEffect), light.exponent);\n//   } else {\n//     spotEffect = 0.0;\n//   }\n\n//   return ambient + attenuation * (spotEffect * diffuse + specular);\n// }\n\nvec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {\n  vec3 weight = vec3(0.0);\n  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {\n    if (i >= u_num_of_directional_lights) {\n      break;\n    }\n    weight += calc_directional_light(u_directional_lights[i], normal, viewDir);\n  }\n  // for (int i = 0; i < MAX_NUM_OF_SPOT_LIGHTS; i++) {\n  //   if (i >= u_num_of_spot_lights) {\n  //     break;\n  //   }\n  //   weight += calc_spot_light(u_spot_lights[i], normal, position, viewDir);\n  // }\n  return weight;\n}",fs:""}),this.registerModule("picking",{vs:"attribute vec3 a_PickingColor;\nvarying vec4 v_PickingResult;\n\nuniform vec3 u_PickingColor : [0, 0, 0];\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\nuniform float u_PickingThreshold : 1.0;\n\n#define PICKING_NONE 0.0\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\nbool isVertexPicked(vec3 vertexColor) {\n  return\n    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&\n    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&\n    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;\n}\n\nvoid setPickingColor(vec3 pickingColor) {\n  // compares only in highlight stage\n  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));\n\n  // Stores the picking color so that the fragment shader can render it during picking\n  v_PickingResult.rgb = pickingColor * COLOR_SCALE;\n}\n",fs:"varying vec4 v_PickingResult;\nuniform vec4 u_HighlightColor : [0, 0, 0, 0];\nuniform float u_PickingStage : 0.0;\n\n#define PICKING_NONE 0.0\n#define PICKING_ENCODE 1.0\n#define PICKING_HIGHLIGHT 2.0\n#define COLOR_SCALE 1. / 255.\n\n/*\n * Returns highlight color if this item is selected.\n */\nvec4 filterHighlightColor(vec4 color) {\n  bool selected = bool(v_PickingResult.a);\n\n  if (selected) {\n    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;\n\n    float highLightAlpha = highLightColor.a;\n    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));\n\n    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);\n    return vec4(resultRGB, color.a);\n  } else {\n    return color;\n  }\n}\n\n/*\n * Returns picking color if picking enabled else unmodified argument.\n */\nvec4 filterPickingColor(vec4 color) {\n  vec3 pickingColor = v_PickingResult.rgb;\n  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {\n    discard;\n  }\n  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, 1.0) : color;\n}\n\n/*\n * Returns picking color if picking is enabled if not\n * highlight color if this item is selected, otherwise unmodified argument.\n */\nvec4 filterColor(vec4 color) {\n  return filterPickingColor(filterHighlightColor(color));\n}"})}},{key:"registerModule",value:function registerModule(moduleName,moduleParams){if(!this.rawContentCache[moduleName]){var vs=moduleParams.vs,fs=moduleParams.fs,declaredUniforms=moduleParams.uniforms,_ref=(0,_shaderModule.extractUniforms)(vs),extractedVS=_ref.content,vsUniforms=_ref.uniforms,_ref2=(0,_shaderModule.extractUniforms)(fs),extractedFS=_ref2.content,fsUniforms=_ref2.uniforms;this.rawContentCache[moduleName]={fs:extractedFS,uniforms:_objectSpread({},vsUniforms,{},fsUniforms,{},declaredUniforms),vs:extractedVS}}}},{key:"getModule",value:function getModule(moduleName){var _this=this;if(this.moduleCache[moduleName])return this.moduleCache[moduleName];var rawVS=this.rawContentCache[moduleName].vs,rawFS=this.rawContentCache[moduleName].fs,_this$processModule=this.processModule(rawVS,[],"vs"),vs=_this$processModule.content,vsIncludeList=_this$processModule.includeList,_this$processModule2=this.processModule(rawFS,[],"fs"),fs=_this$processModule2.content,fsIncludeList=_this$processModule2.includeList,compiledFs=fs,uniforms=(0,_lodash.uniq)(vsIncludeList.concat(fsIncludeList).concat(moduleName)).reduce((function(prev,cur){return _objectSpread({},prev,{},_this.rawContentCache[cur].uniforms)}),{});return precisionRegExp.test(fs)||(compiledFs="#ifdef GL_FRAGMENT_PRECISION_HIGH\n precision highp float;\n #else\n precision mediump float;\n#endif\n"+fs),this.moduleCache[moduleName]={fs:compiledFs.trim(),uniforms:uniforms,vs:vs.trim()},this.moduleCache[moduleName]}},{key:"processModule",value:function processModule(rawContent,includeList,type){var _this2=this;return{content:rawContent.replace(includeRegExp,(function(_,strMatch){var includeName=strMatch.split(" ")[0].replace(/"/g,"");if(-1<includeList.indexOf(includeName))return"";var txt=_this2.rawContentCache[includeName][type];return includeList.push(includeName),_this2.processModule(txt,includeList,type).content})),includeList:includeList}}}]),ShaderModuleService}())||_class;exports.default=ShaderModuleService},876:function(module,exports,__webpack_require__){"use strict";function getUniformLengthByType(type){var arrayLength=0;switch(type){case"vec2":case"ivec2":arrayLength=2;break;case"vec3":case"ivec3":arrayLength=3;break;case"vec4":case"ivec4":case"mat2":arrayLength=4;break;case"mat3":arrayLength=9;break;case"mat4":arrayLength=16}return arrayLength}__webpack_require__(16),__webpack_require__(877),__webpack_require__(22),__webpack_require__(203),__webpack_require__(0),__webpack_require__(70),__webpack_require__(169),__webpack_require__(122),__webpack_require__(268),Object.defineProperty(exports,"__esModule",{value:!0}),exports.getUniformLengthByType=getUniformLengthByType,exports.extractUniforms=function extractUniforms(content){var uniforms={};return{content:content=content.replace(uniformRegExp,(function(_,type,c){var defaultValues=c.split(":"),uniformName=defaultValues[0].trim(),defaultValue="";switch(1<defaultValues.length&&(defaultValue=defaultValues[1].trim()),type){case"bool":defaultValue="true"===defaultValue;break;case"float":case"int":defaultValue=+defaultValue;break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":defaultValue=defaultValue?defaultValue.replace("[","").replace("]","").split(",").reduce((function(prev,cur){return prev.push(+cur.trim()),prev}),[]):Array(getUniformLengthByType(type)).fill(0)}return uniforms[uniformName]=defaultValue,"uniform ".concat(type," ").concat(uniformName,";\n")})),uniforms:uniforms}};var uniformRegExp=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g},878:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(16),__webpack_require__(26),__webpack_require__(9),__webpack_require__(4),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(15),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(14),__webpack_require__(11),__webpack_require__(12),__webpack_require__(2),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_class,_class2,_descriptor,_temp,_inversify=__webpack_require__(18),_lodash=__webpack_require__(72),_types=__webpack_require__(55),_BasePostProcessingPass=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(113));var BlurHPass=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_types.TYPES.IRendererService),_dec((_temp=function(_BasePostProcessingPa){function BlurHPass(){var _getPrototypeOf2,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BlurHPass);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,(_getPrototypeOf2=_getPrototypeOf(BlurHPass)).call.apply(_getPrototypeOf2,[this].concat(args))),function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_assertThisInitialized(_this),"rendererService",_descriptor,_assertThisInitialized(_this)),_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(BlurHPass,_BasePostProcessingPa),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(BlurHPass,[{key:"getName",value:function getName(){return"blurH"}},{key:"setupShaders",value:function setupShaders(){this.shaderModule.registerModule("blur-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_BlurDir: [1.0, 0.0];\n\n// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);\n}"});var _this$shaderModule$ge=this.shaderModule.getModule("blur-pass"),vs=_this$shaderModule$ge.vs,fs=_this$shaderModule$ge.fs,uniforms=_this$shaderModule$ge.uniforms,_this$rendererService=this.rendererService.getViewportSize();return{vs:vs,fs:fs,uniforms:_objectSpread({},uniforms,{u_ViewportSize:[_this$rendererService.width,_this$rendererService.height]})}}},{key:"convertOptionsToUniforms",value:function convertOptionsToUniforms(options){var uniforms={};return(0,_lodash.isNil)(options.blurRadius)||(uniforms.u_BlurDir=[options.blurRadius,0]),uniforms}}]),BlurHPass}(_BasePostProcessingPass.default),_descriptor=function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}((_class2=_temp).prototype,"rendererService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=BlurHPass},879:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(16),__webpack_require__(26),__webpack_require__(9),__webpack_require__(4),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(15),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(14),__webpack_require__(11),__webpack_require__(12),__webpack_require__(2),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_class,_class2,_descriptor,_temp,_inversify=__webpack_require__(18),_lodash=__webpack_require__(72),_types=__webpack_require__(55),_BasePostProcessingPass=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(113));var BlurVPass=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_types.TYPES.IRendererService),_dec((_temp=function(_BasePostProcessingPa){function BlurVPass(){var _getPrototypeOf2,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,BlurVPass);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,(_getPrototypeOf2=_getPrototypeOf(BlurVPass)).call.apply(_getPrototypeOf2,[this].concat(args))),function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_assertThisInitialized(_this),"rendererService",_descriptor,_assertThisInitialized(_this)),_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(BlurVPass,_BasePostProcessingPa),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(BlurVPass,[{key:"getName",value:function getName(){return"blurV"}},{key:"setupShaders",value:function setupShaders(){this.shaderModule.registerModule("blur-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_BlurDir: [1.0, 0.0];\n\n// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl\nvec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {\n  vec4 color = vec4(0.0);\n  vec2 off1 = vec2(1.3846153846) * direction;\n  vec2 off2 = vec2(3.2307692308) * direction;\n  color += texture2D(image, uv) * 0.2270270270;\n  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;\n  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;\n  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);\n}"});var _this$shaderModule$ge=this.shaderModule.getModule("blur-pass"),vs=_this$shaderModule$ge.vs,fs=_this$shaderModule$ge.fs,uniforms=_this$shaderModule$ge.uniforms,_this$rendererService=this.rendererService.getViewportSize();return{vs:vs,fs:fs,uniforms:_objectSpread({},uniforms,{u_ViewportSize:[_this$rendererService.width,_this$rendererService.height]})}}},{key:"convertOptionsToUniforms",value:function convertOptionsToUniforms(options){var uniforms={};return(0,_lodash.isNil)(options.blurRadius)||(uniforms.u_BlurDir=[0,options.blurRadius]),uniforms}}]),BlurVPass}(_BasePostProcessingPass.default),_descriptor=function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}((_class2=_temp).prototype,"rendererService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=BlurVPass},880:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(16),__webpack_require__(26),__webpack_require__(9),__webpack_require__(4),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(15),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(14),__webpack_require__(11),__webpack_require__(12),__webpack_require__(2),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_class,_class2,_descriptor,_temp,_inversify=__webpack_require__(18),_lodash=__webpack_require__(72),_types=__webpack_require__(55),_BasePostProcessingPass=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(113));var ColorHalftonePass=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_types.TYPES.IRendererService),_dec((_temp=function(_BasePostProcessingPa){function ColorHalftonePass(){var _getPrototypeOf2,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ColorHalftonePass);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,(_getPrototypeOf2=_getPrototypeOf(ColorHalftonePass)).call.apply(_getPrototypeOf2,[this].concat(args))),function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_assertThisInitialized(_this),"rendererService",_descriptor,_assertThisInitialized(_this)),_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(ColorHalftonePass,_BasePostProcessingPa),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ColorHalftonePass,[{key:"getName",value:function getName(){return"colorHalftone"}},{key:"setupShaders",value:function setupShaders(){this.shaderModule.registerModule("colorhalftone-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:'varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_Center : [0.5, 0.5];\nuniform float u_Angle : 0;\nuniform float u_Size : 8;\n\n#pragma include "common"\n\nfloat scale = PI / u_Size;\n\nfloat pattern(float u_Angle, vec2 texSize, vec2 texCoord) {\n  float s = sin(u_Angle), c = cos(u_Angle);\n  vec2 tex = texCoord * texSize - u_Center * texSize;\n  vec2 point = vec2(\n    c * tex.x - s * tex.y,\n    s * tex.x + c * tex.y\n  ) * scale;\n  return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js\nvec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {\n  vec3 cmy = 1.0 - color.rgb;\n  float k = min(cmy.x, min(cmy.y, cmy.z));\n  cmy = (cmy - k) / (1.0 - k);\n  cmy = clamp(\n    cmy * 10.0 - 3.0 + vec3(\n      pattern(u_Angle + 0.26179, texSize, texCoord),\n      pattern(u_Angle + 1.30899, texSize, texCoord),\n      pattern(u_Angle, texSize, texCoord)\n    ),\n    0.0,\n    1.0\n  );\n  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);\n  return vec4(1.0 - cmy - k, color.a);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);\n}'});var _this$shaderModule$ge=this.shaderModule.getModule("colorhalftone-pass"),vs=_this$shaderModule$ge.vs,fs=_this$shaderModule$ge.fs,uniforms=_this$shaderModule$ge.uniforms,_this$rendererService=this.rendererService.getViewportSize();return{vs:vs,fs:fs,uniforms:_objectSpread({},uniforms,{u_ViewportSize:[_this$rendererService.width,_this$rendererService.height]})}}},{key:"convertOptionsToUniforms",value:function convertOptionsToUniforms(options){var uniforms={};return(0,_lodash.isNil)(options.center)||(uniforms.u_Center=options.center),(0,_lodash.isNil)(options.angle)||(uniforms.u_Angle=options.angle),(0,_lodash.isNil)(options.size)||(uniforms.u_Size=options.size),uniforms}}]),ColorHalftonePass}(_BasePostProcessingPass.default),_descriptor=function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}((_class2=_temp).prototype,"rendererService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=ColorHalftonePass},881:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(4),__webpack_require__(15),__webpack_require__(0),__webpack_require__(14),__webpack_require__(12),__webpack_require__(2),__webpack_require__(5),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _class,_inversify=__webpack_require__(18),_BasePostProcessingPass=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(113));var CopyPass=(0,_inversify.injectable)()(_class=function(_BasePostProcessingPa){function CopyPass(){return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CopyPass),_possibleConstructorReturn(this,_getPrototypeOf(CopyPass).apply(this,arguments))}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(CopyPass,_BasePostProcessingPa),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(CopyPass,[{key:"getName",value:function getName(){return"copy"}},{key:"setupShaders",value:function setupShaders(){return this.shaderModule.registerModule("copy-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n}"}),this.shaderModule.getModule("copy-pass")}},{key:"convertOptionsToUniforms",value:function convertOptionsToUniforms(){return{}}}]),CopyPass}(_BasePostProcessingPass.default))||_class;exports.default=CopyPass},882:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(16),__webpack_require__(26),__webpack_require__(9),__webpack_require__(4),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(15),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(14),__webpack_require__(11),__webpack_require__(12),__webpack_require__(2),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_class,_class2,_descriptor,_temp,_inversify=__webpack_require__(18),_lodash=__webpack_require__(72),_types=__webpack_require__(55),_BasePostProcessingPass=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(113));var HexagonalPixelatePass=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_types.TYPES.IRendererService),_dec((_temp=function(_BasePostProcessingPa){function HexagonalPixelatePass(){var _getPrototypeOf2,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,HexagonalPixelatePass);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,(_getPrototypeOf2=_getPrototypeOf(HexagonalPixelatePass)).call.apply(_getPrototypeOf2,[this].concat(args))),function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_assertThisInitialized(_this),"rendererService",_descriptor,_assertThisInitialized(_this)),_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(HexagonalPixelatePass,_BasePostProcessingPa),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(HexagonalPixelatePass,[{key:"getName",value:function getName(){return"hexagonalPixelate"}},{key:"setupShaders",value:function setupShaders(){this.shaderModule.registerModule("hexagonalpixelate-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform vec2 u_Center : [0.5, 0.5];\nuniform float u_Scale : 10;\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js\nvec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;\n  tex.y /= 0.866025404;\n  tex.x -= tex.y * 0.5;\n  vec2 a;\n  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {\n    a = vec2(floor(tex.x), floor(tex.y));\n  }\n  else a = vec2(ceil(tex.x), ceil(tex.y));\n  vec2 b = vec2(ceil(tex.x), floor(tex.y));\n  vec2 c = vec2(floor(tex.x), ceil(tex.y));\n  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);\n  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);\n  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);\n  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);\n  float alen = length(TEX - A);\n  float blen = length(TEX - B);\n  float clen = length(TEX - C);\n  vec2 choice;\n  if (alen < blen) {\n    if (alen < clen) choice = a;\n    else choice = c;\n  } else {\n    if (blen < clen) choice = b;\n    else choice = c;\n  }\n  choice.x += choice.y * 0.5;\n  choice.y *= 0.866025404;\n  choice *= u_Scale / texSize;\n  return texture2D(texture, choice + u_Center);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);\n}"});var _this$shaderModule$ge=this.shaderModule.getModule("hexagonalpixelate-pass"),vs=_this$shaderModule$ge.vs,fs=_this$shaderModule$ge.fs,uniforms=_this$shaderModule$ge.uniforms,_this$rendererService=this.rendererService.getViewportSize();return{vs:vs,fs:fs,uniforms:_objectSpread({},uniforms,{u_ViewportSize:[_this$rendererService.width,_this$rendererService.height]})}}},{key:"convertOptionsToUniforms",value:function convertOptionsToUniforms(options){var uniforms={};return(0,_lodash.isNil)(options.center)||(uniforms.u_Center=options.center),(0,_lodash.isNil)(options.scale)||(uniforms.u_Scale=options.scale),uniforms}}]),HexagonalPixelatePass}(_BasePostProcessingPass.default),_descriptor=function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}((_class2=_temp).prototype,"rendererService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=HexagonalPixelatePass},883:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(16),__webpack_require__(26),__webpack_require__(9),__webpack_require__(4),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(15),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(14),__webpack_require__(11),__webpack_require__(12),__webpack_require__(2),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_class,_class2,_descriptor,_temp,_inversify=__webpack_require__(18),_lodash=__webpack_require__(72),_types=__webpack_require__(55),_BasePostProcessingPass=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(113));var InkPass=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_types.TYPES.IRendererService),_dec((_temp=function(_BasePostProcessingPa){function InkPass(){var _getPrototypeOf2,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,InkPass);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}(this,(_getPrototypeOf2=_getPrototypeOf(InkPass)).call.apply(_getPrototypeOf2,[this].concat(args))),function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(_assertThisInitialized(_this),"rendererService",_descriptor,_assertThisInitialized(_this)),_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(InkPass,_BasePostProcessingPa),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(InkPass,[{key:"getName",value:function getName(){return"ink"}},{key:"setupShaders",value:function setupShaders(){this.shaderModule.registerModule("ink-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform vec2 u_ViewportSize: [1.0, 1.0];\nuniform float u_Strength : 0.6;\n\nvec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {\n  vec2 dx = vec2(1.0 / texSize.x, 0.0);\n  vec2 dy = vec2(0.0, 1.0 / texSize.y);\n  vec4 color = texture2D(texture, texCoord);\n  float bigTotal = 0.0;\n  float smallTotal = 0.0;\n  vec3 bigAverage = vec3(0.0);\n  vec3 smallAverage = vec3(0.0);\n  for (float x = -2.0; x <= 2.0; x += 1.0) {\n    for (float y = -2.0; y <= 2.0; y += 1.0) {\n      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;\n      bigAverage += sample;\n      bigTotal += 1.0;\n      if (abs(x) + abs(y) < 2.0) {\n        smallAverage += sample;\n        smallTotal += 1.0;\n      }\n    }\n  }\n  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);\n  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;\n  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);\n}"});var _this$shaderModule$ge=this.shaderModule.getModule("ink-pass"),vs=_this$shaderModule$ge.vs,fs=_this$shaderModule$ge.fs,uniforms=_this$shaderModule$ge.uniforms,_this$rendererService=this.rendererService.getViewportSize();return{vs:vs,fs:fs,uniforms:_objectSpread({},uniforms,{u_ViewportSize:[_this$rendererService.width,_this$rendererService.height]})}}},{key:"convertOptionsToUniforms",value:function convertOptionsToUniforms(options){var uniforms={};return(0,_lodash.isNil)(options.strength)||(uniforms.u_Strength=options.strength),uniforms}}]),InkPass}(_BasePostProcessingPass.default),_descriptor=function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}((_class2=_temp).prototype,"rendererService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=InkPass},884:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(4),__webpack_require__(15),__webpack_require__(0),__webpack_require__(14),__webpack_require__(12),__webpack_require__(2),__webpack_require__(5),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _class,_inversify=__webpack_require__(18),_lodash=__webpack_require__(72),_BasePostProcessingPass=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(113));var NoisePass=(0,_inversify.injectable)()(_class=function(_BasePostProcessingPa){function NoisePass(){return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,NoisePass),_possibleConstructorReturn(this,_getPrototypeOf(NoisePass).apply(this,arguments))}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(NoisePass,_BasePostProcessingPa),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(NoisePass,[{key:"getName",value:function getName(){return"noise"}},{key:"setupShaders",value:function setupShaders(){return this.shaderModule.registerModule("noise-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\nuniform float u_Amount : 0.5;\n\nfloat rand(vec2 co) {\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js\nvec4 noise_filterColor(vec4 color, vec2 texCoord) {\n  float diff = (rand(texCoord) - 0.5) * u_Amount;\n  color.r += diff;\n  color.g += diff;\n  color.b += diff;\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);\n}"}),this.shaderModule.getModule("noise-pass")}},{key:"convertOptionsToUniforms",value:function convertOptionsToUniforms(options){var uniforms={};return(0,_lodash.isNil)(options.amount)||(uniforms.u_Amount=options.amount),uniforms}}]),NoisePass}(_BasePostProcessingPass.default))||_class;exports.default=NoisePass},885:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(4),__webpack_require__(15),__webpack_require__(0),__webpack_require__(14),__webpack_require__(12),__webpack_require__(2),__webpack_require__(5),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _class,_inversify=__webpack_require__(18),_lodash=__webpack_require__(72),_BasePostProcessingPass=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(113));var SepiaPass=(0,_inversify.injectable)()(_class=function(_BasePostProcessingPa){function SepiaPass(){return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SepiaPass),_possibleConstructorReturn(this,_getPrototypeOf(SepiaPass).apply(this,arguments))}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(SepiaPass,_BasePostProcessingPa),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(SepiaPass,[{key:"getName",value:function getName(){return"sepia"}},{key:"setupShaders",value:function setupShaders(){return this.shaderModule.registerModule("sepia-pass",{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:"varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nuniform float u_Amount : 0.5;\n\n// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js\nvec4 sepia_filterColor(vec4 color) {\n  float r = color.r;\n  float g = color.g;\n  float b = color.b;\n  color.r =\n    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));\n  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));\n  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));\n  return color;\n}\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n  gl_FragColor = sepia_filterColor(gl_FragColor);\n}"}),this.shaderModule.getModule("sepia-pass")}},{key:"convertOptionsToUniforms",value:function convertOptionsToUniforms(options){var uniforms={};return(0,_lodash.isNil)(options.amount)||(uniforms.u_Amount=options.amount),uniforms}}]),SepiaPass}(_BasePostProcessingPass.default))||_class;exports.default=SepiaPass},886:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(9),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(0),__webpack_require__(11),__webpack_require__(10),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_class,_class2,_descriptor,_inversify=__webpack_require__(18),_index=__webpack_require__(25),_types=__webpack_require__(55),_IMultiPassRenderer=__webpack_require__(129);var ClearPass=(_dec=(0,_inversify.injectable)(),_dec2=(0,_index.lazyInject)(_types.TYPES.IRendererService),_dec((_descriptor=function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}((_class2=function(){function ClearPass(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,ClearPass),function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(this,"rendererService",_descriptor,this)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ClearPass,[{key:"getType",value:function getType(){return _IMultiPassRenderer.PassType.Normal}},{key:"getName",value:function getName(){return"clear"}},{key:"init",value:function init(){}},{key:"render",value:function render(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),ClearPass}()).prototype,"rendererService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=ClearPass},887:function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(4),__webpack_require__(209),__webpack_require__(0),__webpack_require__(2),__webpack_require__(69),__webpack_require__(5),__webpack_require__(6),__webpack_require__(87),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _class,_inversify=__webpack_require__(18),_IMultiPassRenderer=__webpack_require__(129),_PostProcessor=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(888));var MultiPassRenderer=(0,_inversify.injectable)()(_class=function(){function MultiPassRenderer(layer){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,MultiPassRenderer),this.passes=[],this.postProcessor=void 0,this.layer=void 0,this.renderFlag=void 0,this.layer=layer,this.postProcessor=new _PostProcessor.default}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(MultiPassRenderer,[{key:"setRenderFlag",value:function setRenderFlag(renderFlag){this.renderFlag=renderFlag}},{key:"getRenderFlag",value:function getRenderFlag(){return this.renderFlag}},{key:"getPostProcessor",value:function getPostProcessor(){return this.postProcessor}},{key:"render",value:(_render=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}var gen=fn.apply(self,args);_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(){var _iteratorNormalCompletion,_didIteratorError,_iteratorError,_iterator,_step,pass;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0,_context.prev=3,_iterator=this.passes[Symbol.iterator]();case 5:if(_iteratorNormalCompletion=(_step=_iterator.next()).done){_context.next=12;break}return pass=_step.value,_context.next=9,pass.render(this.layer);case 9:_iteratorNormalCompletion=!0,_context.next=5;break;case 12:_context.next=18;break;case 14:_context.prev=14,_context.t0=_context.catch(3),_didIteratorError=!0,_iteratorError=_context.t0;case 18:_context.prev=18,_context.prev=19,_iteratorNormalCompletion||null==_iterator.return||_iterator.return();case 21:if(_context.prev=21,!_didIteratorError){_context.next=24;break}throw _iteratorError;case 24:return _context.finish(21);case 25:return _context.finish(18);case 26:return _context.next=28,this.postProcessor.render(this.layer);case 28:case"end":return _context.stop()}}),_callee,this,[[3,14,18,26],[19,,21,25]])}))),function render(){return _render.apply(this,arguments)})},{key:"resize",value:function resize(width,height){this.postProcessor.resize(width,height)}},{key:"add",value:function add(pass,config){pass.getType()===_IMultiPassRenderer.PassType.PostProcessing?this.postProcessor.add(pass,this.layer,config):(pass.init(this.layer,config),this.passes.push(pass))}},{key:"insert",value:function insert(pass,config,index){pass.init(this.layer,config),this.passes.splice(index,0,pass)}}]),MultiPassRenderer;var _render}())||_class;exports.default=MultiPassRenderer},888:function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(109),__webpack_require__(9),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(209),__webpack_require__(0),__webpack_require__(11),__webpack_require__(2),__webpack_require__(69),__webpack_require__(10),__webpack_require__(87),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_class,_class2,_descriptor,_inversify=__webpack_require__(18),_index=__webpack_require__(25),_types=__webpack_require__(55),_gl=__webpack_require__(173);var PostProcessor=(_dec=(0,_inversify.injectable)(),_dec2=(0,_index.lazyInject)(_types.TYPES.IRendererService),_dec((_descriptor=function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}((_class2=function(){function PostProcessor(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,PostProcessor),function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(this,"rendererService",_descriptor,this),this.passes=[],this.readFBO=void 0,this.writeFBO=void 0;var _this$rendererService=this.rendererService,createFramebuffer=_this$rendererService.createFramebuffer,createTexture2D=_this$rendererService.createTexture2D;this.readFBO=createFramebuffer({color:createTexture2D({width:1,height:1,wrapS:_gl.gl.CLAMP_TO_EDGE,wrapT:_gl.gl.CLAMP_TO_EDGE})}),this.writeFBO=createFramebuffer({color:createTexture2D({width:1,height:1,wrapS:_gl.gl.CLAMP_TO_EDGE,wrapT:_gl.gl.CLAMP_TO_EDGE})})}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(PostProcessor,[{key:"getReadFBO",value:function getReadFBO(){return this.readFBO}},{key:"getWriteFBO",value:function getWriteFBO(){return this.writeFBO}},{key:"render",value:(_render=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}var gen=fn.apply(self,args);_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(layer){var i,pass;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:i=0;case 1:if(!(i<this.passes.length)){_context.next=10;break}return(pass=this.passes[i]).setRenderToScreen(this.isLastEnabledPass(i)),_context.next=6,pass.render(layer);case 6:i!==this.passes.length-1&&this.swap();case 7:i++,_context.next=1;break;case 10:case"end":return _context.stop()}}),_callee,this)}))),function render(){return _render.apply(this,arguments)})},{key:"resize",value:function resize(width,height){this.readFBO.resize({width:width,height:height}),this.writeFBO.resize({width:width,height:height})}},{key:"add",value:function add(pass,layer,config){pass.init(layer,config),this.passes.push(pass)}},{key:"insert",value:function insert(pass,index,layer,config){pass.init(layer,config),this.passes.splice(index,0,pass)}},{key:"getPostProcessingPassByName",value:function getPostProcessingPassByName(name){return this.passes.find((function(p){return p.getName()===name}))}},{key:"isLastEnabledPass",value:function isLastEnabledPass(index){for(var i=index+1;i<this.passes.length;i++)if(this.passes[i].isEnabled())return!1;return!0}},{key:"swap",value:function swap(){var tmp=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=tmp}}]),PostProcessor;var _render}()).prototype,"rendererService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=PostProcessor},889:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if(Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(16),__webpack_require__(9),__webpack_require__(23),__webpack_require__(4),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(269),__webpack_require__(40),__webpack_require__(0),__webpack_require__(11),__webpack_require__(2),__webpack_require__(38),__webpack_require__(5),__webpack_require__(397),__webpack_require__(271),__webpack_require__(272),__webpack_require__(273),__webpack_require__(274),__webpack_require__(275),__webpack_require__(276),__webpack_require__(277),__webpack_require__(278),__webpack_require__(279),__webpack_require__(280),__webpack_require__(281),__webpack_require__(282),__webpack_require__(283),__webpack_require__(284),__webpack_require__(285),__webpack_require__(286),__webpack_require__(287),__webpack_require__(288),__webpack_require__(289),__webpack_require__(290),__webpack_require__(291),__webpack_require__(292),__webpack_require__(293),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_dec3,_dec4,_class,_class2,_descriptor,_descriptor2,_descriptor3,_inversify=__webpack_require__(18),_index=__webpack_require__(25),_types=__webpack_require__(55),_IInteractionService=__webpack_require__(298),_gl=__webpack_require__(173),_IMultiPassRenderer=__webpack_require__(129);function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var PixelPickingPass=(_dec=(0,_inversify.injectable)(),_dec2=(0,_index.lazyInject)(_types.TYPES.IRendererService),_dec3=(0,_index.lazyInject)(_types.TYPES.IInteractionService),_dec4=(0,_index.lazyInject)(_types.TYPES.ILogService),_dec((_descriptor=_applyDecoratedDescriptor((_class2=function(){function PixelPickingPass(){var _this=this;(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,PixelPickingPass),_initializerDefineProperty(this,"rendererService",_descriptor,this),_initializerDefineProperty(this,"interactionService",_descriptor2,this),_initializerDefineProperty(this,"logger",_descriptor3,this),this.pickingFBO=void 0,this.layer=void 0,this.alreadyInRendering=!1,this.pickFromPickingFBO=function(_ref){var pickedColors,x=_ref.x,y=_ref.y,_this$rendererService=_this.rendererService,getViewportSize=_this$rendererService.getViewportSize,readPixels=_this$rendererService.readPixels,useFramebuffer=_this$rendererService.useFramebuffer,_getViewportSize=getViewportSize(),width=_getViewportSize.width,height=_getViewportSize.height,enableHighlight=_this.layer.getStyleOptions().enableHighlight,xInDevicePixel=x*window.devicePixelRatio,yInDevicePixel=y*window.devicePixelRatio;xInDevicePixel>width||0>xInDevicePixel||yInDevicePixel>height||0>yInDevicePixel||(useFramebuffer(_this.pickingFBO,(function(){if(0!==(pickedColors=readPixels({x:Math.round(xInDevicePixel),y:Math.round(height-(y+1)*window.devicePixelRatio),width:1,height:1,data:new Uint8Array(4),framebuffer:_this.pickingFBO}))[0]||0!==pickedColors[1]||0!==pickedColors[2]){var _this$layer$getSource,_this$layer$getSource2;_this.logger.info("picked");var pickedFeatureIdx=function decodePickingColor(color){var _color=_slicedToArray(color,3);return _color[0]+256*_color[1]+65536*_color[2]-1}(pickedColors),rawFeature=null===(_this$layer$getSource=_this.layer.getSource())||void 0===_this$layer$getSource||null===(_this$layer$getSource2=_this$layer$getSource.data)||void 0===_this$layer$getSource2?void 0:_this$layer$getSource2.dataArray[pickedFeatureIdx];_this.triggerHoverOnLayer({x:x,y:y,feature:rawFeature})}})),enableHighlight&&_this.highlightPickedFeature(pickedColors))}}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(PixelPickingPass,[{key:"getType",value:function getType(){return _IMultiPassRenderer.PassType.Normal}},{key:"getName",value:function getName(){return"pixelPicking"}},{key:"init",value:function init(layer){this.layer=layer;var _this$rendererService2=this.rendererService,createTexture2D=_this$rendererService2.createTexture2D,createFramebuffer=_this$rendererService2.createFramebuffer;this.pickingFBO=createFramebuffer({color:createTexture2D({width:1,height:1,wrapS:_gl.gl.CLAMP_TO_EDGE,wrapT:_gl.gl.CLAMP_TO_EDGE})}),this.interactionService.on(_IInteractionService.InteractionEvent.Hover,this.pickFromPickingFBO)}},{key:"render",value:function render(layer){var _this2=this;if(!this.alreadyInRendering){var _this$rendererService3=this.rendererService,getViewportSize=_this$rendererService3.getViewportSize,useFramebuffer=_this$rendererService3.useFramebuffer,clear=_this$rendererService3.clear,_getViewportSize2=getViewportSize(),width=_getViewportSize2.width,height=_getViewportSize2.height;this.alreadyInRendering=!0,this.pickingFBO.resize({width:width,height:height}),useFramebuffer(this.pickingFBO,(function(){clear({framebuffer:_this2.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),_this2.logger.info("picking fbo cleared ".concat(width," ").concat(height));var originRenderFlag=_this2.layer.multiPassRenderer.getRenderFlag();_this2.layer.multiPassRenderer.setRenderFlag(!1),layer.hooks.beforePickingEncode.call(),layer.render(),layer.hooks.afterPickingEncode.call(),_this2.layer.multiPassRenderer.setRenderFlag(originRenderFlag),_this2.alreadyInRendering=!1}))}}},{key:"triggerHoverOnLayer",value:function triggerHoverOnLayer(_ref2){var x=_ref2.x,y=_ref2.y,feature=_ref2.feature,_this$layer$getStyleO2=this.layer.getStyleOptions(),onHover=_this$layer$getStyleO2.onHover,onClick=_this$layer$getStyleO2.onClick;onHover&&onHover({x:x,y:y,feature:feature}),onClick&&onClick({x:x,y:y,feature:feature})}},{key:"highlightPickedFeature",value:function highlightPickedFeature(pickedColors){var _this3=this,_pickedColors=_slicedToArray(pickedColors,3),r=_pickedColors[0],g=_pickedColors[1],b=_pickedColors[2],_this$rendererService4=this.rendererService,clear=_this$rendererService4.clear,useFramebuffer=_this$rendererService4.useFramebuffer,readFBO=this.layer.multiPassRenderer.getPostProcessor().getReadFBO();this.layer.hooks.beforeRender.call(),useFramebuffer(readFBO,(function(){clear({color:[0,0,0,0],depth:1,stencil:0,framebuffer:readFBO});var originRenderFlag=_this3.layer.multiPassRenderer.getRenderFlag();_this3.layer.multiPassRenderer.setRenderFlag(!1),_this3.layer.hooks.beforeHighlight.call([r,g,b]),_this3.layer.render(),_this3.layer.hooks.afterHighlight.call(),_this3.layer.hooks.afterRender.call(),_this3.layer.multiPassRenderer.setRenderFlag(originRenderFlag)})),this.layer.multiPassRenderer.getPostProcessor().render(this.layer)}}]),PixelPickingPass}()).prototype,"rendererService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor2=_applyDecoratedDescriptor(_class2.prototype,"interactionService",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor3=_applyDecoratedDescriptor(_class2.prototype,"logger",[_dec4],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=PixelPickingPass},890:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(9),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(0),__webpack_require__(11),__webpack_require__(10),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_class,_class2,_descriptor,_inversify=__webpack_require__(18),_index=__webpack_require__(25),_types=__webpack_require__(55),_IMultiPassRenderer=__webpack_require__(129);var RenderPass=(_dec=(0,_inversify.injectable)(),_dec2=(0,_index.lazyInject)(_types.TYPES.IRendererService),_dec((_descriptor=function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}((_class2=function(){function RenderPass(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,RenderPass),function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(this,"rendererService",_descriptor,this)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(RenderPass,[{key:"getType",value:function getType(){return _IMultiPassRenderer.PassType.Normal}},{key:"getName",value:function getName(){return"render"}},{key:"init",value:function init(){}},{key:"render",value:function render(layer){var _this$rendererService=this.rendererService,useFramebuffer=_this$rendererService.useFramebuffer,clear=_this$rendererService.clear,readFBO=layer.multiPassRenderer.getPostProcessor().getReadFBO();useFramebuffer(readFBO,(function(){clear({color:[0,0,0,0],depth:1,stencil:0,framebuffer:readFBO}),layer.multiPassRenderer.setRenderFlag(!1),layer.render(),layer.multiPassRenderer.setRenderFlag(!0)}))}}]),RenderPass}()).prototype,"rendererService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=RenderPass},891:function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(3),__webpack_require__(26),__webpack_require__(9),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(11),__webpack_require__(10),__webpack_require__(202),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_dec3,_dec4,_dec5,_class,_class2,_descriptor,_descriptor2,_descriptor3,_descriptor4,_inversify=__webpack_require__(18),_index=__webpack_require__(25),_types=__webpack_require__(55),_gl=__webpack_require__(173),_IMultiPassRenderer=__webpack_require__(129);function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var copyFS="varying vec2 v_UV;\n\nuniform sampler2D u_Texture;\n\nvoid main() {\n  gl_FragColor = vec4(texture2D(u_Texture, v_UV));\n}";function halton(index,base){for(var result=0,f=1/base,i=index;0<i;)result+=f*(i%base),i=Math.floor(i/base),f/=base;return result}var accumulatingId=1,TAAPass=(_dec=(0,_inversify.injectable)(),_dec2=(0,_index.lazyInject)(_types.TYPES.IRendererService),_dec3=(0,_index.lazyInject)(_types.TYPES.IShaderModuleService),_dec4=(0,_index.lazyInject)(_types.TYPES.ICameraService),_dec5=(0,_index.lazyInject)(_types.TYPES.ILogService),_dec((_descriptor=_applyDecoratedDescriptor((_class2=function(){function TAAPass(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,TAAPass),_initializerDefineProperty(this,"rendererService",_descriptor,this),_initializerDefineProperty(this,"shaderModule",_descriptor2,this),_initializerDefineProperty(this,"cameraService",_descriptor3,this),_initializerDefineProperty(this,"logger",_descriptor4,this),this.haltonSequence=[],this.accumulatingId=0,this.frame=0,this.timer=void 0,this.sampleRenderTarget=void 0,this.prevRenderTarget=void 0,this.outputRenderTarget=void 0,this.copyRenderTarget=void 0,this.blendModel=void 0,this.outputModel=void 0,this.copyModel=void 0}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(TAAPass,[{key:"getType",value:function getType(){return _IMultiPassRenderer.PassType.Normal}},{key:"getName",value:function getName(){return"taa"}},{key:"init",value:function init(){var _this$rendererService=this.rendererService,createFramebuffer=_this$rendererService.createFramebuffer,createTexture2D=_this$rendererService.createTexture2D;this.sampleRenderTarget=createFramebuffer({color:createTexture2D({width:1,height:1,wrapS:_gl.gl.CLAMP_TO_EDGE,wrapT:_gl.gl.CLAMP_TO_EDGE})}),this.prevRenderTarget=createFramebuffer({color:createTexture2D({width:1,height:1,wrapS:_gl.gl.CLAMP_TO_EDGE,wrapT:_gl.gl.CLAMP_TO_EDGE})}),this.outputRenderTarget=createFramebuffer({color:createTexture2D({width:1,height:1,wrapS:_gl.gl.CLAMP_TO_EDGE,wrapT:_gl.gl.CLAMP_TO_EDGE})}),this.copyRenderTarget=createFramebuffer({color:createTexture2D({width:1,height:1,wrapS:_gl.gl.CLAMP_TO_EDGE,wrapT:_gl.gl.CLAMP_TO_EDGE})});for(var i=0;30>i;i++)this.haltonSequence.push([halton(i,2),halton(i,3)]);this.blendModel=this.createTriangleModel("blend-pass","uniform float u_Opacity : 1.0;\nuniform float u_MixRatio : 0.5;\n\nuniform sampler2D u_Diffuse1;\nuniform sampler2D u_Diffuse2;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  vec4 texel1 = texture2D(u_Diffuse1, v_UV);\n  vec4 texel2 = texture2D(u_Diffuse2, v_UV);\n  gl_FragColor = u_Opacity * mix(texel1, texel2, u_MixRatio);\n}"),this.outputModel=this.createTriangleModel("copy-pass",copyFS,{blend:{enable:!0,func:{srcRGB:_gl.gl.ONE,dstRGB:_gl.gl.ONE_MINUS_SRC_ALPHA,srcAlpha:_gl.gl.ONE,dstAlpha:_gl.gl.ONE_MINUS_SRC_ALPHA},equation:{rgb:_gl.gl.FUNC_ADD,alpha:_gl.gl.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",copyFS)}},{key:"render",value:function render(layer){var _this=this,_this$rendererService2=this.rendererService,clear=_this$rendererService2.clear,getViewportSize=_this$rendererService2.getViewportSize,useFramebuffer=_this$rendererService2.useFramebuffer,_getViewportSize=getViewportSize(),width=_getViewportSize.width,height=_getViewportSize.height;this.sampleRenderTarget.resize({width:width,height:height}),this.prevRenderTarget.resize({width:width,height:height}),this.outputRenderTarget.resize({width:width,height:height}),this.copyRenderTarget.resize({width:width,height:height}),this.resetFrame(),this.stopAccumulating();var readFBO=layer.multiPassRenderer.getPostProcessor().getReadFBO();useFramebuffer(readFBO,(function(){clear({color:[0,0,0,0],depth:1,stencil:0,framebuffer:readFBO}),layer.multiPassRenderer.setRenderFlag(!1),layer.render(),layer.multiPassRenderer.setRenderFlag(!0)}));var accumulate=function(id){_this.accumulatingId&&id===_this.accumulatingId&&(_this.isFinished()||(_this.doRender(layer),requestAnimationFrame((function(){accumulate(id)}))))};this.accumulatingId=accumulatingId++,this.timer=setTimeout((function(){accumulate(_this.accumulatingId)}),50)}},{key:"doRender",value:function doRender(layer){var _this2=this;this.logger.info("accumulatingId: ".concat(this.accumulatingId));var _this$rendererService3=this.rendererService,clear=_this$rendererService3.clear,getViewportSize=_this$rendererService3.getViewportSize,useFramebuffer=_this$rendererService3.useFramebuffer,_getViewportSize2=getViewportSize(),width=_getViewportSize2.width,height=_getViewportSize2.height,_layer$getStyleOption2=layer.getStyleOptions().jitterScale,jitterScale=void 0===_layer$getStyleOption2?1:_layer$getStyleOption2,offset=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((2*offset[0]-1)/width*jitterScale,(2*offset[1]-1)/height*jitterScale),layer.multiPassRenderer.setRenderFlag(!1),layer.hooks.beforeRender.call(),useFramebuffer(this.sampleRenderTarget,(function(){clear({color:[0,0,0,0],depth:1,stencil:0,framebuffer:_this2.sampleRenderTarget}),layer.render()})),layer.hooks.afterRender.call(),layer.multiPassRenderer.setRenderFlag(!0);var layerStyleOptions=layer.getStyleOptions();useFramebuffer(this.outputRenderTarget,(function(){_this2.blendModel.draw({uniforms:{u_Opacity:layerStyleOptions.opacity||1,u_MixRatio:0===_this2.frame?1:.9,u_Diffuse1:_this2.sampleRenderTarget,u_Diffuse2:0===_this2.frame?layer.multiPassRenderer.getPostProcessor().getReadFBO():_this2.prevRenderTarget}})})),0===this.frame&&clear({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),1<=this.frame&&(useFramebuffer(this.copyRenderTarget,(function(){_this2.outputModel.draw({uniforms:{u_Texture:_this2.outputRenderTarget}})})),useFramebuffer(layer.multiPassRenderer.getPostProcessor().getReadFBO(),(function(){_this2.copyModel.draw({uniforms:{u_Texture:_this2.copyRenderTarget}})})),layer.multiPassRenderer.getPostProcessor().render(layer));var tmp=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=tmp,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function isFinished(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function resetFrame(){this.frame=0}},{key:"stopAccumulating",value:function stopAccumulating(){this.accumulatingId=0,window.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function createTriangleModel(shaderModuleName,fragmentShader,options){this.shaderModule.registerModule(shaderModuleName,{vs:"attribute vec2 a_Position;\n\nvarying vec2 v_UV;\n\nvoid main() {\n  v_UV = 0.5 * (a_Position + 1.0);\n  gl_Position = vec4(a_Position, 0., 1.);\n}",fs:fragmentShader});var _this$shaderModule$ge=this.shaderModule.getModule(shaderModuleName),vs=_this$shaderModule$ge.vs,fs=_this$shaderModule$ge.fs,uniforms=_this$shaderModule$ge.uniforms,_this$rendererService4=this.rendererService,createAttribute=_this$rendererService4.createAttribute,createBuffer=_this$rendererService4.createBuffer;return(0,_this$rendererService4.createModel)(_objectSpread({vs:vs,fs:fs,attributes:{a_Position:createAttribute({buffer:createBuffer({data:[-4,-4,4,-4,0,4],type:_gl.gl.FLOAT}),size:2})},uniforms:_objectSpread({},uniforms),depth:{enable:!1},count:3},options))}}]),TAAPass}()).prototype,"rendererService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor2=_applyDecoratedDescriptor(_class2.prototype,"shaderModule",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor3=_applyDecoratedDescriptor(_class2.prototype,"cameraService",[_dec4],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor4=_applyDecoratedDescriptor(_class2.prototype,"logger",[_dec5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=TAAPass},892:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if(Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(16),__webpack_require__(9),__webpack_require__(23),__webpack_require__(4),__webpack_require__(40),__webpack_require__(0),__webpack_require__(2),__webpack_require__(38),__webpack_require__(5),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.packUint8ToFloat=packUint8ToFloat,exports.packCircleVertex=function packCircleVertex(props){var color=props.color,radius=props.radius,tileX=props.tileX,tileY=props.tileY,shape=props.shape,opacity=props.opacity,strokeColor=props.strokeColor,strokeWidth=props.strokeWidth,strokeOpacity=props.strokeOpacity,packedBuffer=[],packedBuffer2=[],packedBuffer3=[],packedColor=[packUint8ToFloat(color[0],color[1]),packUint8ToFloat(color[2],color[3])],packedStrokeColor=[packUint8ToFloat(strokeColor[0],strokeColor[1]),packUint8ToFloat(strokeColor[2],strokeColor[3])];return[[-1,-1],[1,-1],[1,1],[-1,1]].forEach((function(_ref){var _ref2=_slicedToArray(_ref,2),extrudeX=_ref2[0],extrudeY=_ref2[1];packedBuffer.push([].concat(packedColor,[(extrudeX+1)*LEFT_SHIFT23+(extrudeY+1)*LEFT_SHIFT21+(0,_sdf2d.getShapeIndex)(shape)*LEFT_SHIFT17+radius,(tileX+512)*LEFT_SHIFT19+(tileY+512)*LEFT_SHIFT6])),packedBuffer2.push([].concat(packedStrokeColor,[strokeWidth,strokeOpacity])),packedBuffer3.push([opacity,0,0,0])})),{packedBuffer:packedBuffer,packedBuffer2:packedBuffer2,packedBuffer3:packedBuffer3}},exports.packOpacity=function packOpacity(opacity,placed){if(0===opacity&&!placed)return 0;if(1===opacity&&placed)return 4294967295;var targetBit=placed?1:0,opacityBits=Math.floor(127*opacity);return opacityBits*LEFT_SHIFT25+targetBit*LEFT_SHIFT24+opacityBits*LEFT_SHIFT17+targetBit*LEFT_SHIFT16+opacityBits*LEFT_SHIFT9+targetBit*LEFT_SHIFT8+opacityBits*LEFT_SHIFT1+targetBit},exports.LEFT_SHIFT25=exports.LEFT_SHIFT24=exports.LEFT_SHIFT23=exports.LEFT_SHIFT22=exports.LEFT_SHIFT21=exports.LEFT_SHIFT20=exports.LEFT_SHIFT19=exports.LEFT_SHIFT18=exports.LEFT_SHIFT17=exports.LEFT_SHIFT16=exports.LEFT_SHIFT15=exports.LEFT_SHIFT14=exports.LEFT_SHIFT13=exports.LEFT_SHIFT9=exports.LEFT_SHIFT8=exports.LEFT_SHIFT7=exports.LEFT_SHIFT6=exports.LEFT_SHIFT2=exports.LEFT_SHIFT1=void 0;var _lodash=__webpack_require__(72),_sdf2d=__webpack_require__(893),LEFT_SHIFT1=2;exports.LEFT_SHIFT1=LEFT_SHIFT1;exports.LEFT_SHIFT2=4;var LEFT_SHIFT6=64;exports.LEFT_SHIFT6=64;exports.LEFT_SHIFT7=128;var LEFT_SHIFT8=256;exports.LEFT_SHIFT8=256;var LEFT_SHIFT9=512;exports.LEFT_SHIFT9=512;exports.LEFT_SHIFT13=8192;exports.LEFT_SHIFT14=16384;exports.LEFT_SHIFT15=32768;var LEFT_SHIFT16=65536;exports.LEFT_SHIFT16=65536;var LEFT_SHIFT17=131072;exports.LEFT_SHIFT17=131072;exports.LEFT_SHIFT18=262144;var LEFT_SHIFT19=524288;exports.LEFT_SHIFT19=524288;exports.LEFT_SHIFT20=1048576;var LEFT_SHIFT21=2097152;exports.LEFT_SHIFT21=2097152;exports.LEFT_SHIFT22=4194304;var LEFT_SHIFT23=8388608;exports.LEFT_SHIFT23=8388608;var LEFT_SHIFT24=16777216;exports.LEFT_SHIFT24=16777216;var LEFT_SHIFT25=33554432;function packUint8ToFloat(a,b){return 256*(a=(0,_lodash.clamp)(Math.floor(a),0,255))+(b=(0,_lodash.clamp)(Math.floor(b),0,255))}exports.LEFT_SHIFT25=33554432},893:function(module,exports,__webpack_require__){"use strict";__webpack_require__(59),__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.getShapeIndex=function getShapeIndex(shape){return sdf2DFunctions.indexOf(shape)},exports.sdf2DFunctions=void 0;var sdf2DFunctions=["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"];exports.sdf2DFunctions=sdf2DFunctions},894:function(module,exports,__webpack_require__){},895:function(module,exports,__webpack_require__){"use strict";var ScaleTypes,StyleScaleType,AttributeType;__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.AttributeType=exports.StyleScaleType=exports.ScaleTypes=void 0,exports.ScaleTypes=ScaleTypes,function(ScaleTypes){ScaleTypes.LINEAR="linear",ScaleTypes.POWER="power",ScaleTypes.LOG="log",ScaleTypes.IDENTITY="identity",ScaleTypes.TIME="time",ScaleTypes.QUANTILE="quantile",ScaleTypes.QUANTIZE="quantize",ScaleTypes.THRESHOLD="threshold",ScaleTypes.CAT="cat"}(ScaleTypes||(exports.ScaleTypes=ScaleTypes={})),exports.StyleScaleType=StyleScaleType,function(StyleScaleType){StyleScaleType.CONSTANT="constant",StyleScaleType.VARIABLE="variable"}(StyleScaleType||(exports.StyleScaleType=StyleScaleType={})),exports.AttributeType=AttributeType,function(AttributeType){AttributeType[AttributeType.Attribute=0]="Attribute",AttributeType[AttributeType.InstancedAttribute=1]="InstancedAttribute",AttributeType[AttributeType.Uniform=2]="Uniform"}(AttributeType||(exports.AttributeType=AttributeType={}))},896:function(module,exports,__webpack_require__){},897:function(module,exports,__webpack_require__){"use strict";var MapType;__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.MapType=void 0,exports.MapType=MapType,function(MapType){MapType.amap="amap",MapType.mapbox="mapbox",MapType.maptalks="maptalks"}(MapType||(exports.MapType=MapType={}))},898:function(module,exports,__webpack_require__){},899:function(module,exports,__webpack_require__){"use strict";__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.CameraUniform=void 0;exports.CameraUniform={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"}},900:function(module,exports,__webpack_require__){},901:function(module,exports,__webpack_require__){"use strict";__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.SceneEventList=void 0;exports.SceneEventList=["loaded","resize","destroy"]},902:function(module,exports,__webpack_require__){},903:function(module,exports,__webpack_require__){},904:function(module,exports,__webpack_require__){},905:function(module,exports,__webpack_require__){"use strict";var PositionType;__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.PositionType=void 0,exports.PositionType=PositionType,function(PositionType){PositionType.TOPRIGHT="topright",PositionType.TOPLEFT="topleft",PositionType.BOTTOMRIGHT="bottomright",PositionType.BOTTOMLEFT="bottomleft"}(PositionType||(exports.PositionType=PositionType={}))},906:function(module,exports,__webpack_require__){},907:function(module,exports,__webpack_require__){},908:function(module,exports,__webpack_require__){},909:function(module,exports,__webpack_require__){},910:function(module,exports,__webpack_require__){},911:function(module,exports,__webpack_require__){},912:function(module,exports,__webpack_require__){},913:function(module,exports,__webpack_require__){},914:function(module,exports,__webpack_require__){},915:function(module,exports,__webpack_require__){},916:function(module,exports,__webpack_require__){},937:function(module,exports,__webpack_require__){"use strict";__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;exports.default={properties:{enablePicking:{type:"boolean"},enableHighlight:{type:"boolean"},highlightColor:{oneOf:[{type:"array",items:{type:"number",minimum:0,maximum:1}},{type:"string"}]}}}},938:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(16),__webpack_require__(9),__webpack_require__(23),__webpack_require__(4),__webpack_require__(28),__webpack_require__(15),__webpack_require__(0),__webpack_require__(14),__webpack_require__(12),__webpack_require__(2),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _core=__webpack_require__(25),_BaseLayer=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(99)),_triangulation=__webpack_require__(174);var HeatMapGrid=function(_BaseLayer$default){function HeatMapGrid(){var _getPrototypeOf2,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,HeatMapGrid);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(HeatMapGrid)).call.apply(_getPrototypeOf2,[this].concat(args)))).name="PointLayer",_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(HeatMapGrid,_BaseLayer$default),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(HeatMapGrid,[{key:"getConfigSchema",value:function getConfigSchema(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"renderModels",value:function renderModels(){var _this2=this,_this$getStyleOptions=this.getStyleOptions(),opacity=_this$getStyleOptions.opacity,coverage=_this$getStyleOptions.coverage;return this.models.forEach((function(model){return model.draw({uniforms:{u_Opacity:opacity||1,u_coverage:coverage||1,u_radius:[_this2.getSource().data.xOffset,_this2.getSource().data.yOffset]}})})),this}},{key:"buildModels",value:function buildModels(){this.registerBuiltinAttributes(this),this.models=[this.buildLayerModel({moduleName:"pointExtrude",vertexShader:'precision highp float;\nattribute vec3 a_Position;\nattribute vec3 a_Pos;\nattribute float a_Size;\nattribute vec4 a_Color;\nuniform vec2 u_radius;\nuniform float u_coverage: 1.;\nuniform float u_angle: 0;\nuniform mat4 u_ModelMatrix;\nvarying vec4 v_color;\n#pragma include "projection"\nvoid main() {\n    v_color = a_Color;\n    mat2 rotationMatrix = mat2(cos(u_angle), sin(u_angle), -sin(u_angle), cos(u_angle));\n    vec2 offset =(vec2(a_Position.xy * u_radius * u_coverage * rotationMatrix));\n    vec4 project_pos = project_position(vec4(a_Pos.xy + offset, 0, 1.0));\n    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy, 0., 1.0));\n}\n',fragmentShader:"precision highp float;\nvarying vec4 v_color;\nuniform float u_Opacity: 0.1;\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a *= u_Opacity;\n}\n",triangulation:_triangulation.HeatmapGridTriangulation,blend:{enable:!0,func:{srcRGB:_core.gl.SRC_ALPHA,srcAlpha:1,dstRGB:_core.gl.ONE_MINUS_SRC_ALPHA,dstAlpha:1}}})]}},{key:"registerBuiltinAttributes",value:function registerBuiltinAttributes(layer){layer.styleAttributeService.registerStyleAttribute({name:"size",type:_core.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:_core.gl.DYNAMIC_DRAW,data:[],type:_core.gl.FLOAT},size:3,update:function update(feature){var size=feature.size;return Array.isArray(size)?[size[0]]:[size]}}}),layer.styleAttributeService.registerStyleAttribute({name:"normal",type:_core.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:_core.gl.STATIC_DRAW,data:[],type:_core.gl.FLOAT},size:3,update:function update(feature,featureIdx,vertex,attributeIdx,normal){return normal}}}),layer.styleAttributeService.registerStyleAttribute({name:"pos",type:_core.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:_core.gl.DYNAMIC_DRAW,data:[],type:_core.gl.FLOAT},size:3,update:function update(feature){var coordinates=feature.coordinates;return[coordinates[0],coordinates[1],0]}}})}}]),HeatMapGrid}(_BaseLayer.default);exports.default=HeatMapGrid},940:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(62),__webpack_require__(23),__webpack_require__(4),__webpack_require__(20),__webpack_require__(40),__webpack_require__(0),__webpack_require__(2),__webpack_require__(38),__webpack_require__(5),__webpack_require__(414),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.computeMiter=computeMiter,exports.computeNormal=computeNormal,exports.direction=direction,exports.default=function _default(points,closed,indexOffset){var lineA=_glMatrix.vec2.fromValues(0,0),lineB=_glMatrix.vec2.fromValues(0,0),tangent=_glMatrix.vec2.fromValues(0,0),miter=_glMatrix.vec2.create(),started=!1,lineNormal=null,tmp=_glMatrix.vec2.create(),count=indexOffset||0,out=[],attrPos=[],attrIndex=[],miters=[],attrDistance=[0,0];closed&&(points=points.slice()).push(points[0]);for(var total=points.length,i=1;i<total;i++){var index=count,last=_glMatrix.vec2.fromValues(points[i-1][0],points[i-1][1]),cur=_glMatrix.vec2.fromValues(points[i][0],points[i][1]),next=i<points.length-1?_glMatrix.vec2.fromValues(points[i+1][0],points[i+1][1]):null;if(!isPointEqual(last,cur)){if(next)for(var nextIndex=i+1;next&&isPointEqual(cur,next);)next=nextIndex<points.length-1?_glMatrix.vec2.fromValues(points[++nextIndex][0],points[nextIndex][1]):null;var d=(end=cur,dx=void 0,dy=void 0,dx=(start=last)[0]-end[0],dy=start[1]-end[1],Math.sqrt(dx*dx+dy*dy))+attrDistance[attrDistance.length-1];if(direction(lineA,cur,last),lineNormal||computeNormal(lineNormal=_glMatrix.vec2.create(),lineA),started||(started=!0,extrusions(attrPos,out,miters,last,lineNormal,1)),attrIndex.push(index+0,index+2,index+1),next){direction(lineB,next,cur);var miterLen=computeMiter(tangent,_glMatrix.vec2.fromValues(miter[0],miter[1]),lineA,lineB,1),flip=0>_glMatrix.vec2.dot(tangent,lineNormal)?-1:1,bevel=Math.abs(miterLen)>3;if(1e3<Math.abs(miterLen)){extrusions(attrPos,out,miters,cur,lineNormal,1),attrIndex.push(index+1,index+2,index+3),attrIndex.push(index+2,index+4,index+3),computeNormal(tmp,lineB),_glMatrix.vec2.copy(lineNormal,tmp),extrusions(attrPos,out,miters,cur,lineNormal,1),attrDistance.push(d,d,d,d),count+=4;continue}bevel?(miterLen=3,extrusions(attrPos,out,miters,cur,lineNormal,1),attrIndex.push(index+1,index+2,index+3),attrIndex.push.apply(attrIndex,_toConsumableArray(1===flip?[index+2,index+4,index+5]:[index+4,index+5,index+3])),computeNormal(tmp,lineB),_glMatrix.vec2.copy(lineNormal,tmp),extrusions(attrPos,out,miters,cur,lineNormal,1),attrDistance.push(d,d,d,d),count+=4):(extrusions(attrPos,out,miters,cur,lineNormal,1),attrIndex.push(index+1,index+2,index+3),addNext(out,miters,lineNormal,miterLen*-flip),attrPos.push(cur[0],cur[1],0),attrIndex.push(index+2,index+4,index+3),attrIndex.push(index+4,index+5,index+6),computeNormal(tmp,lineB),_glMatrix.vec2.copy(lineNormal,tmp),extrusions(attrPos,out,miters,cur,lineNormal,1),attrDistance.push(d,d,d,d,d),count+=5)}else computeNormal(lineNormal,lineA),extrusions(attrPos,out,miters,cur,lineNormal,1),attrDistance.push(d,d),attrIndex.push(index+1,index+2,index+3),count+=2}}var end,start,dx,dy;for(var pickData=[],_i=0;_i<miters.length;_i++)pickData.push(attrPos[3*_i],attrPos[3*_i+1],attrPos[3*_i+1],attrDistance[_i],miters[_i]);return{normals:out,attrIndex:attrIndex,attrPos:pickData}};var _utils=__webpack_require__(60),_glMatrix=__webpack_require__(177);function computeMiter(tangent,miter,lineA,lineB,halfThick){_glMatrix.vec2.add(tangent,lineA,lineB),_glMatrix.vec2.normalize(tangent,tangent),miter=_glMatrix.vec2.fromValues(-tangent[1],tangent[0]);var tmp=_glMatrix.vec2.fromValues(-lineA[1],lineA[0]);return halfThick/_glMatrix.vec2.dot(miter,tmp)}function computeNormal(out,dir){return _glMatrix.vec2.set(out,-dir[1],dir[0])}function direction(out,a,b){var a1=(0,_utils.aProjectFlat)([a[0],a[1]]),b1=(0,_utils.aProjectFlat)([b[0],b[1]]);return _glMatrix.vec2.sub(out,a1,b1),_glMatrix.vec2.normalize(out,out),out}function extrusions(positions,out,miters,point,normal,scale){addNext(out,miters,normal,-scale),addNext(out,miters,normal,scale),positions.push(point[0],point[1],0),positions.push(point[0],point[1],0)}function addNext(out,miters,normal,length){out.push(normal[0],normal[1],0),miters.push(length)}function isPointEqual(a,b){return a[0]===b[0]&&a[1]===b[1]}},941:function(module,exports,__webpack_require__){"use strict";function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(62),__webpack_require__(23),__webpack_require__(4),__webpack_require__(27),__webpack_require__(20),__webpack_require__(40),__webpack_require__(0),__webpack_require__(2),__webpack_require__(38),__webpack_require__(5),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function extrudePolygon(path){var p1=path[0][0],p2=path[0][path[0].length-1];p1[0]===p2[0]&&p1[1]===p2[1]&&(path[0]=path[0].slice(0,path[0].length-1));for(var n=path[0].length,flattengeo=_earcut.default.flatten(path),vertices=flattengeo.vertices,dimensions=flattengeo.dimensions,positions=[],indexArray=[],j=0;j<vertices.length/dimensions;j++)2===dimensions?positions.push(vertices[2*j],vertices[2*j+1],1):positions.push(vertices[3*j],vertices[3*j+1],1);var triangles=(0,_earcut.default)(flattengeo.vertices,flattengeo.holes,flattengeo.dimensions);indexArray.push.apply(indexArray,_toConsumableArray(triangles));for(var _loop=function(i){var prePoint=flattengeo.vertices.slice(i*dimensions,(i+1)*dimensions),nextPoint=flattengeo.vertices.slice((i+2)*dimensions,(i+3)*dimensions);0===nextPoint.length&&(nextPoint=flattengeo.vertices.slice(0,dimensions));var indexOffset=positions.length/3;positions.push(prePoint[0],prePoint[1],1,nextPoint[0],nextPoint[1],1,prePoint[0],prePoint[1],0,nextPoint[0],nextPoint[1],0),indexArray.push.apply(indexArray,_toConsumableArray([1,2,0,3,2,1].map((function(v){return v+indexOffset}))))},i=0;i<n;i++)_loop(i);return{positions:positions,index:indexArray}},exports.fillPolygon=function fillPolygon(points){var flattengeo=_earcut.default.flatten(points),triangles=(0,_earcut.default)(flattengeo.vertices,flattengeo.holes,flattengeo.dimensions);return{positions:flattengeo.vertices,index:triangles}};var _earcut=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(415))},942:function(module,exports,__webpack_require__){"use strict";var _geometryShape,ShapeType3D,ShapeType2D;function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function polygonPath(pointCount){for(var start=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,step=2*Math.PI/pointCount,line=[],i=0;i<pointCount;i++)line.push(step*i+start*Math.PI/12);return line.map((function(t){return[Math.sin(t+Math.PI/4),Math.cos(t+Math.PI/4),0]}))}function circle(){return polygonPath(30)}function square(){return polygonPath(4)}function triangle(){return polygonPath(3)}function hexagon(){return polygonPath(6)}function pentagon(){return polygonPath(5)}__webpack_require__(27),__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.polygonPath=polygonPath,exports.circle=circle,exports.square=square,exports.triangle=triangle,exports.hexagon=hexagon,exports.pentagon=pentagon,exports.geometryShape=exports.ShapeType2D=exports.ShapeType3D=void 0,exports.ShapeType3D=ShapeType3D,function(ShapeType3D){ShapeType3D.CYLINDER="cylinder",ShapeType3D.SQUARECOLUMN="squareColumn",ShapeType3D.TRIANGLECOLUMN="triangleColumn",ShapeType3D.HEXAGONCOLUMN="hexagonColumn",ShapeType3D.PENTAGONCOLUMN="pentagonColumn"}(ShapeType3D||(exports.ShapeType3D=ShapeType3D={})),exports.ShapeType2D=ShapeType2D,function(ShapeType2D){ShapeType2D.CIRCLE="circle",ShapeType2D.SQUARE="square",ShapeType2D.TRIANGLE="triangle",ShapeType2D.HEXAGON="hexagon",ShapeType2D.PENTAGON="pentagon"}(ShapeType2D||(exports.ShapeType2D=ShapeType2D={}));var geometryShape=(_defineProperty(_geometryShape={},ShapeType2D.CIRCLE,circle),_defineProperty(_geometryShape,ShapeType2D.HEXAGON,hexagon),_defineProperty(_geometryShape,ShapeType2D.TRIANGLE,triangle),_defineProperty(_geometryShape,ShapeType2D.SQUARE,square),_defineProperty(_geometryShape,ShapeType2D.PENTAGON,pentagon),_defineProperty(_geometryShape,ShapeType3D.CYLINDER,circle),_defineProperty(_geometryShape,ShapeType3D.HEXAGONCOLUMN,hexagon),_defineProperty(_geometryShape,ShapeType3D.TRIANGLECOLUMN,triangle),_defineProperty(_geometryShape,ShapeType3D.SQUARECOLUMN,square),_defineProperty(_geometryShape,ShapeType3D.PENTAGONCOLUMN,pentagon),_geometryShape);exports.geometryShape=geometryShape},943:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(16),__webpack_require__(9),__webpack_require__(23),__webpack_require__(4),__webpack_require__(28),__webpack_require__(15),__webpack_require__(0),__webpack_require__(14),__webpack_require__(12),__webpack_require__(2),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _core=__webpack_require__(25),_BaseLayer=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(99)),_triangulation=__webpack_require__(174);var LineLayer=function(_BaseLayer$default){function LineLayer(){var _getPrototypeOf2,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,LineLayer);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(LineLayer)).call.apply(_getPrototypeOf2,[this].concat(args)))).name="LineLayer",_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(LineLayer,_BaseLayer$default),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(LineLayer,[{key:"getConfigSchema",value:function getConfigSchema(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"renderModels",value:function renderModels(){var opacity=this.getStyleOptions().opacity;return this.models.forEach((function(model){return model.draw({uniforms:{u_Opacity:opacity||0}})})),this}},{key:"buildModels",value:function buildModels(){this.registerBuiltinAttributes(this),this.models=[this.buildLayerModel({moduleName:"line",vertexShader:'\nattribute float a_Miter;\nattribute vec4 a_Color;\nattribute float a_Size;\nattribute float a_Distance;\nattribute float a_dash_array;\nattribute float a_total_distance;\nattribute vec3 a_Normal;\nattribute vec3 a_Position;\nuniform mat4 u_ModelMatrix;\n\nvarying vec4 v_color;\nvarying float v_dash_array;\nvarying vec3 v_normal;\n#pragma include "projection"\nvoid main() {\n  v_normal = a_Normal;\n  v_color = a_Color;\n  vec3 size = a_Miter * a_Size * v_normal;\n  vec2 offset = project_pixel(size.xy);\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0, 1.0));\n}\n',fragmentShader:"uniform float u_blur : 0.99;\nvarying vec4 v_color;\nvarying vec3 v_normal;\nvoid main() {\n   gl_FragColor = v_color;\n  // anti-alias\n  float blur = smoothstep(u_blur, 1., length(v_normal.xy));\n  gl_FragColor.a *= blur;\n}",triangulation:_triangulation.LineTriangulation,blend:{enable:!0,func:{srcRGB:_core.gl.SRC_ALPHA,srcAlpha:1,dstRGB:_core.gl.ONE_MINUS_SRC_ALPHA,dstAlpha:1}}})]}},{key:"registerBuiltinAttributes",value:function registerBuiltinAttributes(layer){layer.styleAttributeService.registerStyleAttribute({name:"size",type:_core.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:_core.gl.DYNAMIC_DRAW,data:[],type:_core.gl.FLOAT},size:1,update:function update(feature){var size=feature.size;return Array.isArray(size)?[size[0]]:[size]}}}),layer.styleAttributeService.registerStyleAttribute({name:"normal",type:_core.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:_core.gl.STATIC_DRAW,data:[],type:_core.gl.FLOAT},size:3,update:function update(feature,featureIdx,vertex,attributeIdx,normal){return normal}}}),layer.styleAttributeService.registerStyleAttribute({name:"miter",type:_core.AttributeType.Attribute,descriptor:{name:"a_Miter",buffer:{usage:_core.gl.DYNAMIC_DRAW,data:[],type:_core.gl.FLOAT},size:1,update:function update(feature,featureIdx,vertex){return[vertex[4]]}}}),layer.styleAttributeService.registerStyleAttribute({name:"distance",type:_core.AttributeType.Attribute,descriptor:{name:"a_Distance",buffer:{usage:_core.gl.DYNAMIC_DRAW,data:[],type:_core.gl.FLOAT},size:1,update:function update(feature,featureIdx,vertex){return[vertex[3]]}}})}}]),LineLayer}(_BaseLayer.default);exports.default=LineLayer},944:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(16),__webpack_require__(9),__webpack_require__(23),__webpack_require__(4),__webpack_require__(28),__webpack_require__(15),__webpack_require__(0),__webpack_require__(14),__webpack_require__(12),__webpack_require__(2),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _core=__webpack_require__(25),_BaseLayer=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(99)),_triangulation=__webpack_require__(174);var PointLayer=function(_BaseLayer$default){function PointLayer(){var _getPrototypeOf2,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PointLayer);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(PointLayer)).call.apply(_getPrototypeOf2,[this].concat(args)))).name="PointLayer",_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(PointLayer,_BaseLayer$default),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(PointLayer,[{key:"getConfigSchema",value:function getConfigSchema(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"renderModels",value:function renderModels(){var opacity=this.getStyleOptions().opacity;return this.models.forEach((function(model){return model.draw({uniforms:{u_Opacity:opacity||0}})})),this}},{key:"buildModels",value:function buildModels(){this.registerBuiltinAttributes(this),this.models=[this.buildLayerModel({moduleName:"pointExtrude",vertexShader:'precision highp float;\nattribute vec3 a_Position;\nattribute vec3 a_Pos;\nattribute vec4 a_Color;\nattribute vec3 a_Size;\nattribute vec3 a_Normal;\n\nuniform mat4 u_ModelMatrix;\nvarying vec4 v_color;\n\n#pragma include "projection"\nvoid main() {\n vec3 size = a_Size * a_Position;\n v_color = vec4(a_Normal,1.0);\n vec2 offset = project_pixel(size.xy);\n vec4 project_pos = project_position(vec4(a_Pos.xy, 0, 1.0));\n gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, size.z, 1.0));\n\n}\n',fragmentShader:"varying vec4 v_color;\nuniform float u_opacity: 1.0;\nvoid main() {\n  gl_FragColor = v_color;\n  gl_FragColor.a *= u_opacity;\n}",triangulation:_triangulation.PointExtrudeTriangulation,blend:{enable:!0,func:{srcRGB:_core.gl.SRC_ALPHA,srcAlpha:1,dstRGB:_core.gl.ONE_MINUS_SRC_ALPHA,dstAlpha:1}}})]}},{key:"registerBuiltinAttributes",value:function registerBuiltinAttributes(layer){layer.styleAttributeService.registerStyleAttribute({name:"size",type:_core.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:_core.gl.DYNAMIC_DRAW,data:[],type:_core.gl.FLOAT},size:3,update:function update(feature){var size=feature.size;if(size){var buffersize=[];return Array.isArray(size)&&(buffersize=2===size.length?[size[0],size[0],size[1]]:size),Array.isArray(size)||(buffersize=[size]),buffersize}return[2,2,2]}}}),layer.styleAttributeService.registerStyleAttribute({name:"normal",type:_core.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:_core.gl.STATIC_DRAW,data:[],type:_core.gl.FLOAT},size:3,update:function update(feature,featureIdx,vertex,attributeIdx,normal){return normal}}}),layer.styleAttributeService.registerStyleAttribute({name:"pos",type:_core.AttributeType.Attribute,descriptor:{name:"a_Pos",buffer:{usage:_core.gl.DYNAMIC_DRAW,data:[],type:_core.gl.FLOAT},size:3,update:function update(feature){var coordinates=feature.coordinates;return[coordinates[0],coordinates[1],0]}}})}}]),PointLayer}(_BaseLayer.default);exports.default=PointLayer},945:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(16),__webpack_require__(9),__webpack_require__(62),__webpack_require__(23),__webpack_require__(4),__webpack_require__(40),__webpack_require__(28),__webpack_require__(15),__webpack_require__(0),__webpack_require__(14),__webpack_require__(12),__webpack_require__(2),__webpack_require__(38),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.PointTriangulation=PointTriangulation,exports.default=void 0;var _core=__webpack_require__(25),_BaseLayer=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(99));function PointTriangulation(feature){var coordinates=feature.coordinates;return{vertices:[].concat(_toConsumableArray(coordinates),_toConsumableArray(coordinates),_toConsumableArray(coordinates),_toConsumableArray(coordinates)),extrude:[-1,-1,1,-1,1,1,-1,1],indices:[0,1,2,2,3,0],size:coordinates.length}}var PointLayer=function(_BaseLayer$default){function PointLayer(){var _getPrototypeOf2,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PointLayer);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(PointLayer)).call.apply(_getPrototypeOf2,[this].concat(args)))).name="PointLayer",_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(PointLayer,_BaseLayer$default),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(PointLayer,[{key:"getConfigSchema",value:function getConfigSchema(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"renderModels",value:function renderModels(){var _this2=this,opacity=this.getStyleOptions().opacity,createTexture2D=this.rendererService.createTexture2D;return this.models.forEach((function(model){return model.draw({uniforms:{u_Opacity:opacity||0,u_texture:createTexture2D({data:_this2.iconService.getCanvas(),width:1024,height:_this2.iconService.canvasHeight||64})}})})),this}},{key:"buildModels",value:function buildModels(){var _this3=this;this.registerBuiltinAttributes(this),this.iconService.on("imageUpdate",(function(){_this3.renderModels()})),this.models=[this.buildLayerModel({moduleName:"pointImage",vertexShader:'precision highp float;\nattribute vec3 a_Position;\nattribute vec4 a_Color;\nattribute vec2 a_Uv;\nattribute float a_Size;\nvarying vec4 v_color;\nvarying vec2 v_uv;\nuniform mat4 u_ModelMatrix;\n#pragma include "projection"\nvoid main() {\n   v_color = a_Color;\n   v_uv = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n   gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n   gl_PointSize = a_Size;\n\n}\n',fragmentShader:"uniform sampler2D u_texture;\nvarying vec4 v_color;\nvarying vec2 v_uv;\nvoid main(){\n   vec2 pos= v_uv + gl_PointCoord / vec2(1024.,128.)* 64.;\n//    pos.y= 1.- pos.y;\n  vec4 textureColor=texture2D(u_texture,pos);\n  if(v_color == vec4(0.)){\n        gl_FragColor= textureColor;\n  }else {\n        gl_FragColor= step(0.01, textureColor.x) * v_color;\n  }\n  return;\n}\n",triangulation:PointTriangulation,primitive:_core.gl.POINTS,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:_core.gl.SRC_ALPHA,srcAlpha:1,dstRGB:_core.gl.ONE_MINUS_SRC_ALPHA,dstAlpha:1}}})]}},{key:"registerBuiltinAttributes",value:function registerBuiltinAttributes(layer){var _this4=this;layer.styleAttributeService.registerStyleAttribute({name:"size",type:_core.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:_core.gl.DYNAMIC_DRAW,data:[],type:_core.gl.FLOAT},size:1,update:function update(feature){var size=feature.size;return Array.isArray(size)?[size[0]]:[size]}}}),layer.styleAttributeService.registerStyleAttribute({name:"uv",type:_core.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:_core.gl.DYNAMIC_DRAW,data:[],type:_core.gl.FLOAT},size:2,update:function update(feature){var _ref=_this4.iconService.getIconMap()[feature.shape]||{x:0,y:0};return[_ref.x,_ref.y]}}})}}]),PointLayer}(_BaseLayer.default);exports.default=PointLayer},946:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}}(arr)||function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||"[object Arguments]"===Object.prototype.toString.call(iter))return Array.from(iter)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(16),__webpack_require__(9),__webpack_require__(62),__webpack_require__(59),__webpack_require__(23),__webpack_require__(4),__webpack_require__(40),__webpack_require__(28),__webpack_require__(15),__webpack_require__(0),__webpack_require__(14),__webpack_require__(12),__webpack_require__(2),__webpack_require__(38),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.PointTriangulation=PointTriangulation,exports.default=void 0;var _core=__webpack_require__(25),_BaseLayer=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(99));function PointTriangulation(feature){var coordinates=feature.coordinates;return{vertices:[].concat(_toConsumableArray(coordinates),_toConsumableArray(coordinates),_toConsumableArray(coordinates),_toConsumableArray(coordinates)),extrude:[-1,-1,1,-1,1,1,-1,1],indices:[0,1,2,2,3,0],size:coordinates.length}}var PointLayer=function(_BaseLayer$default){function PointLayer(){var _getPrototypeOf2,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PointLayer);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(PointLayer)).call.apply(_getPrototypeOf2,[this].concat(args)))).name="PointLayer",_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(PointLayer,_BaseLayer$default),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(PointLayer,[{key:"getConfigSchema",value:function getConfigSchema(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"renderModels",value:function renderModels(){var opacity=this.getStyleOptions().opacity;return this.models.forEach((function(model){return model.draw({uniforms:{u_Opacity:opacity||0}})})),this}},{key:"buildModels",value:function buildModels(){this.registerBuiltinAttributes(this),this.models=[this.buildLayerModel({moduleName:"pointfill",vertexShader:'attribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec2 a_Extrude;\nattribute float a_Size;\nattribute float a_Shape;\nuniform mat4 u_ModelMatrix;\n\nuniform float u_stroke_width : 2;\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\n#pragma include "projection"\n\nvoid main() {\n  // unpack color(vec2)\n  v_color = a_Color;\n  vec2 extrude = a_Extrude;\n\n  float shape_type = a_Shape;\n\n  // radius(16-bit)\n  v_radius = a_Size;\n\n  vec2 offset = project_pixel(extrude * (a_Size + u_stroke_width));\n  vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));\n\n  // TODO: billboard\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));\n\n  // anti-alias\n  float antialiasblur = 1.0 / (a_Size + u_stroke_width);\n\n  // construct point coords\n  v_data = vec4(extrude, antialiasblur, shape_type);\n}\n',fragmentShader:"uniform float u_blur : 0;\nuniform float u_opacity : 1;\nuniform float u_stroke_width : 1;\nuniform vec4 u_stroke_color : [1, 1, 1, 1];\nuniform float u_stroke_opacity : 1;\n\nvarying vec4 v_data;\nvarying vec4 v_color;\nvarying float v_radius;\n\n#pragma include \"sdf_2d\"\n\nvoid main() {\n  int shape = int(floor(v_data.w + 0.5));\n\n  lowp float antialiasblur = v_data.z;\n  float antialiased_blur = -max(u_blur, antialiasblur);\n  float r = v_radius / (v_radius + u_stroke_width);\n\n  float outer_df;\n  float inner_df;\n  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'\n  if (shape == 0) {\n    outer_df = sdCircle(v_data.xy, 1.0);\n    inner_df = sdCircle(v_data.xy, r);\n  } else if (shape == 1) {\n    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);\n    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);\n  } else if (shape == 2) {\n    outer_df = sdBox(v_data.xy, vec2(1.));\n    inner_df = sdBox(v_data.xy, vec2(r));\n  } else if (shape == 3) {\n    outer_df = sdPentagon(v_data.xy, 0.8);\n    inner_df = sdPentagon(v_data.xy, r * 0.8);\n  } else if (shape == 4) {\n    outer_df = sdHexagon(v_data.xy, 0.8);\n    inner_df = sdHexagon(v_data.xy, r * 0.8);\n  } else if (shape == 5) {\n    outer_df = sdOctogon(v_data.xy, 1.0);\n    inner_df = sdOctogon(v_data.xy, r);\n  } else if (shape == 6) {\n    outer_df = sdHexagram(v_data.xy, 0.52);\n    inner_df = sdHexagram(v_data.xy, r * 0.52);\n  } else if (shape == 7) {\n    outer_df = sdRhombus(v_data.xy, vec2(1.0));\n    inner_df = sdRhombus(v_data.xy, vec2(r));\n  } else if (shape == 8) {\n    outer_df = sdVesica(v_data.xy, 1.1, 0.8);\n    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);\n  }\n\n  float opacity_t = smoothstep(0.0, antialiased_blur, outer_df);\n\n  float color_t = u_stroke_width < 0.01 ? 0.0 : smoothstep(\n    antialiased_blur,\n    0.0,\n    inner_df\n  );\n\n  gl_FragColor = opacity_t * mix(v_color * u_opacity, u_stroke_color * u_stroke_opacity, color_t);\n}\n",triangulation:PointTriangulation,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:_core.gl.SRC_ALPHA,srcAlpha:1,dstRGB:_core.gl.ONE_MINUS_SRC_ALPHA,dstAlpha:1}}})]}},{key:"registerBuiltinAttributes",value:function registerBuiltinAttributes(layer){layer.styleAttributeService.registerStyleAttribute({name:"extrude",type:_core.AttributeType.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:_core.gl.DYNAMIC_DRAW,data:[],type:_core.gl.FLOAT},size:2,update:function update(feature,featureIdx,vertex,attributeIdx){var extrude=[-1,-1,1,-1,1,1,-1,1],extrudeIndex=attributeIdx%4*2;return[extrude[extrudeIndex],extrude[extrudeIndex+1]]}}}),layer.styleAttributeService.registerStyleAttribute({name:"size",type:_core.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:_core.gl.DYNAMIC_DRAW,data:[],type:_core.gl.FLOAT},size:1,update:function update(feature){var _feature$size=feature.size;return[void 0===_feature$size?2:_feature$size]}}}),layer.styleAttributeService.registerStyleAttribute({name:"shape",type:_core.AttributeType.Attribute,descriptor:{name:"a_Shape",buffer:{usage:_core.gl.DYNAMIC_DRAW,data:[],type:_core.gl.FLOAT},size:1,update:function update(feature){var _feature$shape=feature.shape,shape=void 0===_feature$shape?2:_feature$shape;return[layer.configService.getConfig().shape2d.indexOf(shape)]}}})}}]),PointLayer}(_BaseLayer.default);exports.default=PointLayer},947:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(16),__webpack_require__(9),__webpack_require__(4),__webpack_require__(28),__webpack_require__(15),__webpack_require__(0),__webpack_require__(14),__webpack_require__(12),__webpack_require__(2),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.polygonTriangulation=polygonTriangulation,exports.default=void 0;var _earcut=_interopRequireDefault(__webpack_require__(415)),_BaseLayer=_interopRequireDefault(__webpack_require__(99));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function polygonTriangulation(feature){var coordinates=feature.coordinates,flattengeo=_earcut.default.flatten(coordinates),vertices=flattengeo.vertices,dimensions=flattengeo.dimensions,holes=flattengeo.holes;return{indices:(0,_earcut.default)(vertices,holes,dimensions),vertices:vertices,size:dimensions}}var PolygonLayer=function(_BaseLayer$default){function PolygonLayer(){var _getPrototypeOf2,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PolygonLayer);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(PolygonLayer)).call.apply(_getPrototypeOf2,[this].concat(args)))).name="PolygonLayer",_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(PolygonLayer,_BaseLayer$default),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(PolygonLayer,[{key:"getConfigSchema",value:function getConfigSchema(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"renderModels",value:function renderModels(){var opacity=this.getStyleOptions().opacity;return this.models.forEach((function(model){return model.draw({uniforms:{u_Opacity:opacity||0}})})),this}},{key:"buildModels",value:function buildModels(){this.models=[this.buildLayerModel({moduleName:"polygon",vertexShader:'attribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\n\nvarying vec4 v_Color;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  v_Color = a_Color;\n  vec4 project_pos = project_position(vec4(a_Position, 1.0));\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  setPickingColor(a_PickingColor);\n}\n\n',fragmentShader:'uniform float u_Opacity: 1.0;\nvarying vec4 v_Color;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_Color;\n  gl_FragColor.a *= u_Opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}',triangulation:polygonTriangulation})]}}]),PolygonLayer}(_BaseLayer.default);exports.default=PolygonLayer},948:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(16),__webpack_require__(9),__webpack_require__(23),__webpack_require__(4),__webpack_require__(28),__webpack_require__(15),__webpack_require__(0),__webpack_require__(14),__webpack_require__(12),__webpack_require__(2),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _core=__webpack_require__(25),_BaseLayer=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(99)),_triangulation=__webpack_require__(174);var PointLayer=function(_BaseLayer$default){function PointLayer(){var _getPrototypeOf2,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,PointLayer);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(PointLayer)).call.apply(_getPrototypeOf2,[this].concat(args)))).name="PolygonLayer",_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(PointLayer,_BaseLayer$default),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(PointLayer,[{key:"getConfigSchema",value:function getConfigSchema(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"renderModels",value:function renderModels(){var opacity=this.getStyleOptions().opacity;return this.models.forEach((function(model){return model.draw({uniforms:{u_Opacity:opacity||0}})})),this}},{key:"buildModels",value:function buildModels(){this.registerBuiltinAttributes(this),this.models=[this.buildLayerModel({moduleName:"polygonExtrude",vertexShader:'attribute vec4 a_Color;\nattribute vec3 a_Position;\nattribute vec3 a_Normal;\nattribute float a_Size;\nuniform mat4 u_ModelMatrix;\n\nvarying vec4 v_Color;\n\n#pragma include "projection"\n#pragma include "picking"\n\nvoid main() {\n  v_Color = vec4(a_Normal,1.0);\n  vec4 project_pos = project_position(vec4(a_Position.xy,a_Position.z * a_Size, 1.0));\n  gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));\n\n  setPickingColor(a_PickingColor);\n}\n\n',fragmentShader:'uniform float u_Opacity: 1.0;\nvarying vec4 v_Color;\n\n#pragma include "picking"\n\nvoid main() {\n  gl_FragColor = v_Color;\n  gl_FragColor.a *= u_Opacity;\n  gl_FragColor = filterColor(gl_FragColor);\n}\n',triangulation:_triangulation.PolygonExtrudeTriangulation,blend:{enable:!0,func:{srcRGB:_core.gl.SRC_ALPHA,srcAlpha:1,dstRGB:_core.gl.ONE_MINUS_SRC_ALPHA,dstAlpha:1}}})]}},{key:"registerBuiltinAttributes",value:function registerBuiltinAttributes(layer){layer.styleAttributeService.registerStyleAttribute({name:"normal",type:_core.AttributeType.Attribute,descriptor:{name:"a_Normal",buffer:{usage:_core.gl.STATIC_DRAW,data:[],type:_core.gl.FLOAT},size:3,update:function update(feature,featureIdx,vertex,attributeIdx,normal){return normal}}}),layer.styleAttributeService.registerStyleAttribute({name:"size",type:_core.AttributeType.Attribute,descriptor:{name:"a_Size",buffer:{usage:_core.gl.DYNAMIC_DRAW,data:[],type:_core.gl.FLOAT},size:1,update:function update(feature){var size=feature.size;return Array.isArray(size)?[size[0]]:[size]}}})}}]),PointLayer}(_BaseLayer.default);exports.default=PointLayer},949:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(16),__webpack_require__(9),__webpack_require__(4),__webpack_require__(28),__webpack_require__(15),__webpack_require__(0),__webpack_require__(14),__webpack_require__(12),__webpack_require__(2),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _core=__webpack_require__(25),_BaseLayer=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(99)),_triangulation=__webpack_require__(174);var ImageLayer=function(_BaseLayer$default){function ImageLayer(){var _getPrototypeOf2,_this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ImageLayer);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ImageLayer)).call.apply(_getPrototypeOf2,[this].concat(args)))).name="PointLayer",_this.texture=void 0,_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(ImageLayer,_BaseLayer$default),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ImageLayer,[{key:"getConfigSchema",value:function getConfigSchema(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"renderModels",value:function renderModels(){var _this2=this,opacity=this.getStyleOptions().opacity;return this.texture&&this.models.forEach((function(model){return model.draw({uniforms:{u_Opacity:opacity||1,u_texture:_this2.texture}})})),this}},{key:"buildModels",value:function buildModels(){var _this3=this;this.registerBuiltinAttributes(this);var source=this.getSource(),createTexture2D=this.rendererService.createTexture2D;source.data.images.then((function(imageData){_this3.texture=createTexture2D({data:imageData[0],width:imageData[0].width,height:imageData[0].height}),_this3.renderModels()})),this.models=[this.buildLayerModel({moduleName:"RasterImage",vertexShader:'precision highp float;\nuniform mat4 u_ModelMatrix;\nattribute vec3 a_Position;\nattribute vec2 a_Uv;\nvarying vec2 v_texCoord;\n\n#pragma include "projection"\nvoid main() {\n   v_texCoord = a_Uv;\n   vec4 project_pos = project_position(vec4(a_Position, 1.0));\n   gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));\n}\n',fragmentShader:"precision mediump float;\nuniform float u_opacity: 1.0;\nuniform sampler2D u_texture;\nvarying vec2 v_texCoord;\nvoid main() {\n  vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));\n  gl_FragColor = color;\n}\n",triangulation:_triangulation.RasterImageTriangulation,primitive:_core.gl.TRIANGLES,depth:{enable:!1},blend:{enable:!0,func:{srcRGB:_core.gl.SRC_ALPHA,srcAlpha:1,dstRGB:_core.gl.ONE_MINUS_SRC_ALPHA,dstAlpha:1}}})]}},{key:"registerBuiltinAttributes",value:function registerBuiltinAttributes(layer){layer.styleAttributeService.registerStyleAttribute({name:"uv",type:_core.AttributeType.Attribute,descriptor:{name:"a_Uv",buffer:{usage:_core.gl.DYNAMIC_DRAW,data:[],type:_core.gl.FLOAT},size:2,update:function update(feature,featureIdx,vertex){return[vertex[3],vertex[4]]}}})}}]),ImageLayer}(_BaseLayer.default);exports.default=ImageLayer},950:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(9),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(28),__webpack_require__(0),__webpack_require__(11),__webpack_require__(10),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_dec3,_class,_class2,_descriptor,_descriptor2,_core=__webpack_require__(25),_inversify=__webpack_require__(18);function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var ConfigSchemaValidationPlugin=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_core.TYPES.IGlobalConfigService),_dec3=(0,_inversify.inject)(_core.TYPES.ILogService),_dec((_descriptor=_applyDecoratedDescriptor((_class2=function(){function ConfigSchemaValidationPlugin(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,ConfigSchemaValidationPlugin),_initializerDefineProperty(this,"configService",_descriptor,this),_initializerDefineProperty(this,"logger",_descriptor2,this)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ConfigSchemaValidationPlugin,[{key:"apply",value:function apply(layer){var _this=this;layer.hooks.init.tap("ConfigSchemaValidationPlugin",(function(){_this.configService.registerLayerConfigSchemaValidator(layer.name,layer.getConfigSchemaForValidation());var _this$configService$v=_this.configService.validateLayerConfig(layer.name,layer.getStyleOptions()),valid=_this$configService$v.valid,errorText=_this$configService$v.errorText;if(!valid)return _this.logger.error(errorText||""),!1})),layer.hooks.beforeRender.tap("ConfigSchemaValidationPlugin",(function(){}))}}]),ConfigSchemaValidationPlugin}()).prototype,"configService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor2=_applyDecoratedDescriptor(_class2.prototype,"logger",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=ConfigSchemaValidationPlugin},951:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(26),__webpack_require__(9),__webpack_require__(23),__webpack_require__(27),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(28),__webpack_require__(0),__webpack_require__(11),__webpack_require__(10),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_dec3,_class,_class2,_descriptor,_descriptor2,_core=__webpack_require__(25),_inversify=__webpack_require__(18),_color=__webpack_require__(416);function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var DataMappingPlugin=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_core.TYPES.IGlobalConfigService),_dec3=(0,_inversify.inject)(_core.TYPES.ILogService),_dec((_descriptor=_applyDecoratedDescriptor((_class2=function(){function DataMappingPlugin(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,DataMappingPlugin),_initializerDefineProperty(this,"configService",_descriptor,this),_initializerDefineProperty(this,"logger",_descriptor2,this)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(DataMappingPlugin,[{key:"apply",value:function apply(layer){var _this=this;layer.hooks.init.tap("DataMappingPlugin",(function(){var attributes=layer.styleAttributeService.getLayerStyleAttributes()||[],dataArray=layer.getSource().data.dataArray;dataArray&&layer.setEncodedData(_this.mapping(attributes,dataArray))})),layer.hooks.beforeRender.tap("DataMappingPlugin",(function(){var attributes=layer.styleAttributeService.getLayerStyleAttributes()||[],dataArray=layer.getSource().data.dataArray,attributesToRemapping=attributes.filter((function(attribute){return attribute.needRemapping}));attributesToRemapping.length&&(layer.setEncodedData(_this.mapping(attributesToRemapping,dataArray)),_this.logger.info("remapping finished"))}))}},{key:"mapping",value:function mapping(attributes,data){var _this2=this;return data.map((function(record){var encodeRecord={id:record._id,coordinates:record.coordinates};return attributes.forEach((function(attribute){var values=_this2.applyAttributeMapping(attribute,record);attribute.needRemapping=!1,"color"===attribute.name&&(values=values.map((function(c){return(0,_color.rgb2arr)(c)}))),encodeRecord[attribute.name]=Array.isArray(values)&&1===values.length?values[0]:values})),encodeRecord}))}},{key:"applyAttributeMapping",value:function applyAttributeMapping(attribute,record){var _attribute$scale;if(!attribute.scale)return[];var scalers=(null==attribute||null===(_attribute$scale=attribute.scale)||void 0===_attribute$scale?void 0:_attribute$scale.scalers)||[],params=[];return scalers.forEach((function(_ref){var field=_ref.field;record[field]&&params.push(record[field])})),attribute.mapping?attribute.mapping(params):[]}}]),DataMappingPlugin}()).prototype,"configService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor2=_applyDecoratedDescriptor(_class2.prototype,"logger",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=DataMappingPlugin},952:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _class,_source=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(418));var DataSourcePlugin=(0,__webpack_require__(18).injectable)()(_class=function(){function DataSourcePlugin(){!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DataSourcePlugin)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(DataSourcePlugin,[{key:"apply",value:function apply(layer){layer.hooks.init.tap("DataSourcePlugin",(function(){var _layer$sourceOption=layer.sourceOption,data=_layer$sourceOption.data,options=_layer$sourceOption.options;layer.setSource(new _source.default(data,options))}))}}]),DataSourcePlugin}())||_class;exports.default=DataSourcePlugin},953:function(module,exports,__webpack_require__){"use strict";__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerTransform=exports.getTransform=exports.registerParser=exports.getParser=void 0;var TRANSFORMS={},PARSERS={};exports.getParser=function(type){return PARSERS[type]};exports.registerParser=function(type,parserFunction){PARSERS[type]=parserFunction};exports.getTransform=function(type){return TRANSFORMS[type]};exports.registerTransform=function(type,transFunction){TRANSFORMS[type]=transFunction}},954:function(module,exports,__webpack_require__){"use strict";__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function csv(data,cfg){var csvData=(0,_d3Dsv.csvParse)(data);return(0,_json.default)(csvData,cfg)};var _d3Dsv=__webpack_require__(1042),_json=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(419))},959:function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__webpack_require__(3),__webpack_require__(26),__webpack_require__(9),__webpack_require__(4),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(11),__webpack_require__(2),__webpack_require__(5),__webpack_require__(80),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function geoJSON(data,cfg){(0,_geojsonRewind.default)(data,!0);var resultData=[],featureKeys={};data.features=data.features.filter((function(item){var geometry=item.geometry;return null!=item&&geometry&&geometry.type&&geometry.coordinates&&0<geometry.coordinates.length}));var i=0;return turfMeta.flattenEach(data,(function(currentFeature,featureIndex){var coord=(0,_invariant.getCoords)(currentFeature),id=featureIndex;if(cfg&&cfg.idField&&currentFeature.properties&&currentFeature.properties[cfg.idField]){var value=currentFeature.properties[cfg.idField];id=(0,_utils.djb2hash)(value)%1000019,featureKeys[id]={index:i++,idField:value}}var dataItem=function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}({},currentFeature.properties,{coordinates:coord,_id:id});resultData.push(dataItem)})),{dataArray:resultData,featureKeys:featureKeys}};var _utils=__webpack_require__(60),_geojsonRewind=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(420)),_invariant=__webpack_require__(960),turfMeta=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}(__webpack_require__(961));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}},962:function(module,exports,__webpack_require__){"use strict";__webpack_require__(9),__webpack_require__(0),__webpack_require__(2),__webpack_require__(69),__webpack_require__(10),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=image;var _utils=__webpack_require__(60);function image(data,cfg){var extent=cfg.extent;return{images:new Promise((function(resolve){!function loadData(data,done){var url=data,imageDatas=[];if("string"==typeof url)(0,_utils.getImage)({url:url},(function(err,img){imageDatas.push(img),done(imageDatas)}));else{var imageCount=url.length,imageindex=0;url.forEach((function(item){(0,_utils.getImage)({url:item},(function(err,img){imageindex++,imageDatas.push(img),imageindex===imageCount&&done(imageDatas)}))}))}return image}(data,(function(res){resolve(res)}))})),_id:1,dataArray:[{_id:0,coordinates:[[extent[0],extent[1]],[extent[2],extent[3]]]}]}}},963:function(module,exports,__webpack_require__){"use strict";function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}(self):call}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o})(o,p)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(9),__webpack_require__(4),__webpack_require__(37),__webpack_require__(15),__webpack_require__(0),__webpack_require__(14),__webpack_require__(12),__webpack_require__(2),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _utils=__webpack_require__(60),_eventemitter=__webpack_require__(126),_lodash=__webpack_require__(72),_tapable=__webpack_require__(964),_=__webpack_require__(418),Source=function(_eventemitter$EventEm){function Source(data,cfg){var _this;return function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Source),(_this=_possibleConstructorReturn(this,_getPrototypeOf(Source).call(this))).data=void 0,_this.extent=void 0,_this.hooks={init:new _tapable.SyncHook(["source"]),layout:new _tapable.SyncHook(["source"]),update:new _tapable.SyncHook(["source"])},_this.parser={type:"geojson"},_this.transforms=[],_this.originData=void 0,_this.data=(0,_lodash.cloneDeep)(data),_this.originData=data,cfg&&(cfg.parser&&(_this.parser=cfg.parser),cfg.transforms&&(_this.transforms=cfg.transforms)),_this.hooks.init.tap("parser",(function(){_this.excuteParser()})),_this.hooks.init.tap("transform",(function(){_this.executeTrans()})),_this.init(),_this}return function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(Source,_eventemitter$EventEm),function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Source,[{key:"excuteParser",value:function excuteParser(){var parser=this.parser,type=parser.type||"geojson",sourceParser=(0,_.getParser)(type);this.data=sourceParser(this.originData,parser),this.extent=(0,_utils.extent)(this.data.dataArray)}},{key:"executeTrans",value:function executeTrans(){var _this2=this;this.transforms.forEach((function(tran){var type=tran.type,data=(0,_.getTransform)(type)(_this2.data,tran);Object.assign(_this2.data,data)}))}},{key:"init",value:function init(){this.hooks.init.call(this)}}]),Source}(_eventemitter.EventEmitter);exports.default=Source},977:function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__webpack_require__(3),__webpack_require__(26),__webpack_require__(9),__webpack_require__(27),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(11),__webpack_require__(10),Object.defineProperty(exports,"__esModule",{value:!0}),exports.cluster=function cluster(data,option){var _option$radius=option.radius,radius=void 0===_option$radius?80:_option$radius,_option$maxZoom=option.maxZoom,maxZoom=void 0===_option$maxZoom?18:_option$maxZoom,_option$minZoom=option.minZoom,minZoom=void 0===_option$minZoom?0:_option$minZoom,field=option.field,_option$zoom=option.zoom,zoom=void 0===_option$zoom?2:_option$zoom;if(data.pointIndex){var clusterData=data.pointIndex.getClusters(data.extent,zoom);return data.dataArray=formatData(clusterData),data}var pointIndex=new _supercluster.default({radius:radius,minZoom:minZoom,maxZoom:maxZoom,map:function map(props){return{sum:props[field]}},reduce:function reduce(accumulated,props){accumulated.sum+=props.sum}}),geojson={type:"FeatureCollection",features:[]};geojson.features=data.dataArray.map((function(item){return{type:"Feature",properties:_defineProperty({},field,item[field]),geometry:{type:"Point",coordinates:item.coordinates}}})),pointIndex.load(geojson.features);var resultData=pointIndex.getClusters(data.extent,zoom).map((function(point,index){return _objectSpread({coordinates:point.geometry.coordinates,_id:index+1},point.properties)}));return data.dataArray=resultData,data.pointIndex=pointIndex,data},exports.formatData=formatData;var _supercluster=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(1043));function formatData(clusterPoint){return clusterPoint.map((function(point,index){return _objectSpread({coordinates:point.geometry.coordinates,_id:index+1},point.properties)}))}},978:function(module,exports,__webpack_require__){"use strict";__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(16),__webpack_require__(4),__webpack_require__(27),__webpack_require__(22),__webpack_require__(203),__webpack_require__(979),__webpack_require__(37),__webpack_require__(0),__webpack_require__(11),__webpack_require__(2),__webpack_require__(402),__webpack_require__(70),__webpack_require__(5),__webpack_require__(122),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.aggregatorToGrid=function aggregatorToGrid(data,option){var dataArray=data.dataArray,_option$size=option.size,_pointsGridHash2=function _pointsGridHash(dataArray,size){var pLat,latMin=1/0,latMax=-1/0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,point,_iterator=dataArray[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)point=_step.value,pLat=point.coordinates[1],Number.isFinite(pLat)&&(latMin=pLat<latMin?pLat:latMin,latMax=pLat>latMax?pLat:latMax)}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{_iteratorNormalCompletion||null==_iterator.return||_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var gridOffset=function _calculateGridLatLonOffset(cellSize,latitude){var yOffset=function _calculateLatOffset(dy){return dy/R_EARTH*(180/Math.PI)}(cellSize),xOffset=function _calculateLonOffset(lat,dx){return dx/R_EARTH*(180/Math.PI)/Math.cos(lat*Math.PI/180)}(latitude,cellSize);return{yOffset:yOffset,xOffset:xOffset}}(size,(latMin+latMax)/2);if(0>=gridOffset.xOffset||0>=gridOffset.yOffset)return{gridHash:{},gridOffset:gridOffset};var gridHash={},_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _step2,_iterator2=dataArray[Symbol.iterator]();!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _point=_step2.value,lat=_point.coordinates[1],lng=_point.coordinates[0];if(Number.isFinite(lat)&&Number.isFinite(lng)){var latIdx=Math.floor((lat+90)/gridOffset.yOffset),lonIdx=Math.floor((lng+180)/gridOffset.xOffset),key="".concat(latIdx,"-").concat(lonIdx);gridHash[key]=gridHash[key]||{count:0,points:[]},gridHash[key].count+=1,gridHash[key].points.push(_point)}}}catch(err){_didIteratorError2=!0,_iteratorError2=err}finally{try{_iteratorNormalCompletion2||null==_iterator2.return||_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}return{gridHash:gridHash,gridOffset:gridOffset}}(dataArray,void 0===_option$size?10:_option$size),gridHash=_pointsGridHash2.gridHash,gridOffset=_pointsGridHash2.gridOffset,layerData=function _getGridLayerDataFromGridHash(gridHash,gridOffset,option){return Object.keys(gridHash).reduce((function(accu,key,i){var idxs=key.split("-"),latIdx=parseInt(idxs[0],10),lonIdx=parseInt(idxs[1],10),item={};if(option.field&&option.method){var columns=function getColumn(data,columnName){return data.map((function(item){return item[columnName]}))}(gridHash[key].points,option.field);item[option.method]=_statistics.statMap[option.method](columns)}return Object.assign(item,{_id:i+1,coordinates:[gridOffset.xOffset*lonIdx-180,gridOffset.yOffset*latIdx-90],count:gridHash[key].count}),accu.push(item),accu}),[])}(gridHash,gridOffset,option);return{yOffset:gridOffset.yOffset/1.8,xOffset:gridOffset.xOffset/1.8,radius:gridOffset.xOffset,dataArray:layerData}};var _statistics=__webpack_require__(421),R_EARTH=6378e3},981:function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if(Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(26),__webpack_require__(9),__webpack_require__(23),__webpack_require__(4),__webpack_require__(27),__webpack_require__(40),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(11),__webpack_require__(2),__webpack_require__(38),__webpack_require__(5),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.pointToHexbin=function pointToHexbin(data,option){var dataArray=data.dataArray,_option$size=option.size,pixlSize=(void 0===_option$size?10:_option$size)/(2*Math.PI*R_EARTH)*268435456/2,screenPoints=dataArray.map((function(point){var _ref2=_slicedToArray((0,_utils.aProjectFlat)(point.coordinates),2);return function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}({},point,{coordinates:[_ref2[0],_ref2[1]]})}));return{dataArray:(0,_d3Hexbin.hexbin)().radius(pixlSize).x((function(d){return d.coordinates[0]})).y((function(d){return d.coordinates[1]}))(screenPoints).map((function(hex,index){var _ref3;if(option.field&&option.method){var columns=function getColumn(data,columnName){return data.map((function(item){return item[columnName]}))}(hex,option.field);hex[option.method]=_statistics.statMap[option.method](columns)}return _defineProperty(_ref3={},option.method,hex[option.method]),_defineProperty(_ref3,"count",hex.length),_defineProperty(_ref3,"coordinates",(0,_utils.unProjectFlat)([hex.x,hex.y])),_defineProperty(_ref3,"_id",index+1),_ref3})),radius:pixlSize}};var _utils=__webpack_require__(60),_d3Hexbin=__webpack_require__(1045),_statistics=__webpack_require__(421),R_EARTH=6378e3},982:function(module,exports,__webpack_require__){},983:function(module,exports,__webpack_require__){"use strict";var _scaleMap;function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}__webpack_require__(26),__webpack_require__(109),__webpack_require__(9),__webpack_require__(23),__webpack_require__(4),__webpack_require__(171),__webpack_require__(27),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(984),__webpack_require__(28),__webpack_require__(37),__webpack_require__(0),__webpack_require__(24),__webpack_require__(11),__webpack_require__(2),__webpack_require__(70),__webpack_require__(5),__webpack_require__(122),__webpack_require__(80),__webpack_require__(10),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_dec3,_class,_class2,_descriptor,_descriptor2,_core=__webpack_require__(25),_d3Array=__webpack_require__(86),d3=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}(__webpack_require__(1040)),_inversify=__webpack_require__(18),_lodash=__webpack_require__(72);function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var dateRegex=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,scaleMap=(_defineProperty(_scaleMap={},_core.ScaleTypes.LINEAR,d3.scaleLinear),_defineProperty(_scaleMap,_core.ScaleTypes.POWER,d3.scalePow),_defineProperty(_scaleMap,_core.ScaleTypes.LOG,d3.scaleLog),_defineProperty(_scaleMap,_core.ScaleTypes.IDENTITY,d3.scaleIdentity),_defineProperty(_scaleMap,_core.ScaleTypes.TIME,d3.scaleTime),_defineProperty(_scaleMap,_core.ScaleTypes.QUANTILE,d3.scaleQuantile),_defineProperty(_scaleMap,_core.ScaleTypes.QUANTIZE,d3.scaleQuantize),_defineProperty(_scaleMap,_core.ScaleTypes.THRESHOLD,d3.scaleThreshold),_defineProperty(_scaleMap,_core.ScaleTypes.CAT,d3.scaleOrdinal),_scaleMap),FeatureScalePlugin=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_core.TYPES.IGlobalConfigService),_dec3=(0,_inversify.inject)(_core.TYPES.ILogService),_dec((_descriptor=_applyDecoratedDescriptor((_class2=function(){function FeatureScalePlugin(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,FeatureScalePlugin),_initializerDefineProperty(this,"configService",_descriptor,this),_initializerDefineProperty(this,"logger",_descriptor2,this),this.scaleCache={}}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(FeatureScalePlugin,[{key:"apply",value:function apply(layer){var _this=this;layer.hooks.init.tap("FeatureScalePlugin",(function(){var attributes=layer.styleAttributeService.getLayerStyleAttributes(),dataArray=layer.getSource().data.dataArray;_this.caculateScalesForAttributes(attributes||[],dataArray)})),layer.hooks.beforeRender.tap("FeatureScalePlugin",(function(){var attributes=layer.styleAttributeService.getLayerStyleAttributes();if(attributes){var dataArray=layer.getSource().data.dataArray,attributesToRescale=attributes.filter((function(attribute){return attribute.needRescale}));attributesToRescale.length&&(_this.caculateScalesForAttributes(attributesToRescale,dataArray),_this.logger.info("rescale finished"))}}))}},{key:"caculateScalesForAttributes",value:function caculateScalesForAttributes(attributes,dataArray){var _this2=this;this.scaleCache={},attributes.forEach((function(attribute){if(attribute.scale){var attributeScale=attribute.scale;attributeScale.names=_this2.parseFields(attribute.scale.field||[]);var scales=attributeScale.names.map((function(field){return _this2.getOrCreateScale(field,attribute,dataArray)}));scales.some((function(scale){return scale.type===_core.StyleScaleType.VARIABLE}))?(attributeScale.type=_core.StyleScaleType.VARIABLE,scales.forEach((function(scale){!attributeScale.callback&&0<attributeScale.values.length&&scale.scale.range(attributeScale.values)}))):attributeScale.values=scales.map((function(scale,index){return scale.scale(attributeScale.names[index])})),attributeScale.scalers=scales.map((function(scale){return{field:scale.field,func:scale.scale}})),attribute.needRescale=!1}}))}},{key:"getOrCreateScale",value:function getOrCreateScale(field,attribute,dataArray){var _attribute$scale,_attribute$scale2,scalekey=[field,attribute.name].join("_");if(this.scaleCache[scalekey])return this.scaleCache[scalekey];var _attribute$scale3,styleScale=this.createScale(field,dataArray);(this.scaleCache[scalekey]=styleScale,styleScale.type===_core.StyleScaleType.VARIABLE&&(null===(_attribute$scale=attribute.scale)||void 0===_attribute$scale?void 0:_attribute$scale.values)&&0<(null===(_attribute$scale2=attribute.scale)||void 0===_attribute$scale2?void 0:_attribute$scale2.values.length))&&styleScale.scale.range(null===(_attribute$scale3=attribute.scale)||void 0===_attribute$scale3?void 0:_attribute$scale3.values);return this.scaleCache[scalekey]}},{key:"parseFields",value:function parseFields(field){return Array.isArray(field)?field:(0,_lodash.isString)(field)?field.split("*"):[field]}},{key:"createScale",value:function createScale(field,data){var _this$configService$g,_this$configService$g2,_find,scaleOption=null===(_this$configService$g=this.configService.getConfig())||void 0===_this$configService$g||null===(_this$configService$g2=_this$configService$g.scales)||void 0===_this$configService$g2?void 0:_this$configService$g2[field],styleScale={field:field,scale:void 0,type:_core.StyleScaleType.VARIABLE,option:scaleOption};if(!data||!data.length)return scaleOption&&scaleOption.type?styleScale.scale=this.createDefaultScale(scaleOption):(styleScale.scale=d3.scaleOrdinal([field]),styleScale.type=_core.StyleScaleType.CONSTANT),styleScale;var firstValue=null===(_find=data.find((function(d){return!(0,_lodash.isNil)(d[field])})))||void 0===_find?void 0:_find[field];if((0,_lodash.isNumber)(field)||(0,_lodash.isNil)(firstValue)&&!scaleOption)styleScale.scale=d3.scaleOrdinal([field]),styleScale.type=_core.StyleScaleType.CONSTANT;else{var type=scaleOption&&scaleOption.type||this.getDefaultType(firstValue),cfg=this.createDefaultScaleConfig(type,field,data);Object.assign(cfg,scaleOption),styleScale.scale=this.createDefaultScale(cfg),styleScale.option=cfg}return styleScale}},{key:"getDefaultType",value:function getDefaultType(firstValue){var type=_core.ScaleTypes.QUANTIZE;return"string"==typeof firstValue&&(type=dateRegex.test(firstValue)?_core.ScaleTypes.TIME:_core.ScaleTypes.CAT),type}},{key:"createDefaultScaleConfig",value:function createDefaultScaleConfig(type,field,data){var cfg={type:type},values=(null==data?void 0:data.map((function(item){return item[field]})))||[];return type!==_core.ScaleTypes.CAT&&type!==_core.ScaleTypes.QUANTILE?cfg.domain=(0,_d3Array.extent)(values):type===_core.ScaleTypes.CAT&&(cfg.domain=(0,_lodash.uniq)(values)),cfg}},{key:"createDefaultScale",value:function createDefaultScale(_ref){var type=_ref.type,domain=_ref.domain,scale=scaleMap[type]();return domain&&scale.domain(domain),scale}}]),FeatureScalePlugin}()).prototype,"configService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor2=_applyDecoratedDescriptor(_class2.prototype,"logger",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=FeatureScalePlugin},985:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(9),__webpack_require__(27),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(0),__webpack_require__(11),__webpack_require__(10),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_class,_class2,_descriptor,_core=__webpack_require__(25),_inversify=__webpack_require__(18),_color=__webpack_require__(416);var PickingStage_NONE=0,PickingStage_ENCODE=1,PickingStage_HIGHLIGHT=2,PixelPickingPlugin=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_core.TYPES.IRendererService),_dec((_descriptor=function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}((_class2=function(){function PixelPickingPlugin(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,PixelPickingPlugin),function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(this,"rendererService",_descriptor,this)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(PixelPickingPlugin,[{key:"apply",value:function apply(layer){layer.hooks.init.tap("PixelPickingPlugin",(function(){var enablePicking=layer.getStyleOptions().enablePicking;layer.styleAttributeService.registerStyleAttribute({name:"pickingColor",type:_core.AttributeType.Attribute,descriptor:{name:"a_PickingColor",buffer:{data:[],type:_core.gl.FLOAT},size:3,update:function update(feature,featureIdx){return enablePicking?function encodePickingColor(featureIdx){return[255&featureIdx+1,255&featureIdx+1>>8,255&featureIdx+1>>8>>8]}(featureIdx):[0,0,0]}}})})),layer.hooks.beforePickingEncode.tap("PixelPickingPlugin",(function(){layer.getStyleOptions().enablePicking&&layer.models.forEach((function(model){return model.addUniforms({u_PickingStage:PickingStage_ENCODE})}))})),layer.hooks.afterPickingEncode.tap("PixelPickingPlugin",(function(){layer.getStyleOptions().enablePicking&&layer.models.forEach((function(model){return model.addUniforms({u_PickingStage:PickingStage_NONE,u_PickingColor:[0,0,0],u_HighlightColor:[0,0,0,0]})}))})),layer.hooks.beforeHighlight.tap("PixelPickingPlugin",(function(pickedColor){var highlightColor=layer.getStyleOptions().highlightColor,highlightColorInArray="string"==typeof highlightColor?(0,_color.rgb2arr)(highlightColor):highlightColor||[1,0,0,1];layer.models.forEach((function(model){return model.addUniforms({u_PickingStage:PickingStage_HIGHLIGHT,u_PickingColor:pickedColor,u_HighlightColor:highlightColorInArray.map((function(c){return 255*c}))})}))}))}}]),PixelPickingPlugin}()).prototype,"rendererService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=PixelPickingPlugin},986:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(9),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(0),__webpack_require__(11),__webpack_require__(10),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_class,_class2,_descriptor,_core=__webpack_require__(25),_inversify=__webpack_require__(18);var RegisterStyleAttributePlugin=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_core.TYPES.ILogService),_dec((_descriptor=function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}((_class2=function(){function RegisterStyleAttributePlugin(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,RegisterStyleAttributePlugin),function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(this,"logger",_descriptor,this)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(RegisterStyleAttributePlugin,[{key:"apply",value:function apply(layer){var _this=this;layer.hooks.init.tap("RegisterStyleAttributePlugin",(function(){_this.registerBuiltinAttributes(layer)}))}},{key:"registerBuiltinAttributes",value:function registerBuiltinAttributes(layer){layer.styleAttributeService.registerStyleAttribute({name:"position",type:_core.AttributeType.Attribute,descriptor:{name:"a_Position",buffer:{data:[],type:_core.gl.FLOAT},size:3,update:function update(feature,featureIdx,vertex){return 2===vertex.length?[vertex[0],vertex[1],0]:[vertex[0],vertex[1],vertex[2]]}}}),layer.styleAttributeService.registerStyleAttribute({name:"color",type:_core.AttributeType.Attribute,descriptor:{name:"a_Color",buffer:{usage:_core.gl.DYNAMIC_DRAW,data:[],type:_core.gl.FLOAT},size:4,update:function update(feature){var color=feature.color;return color&&color.length?color:[0,0,0,0]}}})}}]),RegisterStyleAttributePlugin}()).prototype,"logger",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=RegisterStyleAttributePlugin},987:function(module,exports,__webpack_require__){"use strict";function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(9),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(0),__webpack_require__(11),__webpack_require__(10),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_dec3,_dec4,_class,_class2,_descriptor,_descriptor2,_descriptor3,_core=__webpack_require__(25),_inversify=__webpack_require__(18);function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var ShaderUniformPlugin=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_core.TYPES.ICameraService),_dec3=(0,_inversify.inject)(_core.TYPES.ICoordinateSystemService),_dec4=(0,_inversify.inject)(_core.TYPES.IRendererService),_dec((_descriptor=_applyDecoratedDescriptor((_class2=function(){function ShaderUniformPlugin(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,ShaderUniformPlugin),_initializerDefineProperty(this,"cameraService",_descriptor,this),_initializerDefineProperty(this,"coordinateSystemService",_descriptor2,this),_initializerDefineProperty(this,"rendererService",_descriptor3,this)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ShaderUniformPlugin,[{key:"apply",value:function apply(layer){var _this=this;layer.hooks.beforeRender.tap("ShaderUniformPlugin",(function(){_this.coordinateSystemService.refresh();var _this$rendererService=_this.rendererService.getViewportSize(),width=_this$rendererService.width,height=_this$rendererService.height;layer.models.forEach((function(model){var _model$addUniforms;return model.addUniforms((_defineProperty(_model$addUniforms={},_core.CameraUniform.ProjectionMatrix,_this.cameraService.getProjectionMatrix()),_defineProperty(_model$addUniforms,_core.CameraUniform.ViewMatrix,_this.cameraService.getViewMatrix()),_defineProperty(_model$addUniforms,_core.CameraUniform.ViewProjectionMatrix,_this.cameraService.getViewProjectionMatrix()),_defineProperty(_model$addUniforms,_core.CameraUniform.Zoom,_this.cameraService.getZoom()),_defineProperty(_model$addUniforms,_core.CameraUniform.ZoomScale,_this.cameraService.getZoomScale()),_defineProperty(_model$addUniforms,_core.CameraUniform.FocalDistance,_this.cameraService.getFocalDistance()),_defineProperty(_model$addUniforms,_core.CoordinateUniform.CoordinateSystem,_this.coordinateSystemService.getCoordinateSystem()),_defineProperty(_model$addUniforms,_core.CoordinateUniform.ViewportCenter,_this.coordinateSystemService.getViewportCenter()),_defineProperty(_model$addUniforms,_core.CoordinateUniform.ViewportCenterProjection,_this.coordinateSystemService.getViewportCenterProjection()),_defineProperty(_model$addUniforms,_core.CoordinateUniform.PixelsPerDegree,_this.coordinateSystemService.getPixelsPerDegree()),_defineProperty(_model$addUniforms,_core.CoordinateUniform.PixelsPerDegree2,_this.coordinateSystemService.getPixelsPerDegree2()),_defineProperty(_model$addUniforms,_core.CoordinateUniform.PixelsPerMeter,_this.coordinateSystemService.getPixelsPerMeter()),_defineProperty(_model$addUniforms,"u_ViewportSize",[width,height]),_defineProperty(_model$addUniforms,"u_DevicePixelRatio",window.devicePixelRatio),_defineProperty(_model$addUniforms,"u_ModelMatrix",[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),_model$addUniforms))}))}))}}]),ShaderUniformPlugin}()).prototype,"cameraService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor2=_applyDecoratedDescriptor(_class2.prototype,"coordinateSystemService",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor3=_applyDecoratedDescriptor(_class2.prototype,"rendererService",[_dec4],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=ShaderUniformPlugin},988:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(26),__webpack_require__(9),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(28),__webpack_require__(0),__webpack_require__(11),__webpack_require__(10),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_class,_class2,_descriptor,_core=__webpack_require__(25),_inversify=__webpack_require__(18);var UpdateStyleAttributePlugin=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_core.TYPES.ILogService),_dec((_descriptor=function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}((_class2=function(){function UpdateStyleAttributePlugin(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,UpdateStyleAttributePlugin),function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(this,"logger",_descriptor,this)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(UpdateStyleAttributePlugin,[{key:"apply",value:function apply(layer){var _this=this;layer.hooks.beforeRender.tap("UpdateStyleAttributePlugin",(function(){(layer.styleAttributeService.getLayerStyleAttributes()||[]).filter((function(attribute){return attribute.needRegenerateVertices})).forEach((function(attribute){layer.styleAttributeService.updateAttributeByFeatureRange(attribute.name,layer.getEncodedData(),attribute.featureRange.startIndex,attribute.featureRange.endIndex),attribute.needRegenerateVertices=!1,_this.logger.info("regenerate vertex attributes: ".concat(attribute.name," finished"))}))}))}}]),UpdateStyleAttributePlugin}()).prototype,"logger",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=UpdateStyleAttributePlugin},989:function(module,exports,__webpack_require__){"use strict";__webpack_require__(4),__webpack_require__(0),__webpack_require__(24),__webpack_require__(2),__webpack_require__(5),__webpack_require__(80),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"AMapService",{enumerable:!0,get:function get(){return _amap.default}}),Object.defineProperty(exports,"MapboxService",{enumerable:!0,get:function get(){return _mapbox.default}}),Object.defineProperty(exports,"MaptalksService",{enumerable:!0,get:function get(){return _maptalks.default}}),Object.defineProperty(exports,"IMaptalksMapConfig",{enumerable:!0,get:function get(){return _maptalks.IMaptalksMapConfig}});var _amap=_interopRequireDefault(__webpack_require__(990)),_mapbox=_interopRequireDefault(__webpack_require__(992)),_maptalks=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}(__webpack_require__(995));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}},99:function(module,exports,__webpack_require__){"use strict";function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(3),__webpack_require__(26),__webpack_require__(9),__webpack_require__(59),__webpack_require__(27),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(28),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(11),__webpack_require__(10),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_dec3,_dec4,_dec5,_dec6,_dec7,_dec8,_dec9,_class,_descriptor,_descriptor2,_descriptor3,_descriptor4,_descriptor5,_descriptor6,_descriptor7,_descriptor8,_descriptor9,_core=__webpack_require__(25),_lodash=__webpack_require__(72),_mergeJsonSchemas=_interopRequireDefault(__webpack_require__(917)),_tapable=__webpack_require__(924),_MultiPassRendererPlugin=__webpack_require__(413),_schema=_interopRequireDefault(__webpack_require__(937));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}var layerIdCounter=0,defaultLayerInitializationOptions={enableMultiPassRenderer:!0,enablePicking:!1,enableHighlight:!1,highlightColor:"red",enableTAA:!1,jitterScale:1},BaseLayer=(_dec=(0,_core.lazyMultiInject)(_core.TYPES.ILayerPlugin),_dec2=(0,_core.lazyInject)(_core.TYPES.IStyleAttributeService),_dec3=(0,_core.lazyInject)(_core.TYPES.IGlobalConfigService),_dec4=(0,_core.lazyInject)(_core.TYPES.IIconService),_dec5=(0,_core.lazyInject)(_core.TYPES.IFontService),_dec6=(0,_core.lazyInject)(_core.TYPES.IRendererService),_dec7=(0,_core.lazyInject)(_core.TYPES.IShaderModuleService),_dec8=(0,_core.lazyInject)(_core.TYPES.IMapService),_dec9=(0,_core.lazyInject)(_core.TYPES.IInteractionService),_descriptor=_applyDecoratedDescriptor((_class=function(){function BaseLayer(styleOptions){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,BaseLayer),this.id="".concat(layerIdCounter++),this.name=void 0,this.hooks={init:new _tapable.SyncBailHook,beforeRender:new _tapable.SyncBailHook,afterRender:new _tapable.SyncHook,beforePickingEncode:new _tapable.SyncHook,afterPickingEncode:new _tapable.SyncHook,beforeHighlight:new _tapable.SyncHook(["pickedColor"]),afterHighlight:new _tapable.SyncHook,beforeDestroy:new _tapable.SyncHook,afterDestroy:new _tapable.SyncHook},this.models=[],this.multiPassRenderer=void 0,_initializerDefineProperty(this,"plugins",_descriptor,this),this.sourceOption=void 0,_initializerDefineProperty(this,"styleAttributeService",_descriptor2,this),_initializerDefineProperty(this,"configService",_descriptor3,this),_initializerDefineProperty(this,"iconService",_descriptor4,this),_initializerDefineProperty(this,"fontService",_descriptor5,this),this.layerSource=void 0,_initializerDefineProperty(this,"rendererService",_descriptor6,this),this.encodedData=void 0,this.configSchema=void 0,this.styleOptions=void 0,_initializerDefineProperty(this,"shaderModuleService",_descriptor7,this),_initializerDefineProperty(this,"map",_descriptor8,this),_initializerDefineProperty(this,"interactionService",_descriptor9,this),this.styleOptions=_objectSpread({},defaultLayerInitializationOptions,{},styleOptions)}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(BaseLayer,[{key:"addPlugin",value:function addPlugin(plugin){return this.plugins.push(plugin),this}},{key:"init",value:function init(){return this.hooks.init.call(),this.buildModels(),this}},{key:"color",value:function color(field,values,updateOptions){return this.styleAttributeService.updateStyleAttribute("color",{scale:_objectSpread({field:field},this.splitValuesAndCallbackInAttribute(values,this.configService.getConfig().colors))},updateOptions),this}},{key:"size",value:function size(field,values,updateOptions){return this.styleAttributeService.updateStyleAttribute("size",{scale:_objectSpread({field:field},this.splitValuesAndCallbackInAttribute(values,this.configService.getConfig().size))},updateOptions),this}},{key:"shape",value:function shape(field,values,updateOptions){return this.styleAttributeService.updateStyleAttribute("shape",{scale:_objectSpread({field:field},this.splitValuesAndCallbackInAttribute(values,this.configService.getConfig().shape))},updateOptions),this}},{key:"source",value:function source(data,options){return this.sourceOption={data:data,options:options},this}},{key:"style",value:function style(options){var _this=this,passes=options.passes,rest=_objectWithoutProperties(options,["passes"]);return passes&&(0,_MultiPassRendererPlugin.normalizePasses)(passes).forEach((function(pass){var postProcessingPass=_this.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(pass[0]);postProcessingPass&&postProcessingPass.updateOptions(pass[1])})),this.styleOptions=_objectSpread({},this.styleOptions,{},rest),this}},{key:"render",value:function render(){return this.multiPassRenderer&&this.multiPassRenderer.getRenderFlag()?this.multiPassRenderer.render():this.renderModels(),this}},{key:"fitBounds",value:function fitBounds(){var extent=this.getSource().extent;this.map.fitBounds([[extent[0],extent[1]],[extent[2],extent[3]]])}},{key:"destroy",value:function destroy(){this.hooks.beforeDestroy.call(),this.styleAttributeService.clearAllAttributes(),this.models.forEach((function(model){return model.destroy()})),this.hooks.afterDestroy.call()}},{key:"isDirty",value:function isDirty(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter((function(attribute){return attribute.needRescale||attribute.needRemapping||attribute.needRegenerateVertices})).length}},{key:"setSource",value:function setSource(source){this.layerSource=source}},{key:"getSource",value:function getSource(){return this.layerSource}},{key:"getStyleOptions",value:function getStyleOptions(){return this.styleOptions}},{key:"setEncodedData",value:function setEncodedData(encodedData){this.encodedData=encodedData}},{key:"getEncodedData",value:function getEncodedData(){return this.encodedData}},{key:"getConfigSchemaForValidation",value:function getConfigSchemaForValidation(){return this.configSchema||(this.configSchema=(0,_mergeJsonSchemas.default)([_schema.default,this.getConfigSchema()])),this.configSchema}},{key:"pick",value:function pick(_ref){var x=_ref.x,y=_ref.y;this.interactionService.triggerHover({x:x,y:y})}},{key:"buildLayerModel",value:function buildLayerModel(options){var moduleName=options.moduleName,vertexShader=options.vertexShader,fragmentShader=options.fragmentShader,triangulation=options.triangulation,rest=_objectWithoutProperties(options,["moduleName","vertexShader","fragmentShader","triangulation"]);this.shaderModuleService.registerModule(moduleName,{vs:vertexShader,fs:fragmentShader});var _this$shaderModuleSer=this.shaderModuleService.getModule(moduleName),vs=_this$shaderModuleSer.vs,fs=_this$shaderModuleSer.fs,uniforms=_this$shaderModuleSer.uniforms,createModel=this.rendererService.createModel,_this$styleAttributeS=this.styleAttributeService.createAttributesAndIndices(this.encodedData,triangulation);return createModel(_objectSpread({attributes:_this$styleAttributeS.attributes,uniforms:uniforms,fs:fs,vs:vs,elements:_this$styleAttributeS.elements},rest))}},{key:"getConfigSchema",value:function getConfigSchema(){throw new Error("Method not implemented.")}},{key:"buildModels",value:function buildModels(){throw new Error("Method not implemented.")}},{key:"renderModels",value:function renderModels(){throw new Error("Method not implemented.")}},{key:"splitValuesAndCallbackInAttribute",value:function splitValuesAndCallbackInAttribute(valuesOrCallback,defaultValues){return{values:(0,_lodash.isFunction)(valuesOrCallback)?void 0:valuesOrCallback||defaultValues,callback:(0,_lodash.isFunction)(valuesOrCallback)?valuesOrCallback:void 0}}}]),BaseLayer}()).prototype,"plugins",[_dec],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor2=_applyDecoratedDescriptor(_class.prototype,"styleAttributeService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor3=_applyDecoratedDescriptor(_class.prototype,"configService",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor4=_applyDecoratedDescriptor(_class.prototype,"iconService",[_dec4],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor5=_applyDecoratedDescriptor(_class.prototype,"fontService",[_dec5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor6=_applyDecoratedDescriptor(_class.prototype,"rendererService",[_dec6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor7=_applyDecoratedDescriptor(_class.prototype,"shaderModuleService",[_dec7],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor8=_applyDecoratedDescriptor(_class.prototype,"map",[_dec8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor9=_applyDecoratedDescriptor(_class.prototype,"interactionService",[_dec9],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class);exports.default=BaseLayer},990:function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(3),__webpack_require__(26),__webpack_require__(9),__webpack_require__(59),__webpack_require__(27),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(11),__webpack_require__(2),__webpack_require__(69),__webpack_require__(10),__webpack_require__(87),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_class,_class2,_descriptor,_core=__webpack_require__(25),_utils=__webpack_require__(60),_inversify=__webpack_require__(18),_Viewport=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(991));var LNGLAT_OFFSET_ZOOM_THRESHOLD=12,AMapService=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_core.TYPES.ICoordinateSystemService),_dec((_descriptor=function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}((_class2=function(){function AMapService(){var _this=this;(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,AMapService),this.map=void 0,function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(this,"coordinateSystemService",_descriptor,this),this.markerContainer=void 0,this.$mapContainer=void 0,this.$jsapi=void 0,this.viewport=void 0,this.cameraChangedCallback=void 0,this.handleCameraChanged=function(e){var _e$camera=e.camera,fov=_e$camera.fov,near=_e$camera.near,far=_e$camera.far,height=_e$camera.height,pitch=_e$camera.pitch,rotation=_e$camera.rotation,aspect=_e$camera.aspect,position=_e$camera.position,_this$getCenter=_this.getCenter(),lng=_this$getCenter.lng,lat=_this$getCenter.lat;_this.cameraChangedCallback&&(_this.viewport.syncWithMapCamera({aspect:aspect,bearing:360-rotation,far:far,fov:fov,cameraHeight:height,near:near,pitch:pitch,zoom:_this.map.getZoom()-1,center:[lng,lat],offsetOrigin:[position.x,position.y]}),_this.viewport.getZoom()>LNGLAT_OFFSET_ZOOM_THRESHOLD?_this.coordinateSystemService.setCoordinateSystem(_core.CoordinateSystem.P20_OFFSET):_this.coordinateSystemService.setCoordinateSystem(_core.CoordinateSystem.P20),_this.cameraChangedCallback(_this.viewport))}}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(AMapService,[{key:"addMarkerContainer",value:function addMarkerContainer(){var mapContainer=this.map.getContainer();if(null!==mapContainer){var amap=mapContainer.getElementsByClassName("amap-maps")[0];this.markerContainer=_utils.DOM.create("div","l7_marker",amap)}}},{key:"getMarkerContainer",value:function getMarkerContainer(){return this.markerContainer}},{key:"on",value:function on(type,handle){this.map.on(type,handle)}},{key:"off",value:function off(type,handle){this.map.off(type,handle)}},{key:"getContainer",value:function getContainer(){return this.map.getContainer()}},{key:"getSize",value:function getSize(){var size=this.map.getSize();return[size.getWidth(),size.getHeight()]}},{key:"getType",value:function getType(){return _core.MapType.amap}},{key:"getZoom",value:function getZoom(){return this.map.getZoom()}},{key:"getCenter",value:function getCenter(){var center=this.map.getCenter();return{lng:center.getLng(),lat:center.getLat()}}},{key:"getPitch",value:function getPitch(){return this.map.getPitch()}},{key:"getRotation",value:function getRotation(){return this.map.getRotation()}},{key:"getBounds",value:function getBounds(){var amapBound=this.map.getBounds().toBounds(),NE=amapBound.getNorthEast(),SW=amapBound.getSouthWest();return[[NE.getLng(),NE.getLat()],[SW.getLng(),SW.getLat()]]}},{key:"getMinZoom",value:function getMinZoom(){return this.map.get("zooms")[0]}},{key:"getMaxZoom",value:function getMaxZoom(){return this.map.get("zooms")[1]}},{key:"setRotation",value:function setRotation(rotation){return this.map.setRotation(rotation)}},{key:"zoomIn",value:function zoomIn(){this.map.zoomIn()}},{key:"zoomOut",value:function zoomOut(){this.map.zoomOut()}},{key:"panTo",value:function panTo(p){this.map.panTo(p)}},{key:"panBy",value:function panBy(pixel){this.map.panTo(pixel)}},{key:"fitBounds",value:function fitBounds(extent){this.map.setBounds(new AMap.Bounds([extent[0][0],extent[0][1],extent[1][0],extent[1][1]]))}},{key:"setZoomAndCenter",value:function setZoomAndCenter(zoom,center){this.map.setZoomAndCenter(zoom,center)}},{key:"setMapStyle",value:function setMapStyle(style){this.setMapStyle(style)}},{key:"pixelToLngLat",value:function pixelToLngLat(pixel){var lngLat=this.map.pixelToLngLat(new AMap.Pixel(pixel[0],pixel[1]));return{lng:lngLat.getLng(),lat:lngLat.getLat()}}},{key:"lngLatToPixel",value:function lngLatToPixel(lnglat){var p=this.map.lnglatToPixel(new AMap.LngLat(lnglat[0],lnglat[1]));return{x:p.getX(),y:p.getY()}}},{key:"containerToLngLat",value:function containerToLngLat(pixel){var ll=new AMap.Pixel(pixel[0],pixel[1]),lngLat=this.map.containerToLngLat(ll);return{lng:lngLat.getLng(),lat:lngLat.getLat()}}},{key:"lngLatToContainer",value:function lngLatToContainer(lnglat){var ll=new AMap.LngLat(lnglat[0],lnglat[1]),pixel=this.map.lngLatToContainer(ll);return{x:pixel.getX(),y:pixel.getY()}}},{key:"init",value:(_init=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}var gen=fn.apply(self,args);_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(mapConfig){var id,style,rest,_this2=this;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return id=mapConfig.id,style=mapConfig.style,rest=_objectWithoutProperties(mapConfig,["id","style"]),this.$mapContainer=document.getElementById(id),_context.next=4,new Promise((function(resolve){window.onload=function(){_this2.map=new AMap.Map(id,_objectSpread({mapStyle:style,viewMode:"3D"},rest)),_this2.map.on("camerachange",_this2.handleCameraChanged),resolve()};var url="https://webapi.amap.com/maps?v=".concat("1.4.8","&key=").concat("15cd8a57710d40c9b7c0e3cc120f1200","&plugin=Map3D&callback=onload");_this2.$jsapi=document.createElement("script"),_this2.$jsapi.charset="utf-8",_this2.$jsapi.src=url,document.head.appendChild(_this2.$jsapi)}));case 4:this.viewport=new _Viewport.default;case 5:case"end":return _context.stop()}}),_callee,this)}))),function init(){return _init.apply(this,arguments)})},{key:"destroy",value:function destroy(){this.map.destroy(),document.head.removeChild(this.$jsapi)}},{key:"getMapContainer",value:function getMapContainer(){return this.$mapContainer}},{key:"onCameraChanged",value:function onCameraChanged(callback){this.cameraChangedCallback=callback}}]),AMapService;var _init}()).prototype,"coordinateSystemService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=AMapService},991:function(module,exports,__webpack_require__){"use strict";function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if(Symbol.iterator in Object(arr)||"[object Arguments]"===Object.prototype.toString.call(arr)){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(3),__webpack_require__(7),__webpack_require__(8),__webpack_require__(23),__webpack_require__(4),__webpack_require__(40),__webpack_require__(0),__webpack_require__(2),__webpack_require__(38),__webpack_require__(5),__webpack_require__(6),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _glMatrix=__webpack_require__(177),DEGREES_TO_RADIANS=Math.PI/180,Viewport=function(){function Viewport(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,Viewport),this.projectionMatrix=_glMatrix.mat4.create(),this.viewMatrix=_glMatrix.mat4.create(),this.viewProjectionMatrix=_glMatrix.mat4.create(),this.viewUncenteredMatrix=_glMatrix.mat4.create(),this.zoom=void 0,this.center=void 0}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Viewport,[{key:"syncWithMapCamera",value:function syncWithMapCamera(mapCamera){var _mapCamera$zoom=mapCamera.zoom,zoom=void 0===_mapCamera$zoom?1:_mapCamera$zoom,_mapCamera$pitch=mapCamera.pitch,pitch=void 0===_mapCamera$pitch?0:_mapCamera$pitch,_mapCamera$bearing=mapCamera.bearing,bearing=void 0===_mapCamera$bearing?0:_mapCamera$bearing,_mapCamera$center=mapCamera.center,center=void 0===_mapCamera$center?[0,0]:_mapCamera$center,_mapCamera$offsetOrig=mapCamera.offsetOrigin,offsetOrigin=void 0===_mapCamera$offsetOrig?[0,0]:_mapCamera$offsetOrig,_mapCamera$cameraHeig=mapCamera.cameraHeight,cameraHeight=void 0===_mapCamera$cameraHeig?1:_mapCamera$cameraHeig,_mapCamera$aspect=mapCamera.aspect,aspect=void 0===_mapCamera$aspect?1:_mapCamera$aspect,_mapCamera$near=mapCamera.near,near=void 0===_mapCamera$near?.1:_mapCamera$near,_mapCamera$far=mapCamera.far,far=void 0===_mapCamera$far?1e3:_mapCamera$far,_mapCamera$fov=mapCamera.fov,fov=void 0===_mapCamera$fov?0:_mapCamera$fov;this.zoom=zoom,this.center=center;var pitchInRadians=pitch*DEGREES_TO_RADIANS,rotationInRadians=(360-bearing)*DEGREES_TO_RADIANS;_glMatrix.mat4.perspective(this.projectionMatrix,fov,aspect,near,far);var eye=_glMatrix.vec3.fromValues(cameraHeight*Math.sin(pitchInRadians)*Math.sin(rotationInRadians),-cameraHeight*Math.sin(pitchInRadians)*Math.cos(rotationInRadians),cameraHeight*Math.cos(pitchInRadians)),up=_glMatrix.vec3.fromValues(-Math.cos(pitchInRadians)*Math.sin(rotationInRadians),Math.cos(pitchInRadians)*Math.cos(rotationInRadians),Math.sin(pitchInRadians));_glMatrix.mat4.lookAt(this.viewMatrix,eye,_glMatrix.vec3.fromValues(0,0,0),up),_glMatrix.mat4.translate(this.viewMatrix,this.viewMatrix,_glMatrix.vec3.fromValues(-offsetOrigin[0],offsetOrigin[1],0)),_glMatrix.mat4.multiply(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function getZoom(){return this.zoom}},{key:"getZoomScale",value:function getZoomScale(){return 524288}},{key:"getCenter",value:function getCenter(){var _this$center=_slicedToArray(this.center,2);return[_this$center[0],_this$center[1]]}},{key:"getProjectionMatrix",value:function getProjectionMatrix(){return this.projectionMatrix}},{key:"getViewMatrix",value:function getViewMatrix(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function getViewMatrixUncentered(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function getViewProjectionMatrix(){return this.viewProjectionMatrix}},{key:"getFocalDistance",value:function getFocalDistance(){return 1}},{key:"projectFlat",value:function projectFlat(lngLat){var lat=Math.max(Math.min(85.0511287798,lngLat[1]),-85.0511287798),d=Math.PI/180,x=lngLat[0]*d,y=lat*d;return y=Math.log(Math.tan(Math.PI/4+y/2)),[x=268435456*(.5/Math.PI*x+.5)-215440491,y=-(268435456*(-.5/Math.PI*y+(d=.5))-106744817)]}}]),Viewport}();exports.default=Viewport},992:function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(3),__webpack_require__(26),__webpack_require__(109),__webpack_require__(9),__webpack_require__(59),__webpack_require__(27),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(11),__webpack_require__(2),__webpack_require__(69),__webpack_require__(10),__webpack_require__(87),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_class,_class2,_descriptor,_core=__webpack_require__(25),_utils=__webpack_require__(60),_inversify=__webpack_require__(18),_mapboxGl=_interopRequireDefault(__webpack_require__(993)),_Viewport=_interopRequireDefault(__webpack_require__(994));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var EventMap={mapmove:"move",camerachange:"move"};_mapboxGl.default.accessToken="pk.eyJ1IjoieGlhb2l2ZXIiLCJhIjoiY2pxcmc5OGNkMDY3cjQzbG42cXk5NTl3YiJ9.hUC5Chlqzzh0FFd_aEc-uQ";var LNGLAT_OFFSET_ZOOM_THRESHOLD=12,MapboxService=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_core.TYPES.ICoordinateSystemService),_dec((_descriptor=function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}((_class2=function(){function MapboxService(){var _this=this;(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,MapboxService),this.map=void 0,function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(this,"coordinateSystemService",_descriptor,this),this.viewport=void 0,this.markerContainer=void 0,this.cameraChangedCallback=void 0,this.$mapContainer=void 0,this.$link=void 0,this.handleCameraChanged=function(){var _this$map$getCenter$w=_this.map.getCenter().wrap(),lat=_this$map$getCenter$w.lat,lng=_this$map$getCenter$w.lng;_this.viewport.syncWithMapCamera({bearing:_this.map.getBearing(),center:[lng,lat],viewportHeight:_this.map.transform.height,pitch:_this.map.getPitch(),viewportWidth:_this.map.transform.width,zoom:_this.map.getZoom(),cameraHeight:0}),_this.viewport.getZoom()>LNGLAT_OFFSET_ZOOM_THRESHOLD?_this.coordinateSystemService.setCoordinateSystem(_core.CoordinateSystem.LNGLAT_OFFSET):_this.coordinateSystemService.setCoordinateSystem(_core.CoordinateSystem.LNGLAT),_this.cameraChangedCallback(_this.viewport)}}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(MapboxService,[{key:"addMarkerContainer",value:function addMarkerContainer(){var container=this.map.getCanvasContainer();this.markerContainer=_utils.DOM.create("div","l7_marker",container)}},{key:"getMarkerContainer",value:function getMarkerContainer(){return this.markerContainer}},{key:"on",value:function on(type,handle){this.map.on(EventMap[type]||type,handle)}},{key:"off",value:function off(type,handle){this.map.off(EventMap[type]||type,handle)}},{key:"getContainer",value:function getContainer(){return this.map.getContainer()}},{key:"getSize",value:function getSize(){var size=this.map.transform;return[size.width,size.height]}},{key:"getType",value:function getType(){return _core.MapType.mapbox}},{key:"getZoom",value:function getZoom(){return this.map.getZoom()}},{key:"getCenter",value:function getCenter(){return this.map.getCenter()}},{key:"getPitch",value:function getPitch(){return this.map.getPitch()}},{key:"getRotation",value:function getRotation(){return this.map.getBearing()}},{key:"getBounds",value:function getBounds(){return this.map.getBounds().toArray()}},{key:"getMinZoom",value:function getMinZoom(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function getMaxZoom(){return this.map.getMaxZoom()}},{key:"setRotation",value:function setRotation(rotation){this.map.setBearing(rotation)}},{key:"zoomIn",value:function zoomIn(){this.map.zoomIn()}},{key:"zoomOut",value:function zoomOut(){this.map.zoomOut()}},{key:"panTo",value:function panTo(p){this.map.panTo(p)}},{key:"panBy",value:function panBy(pixel){this.panTo(pixel)}},{key:"fitBounds",value:function fitBounds(bound){this.map.fitBounds(bound)}},{key:"setMaxZoom",value:function setMaxZoom(max){this.map.setMaxZoom(max)}},{key:"setMinZoom",value:function setMinZoom(min){this.map.setMinZoom(min)}},{key:"setZoomAndCenter",value:function setZoomAndCenter(zoom,center){this.map.flyTo({zoom:zoom,center:center})}},{key:"setMapStyle",value:function setMapStyle(style){this.map.setStyle(style)}},{key:"pixelToLngLat",value:function pixelToLngLat(pixel){return this.map.unproject(pixel)}},{key:"lngLatToPixel",value:function lngLatToPixel(lnglat){return this.map.project(lnglat)}},{key:"containerToLngLat",value:function containerToLngLat(pixel){return this.map.unproject(pixel)}},{key:"lngLatToContainer",value:function lngLatToContainer(lnglat){return this.map.project(lnglat)}},{key:"init",value:(_init=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}var gen=fn.apply(self,args);_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(mapConfig){var id,_mapConfig$attributio,attributionControl,rest;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:id=mapConfig.id,_mapConfig$attributio=mapConfig.attributionControl,attributionControl=void 0!==_mapConfig$attributio&&_mapConfig$attributio,rest=_objectWithoutProperties(mapConfig,["id","attributionControl"]),this.$mapContainer=document.getElementById(id),this.viewport=new _Viewport.default,this.map=new _mapboxGl.default.Map(_objectSpread({container:id,attributionControl:attributionControl},rest)),this.map.on("move",this.handleCameraChanged),this.handleCameraChanged(),this.$link=document.createElement("link"),this.$link.href="https://api.tiles.mapbox.com/mapbox-gl-js/v1.2.1/mapbox-gl.css",this.removeLogoControl(),this.$link.rel="stylesheet",document.head.appendChild(this.$link);case 11:case"end":return _context.stop()}}),_callee,this)}))),function init(){return _init.apply(this,arguments)})},{key:"destroy",value:function destroy(){document.head.removeChild(this.$link),this.$mapContainer=null,this.map.remove()}},{key:"getMapContainer",value:function getMapContainer(){return this.$mapContainer}},{key:"onCameraChanged",value:function onCameraChanged(callback){this.cameraChangedCallback=callback}},{key:"initMapConig",value:function initMapConig(){throw new Error("Method not implemented.")}},{key:"removeLogoControl",value:function removeLogoControl(){var logoCtr=this.map._controls.find((function(ctr){if(ctr.hasOwnProperty("_updateLogo"))return!0}));logoCtr&&this.map.removeControl(logoCtr)}}]),MapboxService;var _init}()).prototype,"coordinateSystemService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=MapboxService},994:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _viewportMercatorProject=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(428));var Viewport=function(){function Viewport(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,Viewport),this.viewport=void 0}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Viewport,[{key:"syncWithMapCamera",value:function syncWithMapCamera(mapCamera){var center=mapCamera.center,zoom=mapCamera.zoom,pitch=mapCamera.pitch,bearing=mapCamera.bearing,viewportHeight=mapCamera.viewportHeight,viewportWidth=mapCamera.viewportWidth;this.viewport=new _viewportMercatorProject.default({width:viewportWidth,height:viewportHeight,longitude:center&&center[0],latitude:center&&center[1],zoom:zoom,pitch:pitch,bearing:bearing})}},{key:"getZoom",value:function getZoom(){return this.viewport.zoom}},{key:"getZoomScale",value:function getZoomScale(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function getCenter(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function getProjectionMatrix(){return this.viewport.projectionMatrix}},{key:"getViewMatrix",value:function getViewMatrix(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function getViewMatrixUncentered(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function getViewProjectionMatrix(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function getFocalDistance(){return 1}},{key:"projectFlat",value:function projectFlat(lngLat,scale){return this.viewport.projectFlat(lngLat,scale)}}]),Viewport}();exports.default=Viewport},995:function(module,exports,__webpack_require__){"use strict";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var source,i=1;i<arguments.length;i++)source=null==arguments[i]?{}:arguments[i],i%2?ownKeys(source,!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(source).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}));return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],0<=excluded.indexOf(key)||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],!(0<=excluded.indexOf(key))&&Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(3),__webpack_require__(26),__webpack_require__(9),__webpack_require__(59),__webpack_require__(4),__webpack_require__(27),__webpack_require__(22),__webpack_require__(29),__webpack_require__(20),__webpack_require__(31),__webpack_require__(0),__webpack_require__(24),__webpack_require__(34),__webpack_require__(11),__webpack_require__(2),__webpack_require__(69),__webpack_require__(5),__webpack_require__(80),__webpack_require__(10),__webpack_require__(6),__webpack_require__(87),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _dec,_dec2,_class,_class2,_descriptor,_core=__webpack_require__(25),_utils=__webpack_require__(60),_inversify=__webpack_require__(18),maptalks=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={};if(null!=obj){var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}(__webpack_require__(422)),_Viewport=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(996));function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}var EventMap={zoomstart:"zoomstart",zoomchange:"zooming",zoomend:"zoomend",mapmove:"moving",camerachange:"zoomstart zooming zoomend movestart moving moveend dragrotatestart dragrotating dragrotateend resize spatialreferencechange"},LNGLAT_OFFSET_ZOOM_THRESHOLD=12,MAX_RES=12756274*Math.PI/(256*Math.pow(2,20)),MaptalksService=(_dec=(0,_inversify.injectable)(),_dec2=(0,_inversify.inject)(_core.TYPES.ICoordinateSystemService),_dec((_descriptor=function _applyDecoratedDescriptor(target,property,decorators,descriptor,context){var desc={};return Object.keys(descriptor).forEach((function(key){desc[key]=descriptor[key]})),desc.enumerable=!!desc.enumerable,desc.configurable=!!desc.configurable,("value"in desc||desc.initializer)&&(desc.writable=!0),desc=decorators.slice().reverse().reduce((function(desc,decorator){return decorator(target,property,desc)||desc}),desc),context&&void 0!==desc.initializer&&(desc.value=desc.initializer?desc.initializer.call(context):void 0,desc.initializer=void 0),void 0===desc.initializer&&(Object.defineProperty(target,property,desc),desc=null),desc}((_class2=function(){function MaptalksService(){var _this=this;(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,MaptalksService),this.map=void 0,function _initializerDefineProperty(target,property,descriptor,context){descriptor&&Object.defineProperty(target,property,{enumerable:descriptor.enumerable,configurable:descriptor.configurable,writable:descriptor.writable,value:descriptor.initializer?descriptor.initializer.call(context):void 0})}(this,"coordinateSystemService",_descriptor,this),this.viewport=void 0,this.markerContainer=void 0,this.cameraChangedCallback=void 0,this.$mapContainer=void 0,this.$mapConfig=void 0,this.handleCameraChanged=function(){var _this$map$getCenter=_this.map.getCenter(),lng=_this$map$getCenter.x,lat=_this$map$getCenter.y,size=_this.map.getSize();_this.viewport.syncWithMapCamera({bearing:_this.map.getBearing(),center:[lng,lat],viewportHeight:size.height,pitch:_this.map.getPitch(),viewportWidth:size.width,zoom:_this.getZoom(),cameraHeight:0}),_this.viewport.getZoom()>LNGLAT_OFFSET_ZOOM_THRESHOLD?_this.coordinateSystemService.setCoordinateSystem(_core.CoordinateSystem.LNGLAT_OFFSET):_this.coordinateSystemService.setCoordinateSystem(_core.CoordinateSystem.LNGLAT),_this.cameraChangedCallback(_this.viewport)}}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(MaptalksService,[{key:"addMarkerContainer",value:function addMarkerContainer(){var container=this.map.getContainer();this.markerContainer=_utils.DOM.create("div","l7_marker",container)}},{key:"getMarkerContainer",value:function getMarkerContainer(){return this.markerContainer}},{key:"on",value:function on(type,handle){this.map&&this.map.on(EventMap[type]||type,handle)}},{key:"off",value:function off(type,handle){this.map&&this.map.off(EventMap[type]||type,handle)}},{key:"getContainer",value:function getContainer(){return"front"===this.$mapConfig.layerContainer?this.map._panels.frontStatic:this.map._panels.backStatic}},{key:"getSize",value:function getSize(){var size=this.map.getSize();return[size.width,size.height]}},{key:"getType",value:function getType(){return _core.MapType.maptalks}},{key:"getZoom",value:function getZoom(){return 19-Math.log(this.map.getResolution()/MAX_RES)/Math.LN2}},{key:"setZoom",value:function setZoom(zoom){this.map.setZoom(zoom)}},{key:"getCenter",value:function getCenter(){return this.map.getCenter()}},{key:"setCenter",value:function setCenter(center){this.map.setCenter(center)}},{key:"getPitch",value:function getPitch(){return this.map.getPitch()}},{key:"getRotation",value:function getRotation(){return this.map.getBearing()}},{key:"getBounds",value:function getBounds(){var extent=this.map.getExtent();return[[extent.xmin,extent.ymin],[extent.xmax,extent.ymax]]}},{key:"getMinZoom",value:function getMinZoom(){return this.map.getMinZoom()}},{key:"getMaxZoom",value:function getMaxZoom(){return this.map.getMaxZoom()}},{key:"setRotation",value:function setRotation(rotation){this.map.setBearing(rotation)}},{key:"zoomIn",value:function zoomIn(){this.map.zoomIn()}},{key:"zoomOut",value:function zoomOut(){this.map.zoomOut()}},{key:"panTo",value:function panTo(p){this.map.panTo(new maptalks.Coordinate(p))}},{key:"panBy",value:function panBy(pixel){this.map.panBy(new maptalks.Point(pixel))}},{key:"fitBounds",value:function fitBounds(bound){this.map.fitExtent(new maptalks.Extent(bound[0][0],bound[0][1],bound[1][0],bound[1][1]))}},{key:"setMaxZoom",value:function setMaxZoom(max){this.map.setMaxZoom(max)}},{key:"setMinZoom",value:function setMinZoom(min){this.map.setMinZoom(min)}},{key:"setZoomAndCenter",value:function setZoomAndCenter(zoom,center){this.map.setCenterAndZoom(new maptalks.Coordinate(center),zoom)}},{key:"pixelToLngLat",value:function pixelToLngLat(pixel){var coordinates=this.map.containerPointToCoordinate(new maptalks.Point(pixel));return{lng:coordinates.x,lat:coordinates.y}}},{key:"lngLatToPixel",value:function lngLatToPixel(lnglat){return this.map.coordinateToContainerPoint(new maptalks.Coordinate(lnglat))}},{key:"containerToLngLat",value:function containerToLngLat(pixel){var coordinates=this.map.containerPointToCoordinate(new maptalks.Point(pixel));return{lng:coordinates.x,lat:coordinates.y}}},{key:"lngLatToContainer",value:function lngLatToContainer(lnglat){return this.map.coordinateToContainerPoint(new maptalks.Coordinate(lnglat))}},{key:"init",value:(_init=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}var gen=fn.apply(self,args);_next(void 0)}))}}(regeneratorRuntime.mark((function _callee(mapConfig){var id,rest;return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:id=mapConfig.id,rest=_objectWithoutProperties(mapConfig,["id"]),this.$mapContainer="string"==typeof id?document.getElementById(id):id,this.viewport=new _Viewport.default,this.map=new maptalks.Map(id,_objectSpread({},rest)),this.map.on("zoomstart zooming zoomend movestart moving moveend dragrotatestart dragrotating dragrotateend resize spatialreferencechange",this.handleCameraChanged,this),this.handleCameraChanged();case 6:case"end":return _context.stop()}}),_callee,this)}))),function init(){return _init.apply(this,arguments)})},{key:"destroy",value:function destroy(){this.map.remove(),this.$mapContainer=null}},{key:"getMapContainer",value:function getMapContainer(){return this.$mapContainer}},{key:"onCameraChanged",value:function onCameraChanged(callback){this.cameraChangedCallback=callback}},{key:"initMapConig",value:function initMapConig(){throw new Error("Method not implemented.")}}]),MaptalksService;var _init}()).prototype,"coordinateSystemService",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_class=_class2))||_class);exports.default=MaptalksService},996:function(module,exports,__webpack_require__){"use strict";function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _viewportMercatorProject=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(428));var Viewport=function(){function Viewport(){(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,Viewport),this.viewport=void 0}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(Viewport,[{key:"syncWithMapCamera",value:function syncWithMapCamera(mapCamera){var center=mapCamera.center,zoom=mapCamera.zoom,pitch=mapCamera.pitch,bearing=mapCamera.bearing,viewportHeight=mapCamera.viewportHeight,viewportWidth=mapCamera.viewportWidth;this.viewport=new _viewportMercatorProject.default({width:viewportWidth,height:viewportHeight,longitude:center&&center[0],latitude:center&&center[1],zoom:zoom,pitch:pitch,bearing:bearing})}},{key:"getZoom",value:function getZoom(){return this.viewport.zoom}},{key:"getZoomScale",value:function getZoomScale(){return Math.pow(2,this.getZoom())}},{key:"getCenter",value:function getCenter(){return[this.viewport.longitude,this.viewport.latitude]}},{key:"getProjectionMatrix",value:function getProjectionMatrix(){return this.viewport.projectionMatrix}},{key:"getViewMatrix",value:function getViewMatrix(){return this.viewport.viewMatrix}},{key:"getViewMatrixUncentered",value:function getViewMatrixUncentered(){return this.viewport.viewMatrixUncentered}},{key:"getViewProjectionMatrix",value:function getViewProjectionMatrix(){return this.viewport.viewProjectionMatrix}},{key:"getFocalDistance",value:function getFocalDistance(){return 1}},{key:"projectFlat",value:function projectFlat(lngLat,scale){return this.viewport.projectFlat(lngLat,scale)}}]),Viewport}();exports.default=Viewport},997:function(module,exports,__webpack_require__){"use strict";__webpack_require__(0),Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"ReglRendererService",{enumerable:!0,get:function get(){return _regl.default}});var _regl=function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}(__webpack_require__(998))},998:function(module,exports,__webpack_require__){"use strict";function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)(descriptor=props[i]).enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}__webpack_require__(0),__webpack_require__(2),__webpack_require__(69),__webpack_require__(87),Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _class,_inversify=__webpack_require__(18),_regl=_interopRequireDefault(__webpack_require__(999)),_ReglAttribute=_interopRequireDefault(__webpack_require__(1e3)),_ReglBuffer=_interopRequireDefault(__webpack_require__(1001)),_ReglElements=_interopRequireDefault(__webpack_require__(1002)),_ReglFramebuffer=_interopRequireDefault(__webpack_require__(1003)),_ReglModel=_interopRequireDefault(__webpack_require__(1004)),_ReglTexture2D=_interopRequireDefault(__webpack_require__(1005));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var ReglRendererService=(0,_inversify.injectable)()(_class=function(){function ReglRendererService(){var _this=this;(function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")})(this,ReglRendererService),this.gl=void 0,this.$container=void 0,this.createModel=function(options){return new _ReglModel.default(_this.gl,options)},this.createAttribute=function(options){return new _ReglAttribute.default(_this.gl,options)},this.createBuffer=function(options){return new _ReglBuffer.default(_this.gl,options)},this.createElements=function(options){return new _ReglElements.default(_this.gl,options)},this.createTexture2D=function(options){return new _ReglTexture2D.default(_this.gl,options)},this.createFramebuffer=function(options){return new _ReglFramebuffer.default(_this.gl,options)},this.useFramebuffer=function(framebuffer,drawCommands){_this.gl({framebuffer:framebuffer?framebuffer.get():null})(drawCommands)},this.clear=function(options){var color=options.color,depth=options.depth,stencil=options.stencil,_options$framebuffer=options.framebuffer,framebuffer=void 0===_options$framebuffer?null:_options$framebuffer,reglClearOptions={color:color,depth:depth,stencil:stencil};reglClearOptions.framebuffer=null===framebuffer?framebuffer:framebuffer.get(),_this.gl.clear(reglClearOptions)},this.viewport=function(_ref){var x=_ref.x,y=_ref.y,width=_ref.width,height=_ref.height;_this.gl._gl.viewport(x,y,width,height),_this.gl._refresh()},this.readPixels=function(options){var framebuffer=options.framebuffer,readPixelsOptions={x:options.x,y:options.y,width:options.width,height:options.height};return framebuffer&&(readPixelsOptions.framebuffer=framebuffer.get()),_this.gl.read(readPixelsOptions)},this.getViewportSize=function(){return{width:_this.gl._gl.drawingBufferWidth,height:_this.gl._gl.drawingBufferHeight}},this.getContainer=function(){return _this.$container},this.destroy=function(){_this.gl.destroy()}}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ReglRendererService,[{key:"init",value:(_init=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}var gen=fn.apply(self,args);_next(void 0)}))}}(regeneratorRuntime.mark((function _callee($container){return regeneratorRuntime.wrap((function(_context){for(;;)switch(_context.prev=_context.next){case 0:return this.$container=$container,_context.next=3,new Promise((function(resolve,reject){(0,_regl.default)({container:$container,attributes:{alpha:!0,antialias:!1,premultipliedAlpha:!0},extensions:["OES_element_index_uint","EXT_shader_texture_lod","OES_standard_derivatives","EXT_SRGB","OES_texture_float","WEBGL_depth_texture","angle_instanced_arrays","EXT_texture_filter_anisotropic"],optionalExtensions:["oes_texture_float_linear"],onDone:function(err,r){(err||!r)&&reject(err),resolve(r)}})}));case 3:this.gl=_context.sent;case 4:case"end":return _context.stop()}}),_callee,this)}))),function init(){return _init.apply(this,arguments)})}]),ReglRendererService;var _init}())||_class;exports.default=ReglRendererService}},[[434,1,2]]]);
//# sourceMappingURL=main.58a28663b51940e7ce16.bundle.js.map